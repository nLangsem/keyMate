/*! For license information please see main.6b3a60b4.js.LICENSE.txt */
!function(){var e={694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var u in n)r.call(n,u)&&n[u]&&e.push(u)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},176:function(e){"use strict";e.exports=function(e,t,n,r,i,a,o,u){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,u],l=0;(s=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.default)((function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=null;return t.forEach((function(e){if(null==i){var t=e.apply(void 0,n);null!=t&&(i=t)}})),i}))};var r,i=n(54),a=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},54:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,i,a,o){var u=i||"<<anonymous>>",s=o||r;if(null==n[r])return t?new Error("Required "+a+" `"+s+"` was not specified in `"+u+"`."):null;for(var c=arguments.length,l=Array(c>6?c-6:0),f=6;f<c;f++)l[f-6]=arguments[f];return e.apply(void 0,[n,r,u,a,s].concat(l))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function z(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case I:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ee=null;function Ie(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Se(e){_e?Ee?Ee.push(e):Ee=[e]:_e=e}function Te(){if(_e){var e=_e,t=Ee;if(Ee=_e=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==_e||null!==Ee)&&(Ne(),Te())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Re=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,Et,It,St=!1,Tt=[],Ct=null,Nt=null,At=null,Pt=new Map,Ot=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void It(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){St=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==At&&jt(At)&&(At=null),Pt.forEach(Ut),Ot.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Pt.forEach(t),Ot.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ot.set(a,Mt(Ot.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function In(){return En}var Sn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Pn),Rn=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Dn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Se(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Qn(e){jr(e,0)}function Yn(e){if(H(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Wn(t,Hn,e,we(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Er={};function Ir(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return _r[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Sr=Ir("animationend"),Tr=Ir("animationiteration"),Cr=Ir("animationstart"),Nr=Ir("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Ar.set(e,t),s(t,[e])}for(var Rr=0;Rr<Pr.length;Rr++){var Dr=Pr[Rr];Or(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Or(Sr,"onAnimationEnd"),Or(Tr,"onAnimationIteration"),Or(Cr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,je||(je=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Wt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Pe((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Sr:case Tr:case Cr:s=yn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=On;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Oe(p,h))&&l.push(Wr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=$n;else if(Kn(u))if(Jn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(y=Gr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}jr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Oe(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Oe(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Oe(n,a))&&o.unshift(Wr(n,s,u)):i||null!=(s=Oe(n,a))&&o.push(Wr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Ei(e){return{current:e}}function Ii(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Si(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ci=Ei(Ti),Ni=Ei(!1),Ai=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ii(Ni),Ii(Ci)}function Di(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Si(Ci,e),Si(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ni),Ii(Ci),Si(Ci,e)):Ii(Ni),Si(Ni,n)}var ji=null,Ui=!1,Vi=!1;function zi(e){null===ji?ji=[e]:ji.push(e)}function Bi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=kt;try{var n=ji;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),He(Ze,Bi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Ki=0,Wi=null,Gi=0,Hi=[],Qi=0,Yi=null,$i=1,Ji="";function Xi(e,t){qi[Ki++]=Gi,qi[Ki++]=Wi,Wi=e,Gi=t}function Zi(e,t,n){Hi[Qi++]=$i,Hi[Qi++]=Ji,Hi[Qi++]=Yi,Yi=e;var r=$i;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else $i=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Wi;)Wi=qi[--Ki],qi[Ki]=null,Gi=qi[--Ki],qi[Ki]=null;for(;e===Yi;)Yi=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null,$i=Hi[--Qi],Hi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ei(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ya.current;Ii(ya),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ia(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ns)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function ja(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ia(a):(i=Oi(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ia(a):(a=Oi(t)?Ai:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ga(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ga(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ga(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case O:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Xi(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ga(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ga(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case O:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=jc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Ya(!0),Ja=Ya(!1),Xa={},Za=Ei(Xa),eo=Ei(Xa),to=Ei(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(Za),Si(Za,t)}function io(){Ii(Za),Ii(eo),Ii(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Si(eo,e),Si(Za,n))}function oo(e){eo.current===e&&(Ii(Za),Ii(eo))}var uo=Ei(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Io(){var e=0!==bo;return bo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Oo(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Do.bind(null,n,r,i,t),void 0,null),null===As)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function jo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function zo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return zo(8390656,8,e,t)}function Ko(e,t){return Bo(2048,8,e,t)}function Wo(e,t){return Bo(4,2,e,t)}function Go(e,t){return Bo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Ho.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ia,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Ia,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ia,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:jo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===As)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=As.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ia,useCallback:$o,useContext:Ia,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Oo,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ia,useCallback:$o,useContext:Ia,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:Jo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Xo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Oo,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ws||(Ws=!0,Gs=r),hu(0,t)},n}function vu(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Ja(t,null,n,r):$a(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=Io(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Wu(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Eu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Iu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Ds,Rs),Rs|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Ds,Rs),Rs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Ds,Rs),Rs|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Ds,Rs),Rs|=r;return wu(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Oi(n)?Ai:Ci.current;return a=Pi(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=Io(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Cu(e,t,n,r,i){if(Oi(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Ku(e,t),qa(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ia(c):c=Pi(t,c=Oi(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Aa?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Aa||Ba(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Oa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ia(s):s=Pi(t,s=Oi(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Aa||Ba(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Pu(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Ou,Ru,Du,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function ju(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=As)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return mc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Qi++]=$i,Hi[Qi++]=Ji,Hi[Qi++]=Yi,$i=e.id,Ji=e.overflow,Yi=t),t=Uu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Dc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Dc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zu(e,n,t);else if(19===e.tag)zu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Oi(t.type)&&Ri(),Hu(t),null;case 3:return r=t.stateNode,io(),Ii(Ni),Ii(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ru(e,t),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Du(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":$(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ou(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Ii(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):mc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),Ru(e,t),null===e&&Br(t.stateNode.containerInfo),Hu(t),null;case 10:return xa(t.type._context),Hu(t),null;case 19:if(Ii(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Gu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Gu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>qs&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Je()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=uo.current,Si(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rs)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Oi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ii(Ni),Ii(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ii(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ou=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ru=function(){},Du=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Ju=!1,Xu="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Ju||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Ju&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Ju&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Ju=(r=Ju)||null!==n.memoizedState,ds(e,t,n),Ju=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xu),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Ic(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Ic(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ic(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ic(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ic(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Ic(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Je())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Ju=(l=Ju)||f,ms(t,e),Ju=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ic(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){xs(h);continue}}null!==p?(p.return=d,Zu=p):xs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ic(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ic(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Ju;u=$u;var c=Ju;if($u=o,(Ju=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Zu=s):_s(i);for(;null!==a;)Zu=a,bs(a,t,n),a=a.sibling;Zu=i,$u=u,Ju=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ju||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ju)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ja(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ja(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Ju||512&t.flags&&as(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{as(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Es,Is=Math.ceil,Ss=b.ReactCurrentDispatcher,Ts=b.ReactCurrentOwner,Cs=b.ReactCurrentBatchConfig,Ns=0,As=null,Ps=null,Os=0,Rs=0,Ds=Ei(0),Ls=0,Ms=null,Fs=0,js=0,Us=0,Vs=null,zs=null,Bs=0,qs=1/0,Ks=null,Ws=!1,Gs=null,Hs=null,Qs=!1,Ys=null,$s=0,Js=0,Xs=null,Zs=-1,ec=0;function tc(){return 0!==(6&Ns)?Je():-1!==Zs?Zs:Zs=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ns)&&0!==Os?Os&-Os:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Js)throw Js=0,Xs=null,Error(a(185));yt(e,n,r),0!==(2&Ns)&&e===As||(e===As&&(0===(2&Ns)&&(js|=n),4===Ls&&sc(e,Os)),ic(e,r),1===n&&0===Ns&&0===(1&t.mode)&&(qs=Je()+500,Ui&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===As?Os:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&Ns)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&Ns))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===As?Os:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Ns;Ns|=2;var o=vc();for(As===e&&Os===t||(Ks=null,qs=Je()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}wa(),Ss.current=o,Ns=i,null!==Ps?t=0:(As=null,Os=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Je()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,zs,Ks);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Bs+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,zs,Ks),t);break}xc(e,zs,Ks);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,zs,Ks),r);break}xc(e,zs,Ks);break;default:throw Error(a(329))}}}return ic(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=zs,zs=n,null!==t&&uc(t)),e}function uc(e){null===zs?zs=e:zs.push.apply(zs,e)}function sc(e,t){for(t&=~Us,t&=~js,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ns))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return ic(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,zs,Ks),ic(e,Je()),null}function lc(e,t){var n=Ns;Ns|=1;try{return e(t)}finally{0===(Ns=n)&&(qs=Je()+500,Ui&&Bi())}}function fc(e){null!==Ys&&0===Ys.tag&&0===(6&Ns)&&_c();var t=Ns;Ns|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(Ns=t))&&Bi()}}function hc(){Rs=Ds.current,Ii(Ds)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ps)for(n=Ps.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Ii(Ni),Ii(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ii(uo);break;case 10:xa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(As=e,Ps=e=Dc(e.current,null),Os=Rs=t,Ls=0,Ms=null,Us=js=Fs=0,zs=Vs=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function pc(e,t){for(;;){var n=Ps;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Ts.current=null,null===n||null===n.return){Ls=1,Ms=t,Ps=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Os,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Ps===n&&null!==n&&(Ps=n=n.return);continue}break}}function vc(){var e=Ss.current;return Ss.current=ou,null===e?ou:e}function mc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===As||0===(268435455&Fs)&&0===(268435455&js)||sc(As,Os)}function yc(e,t){var n=Ns;Ns|=2;var r=vc();for(As===e&&Os===t||(Ks=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),Ns=n,Ss.current=r,null!==Ps)throw Error(a(261));return As=null,Os=0,Ls}function gc(){for(;null!==Ps;)bc(Ps)}function kc(){for(;null!==Ps&&!Ye();)bc(Ps)}function bc(e){var t=Es(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?wc(e):Ps=t,Ts.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Rs)))return void(Ps=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(Ps=n);if(null===e)return Ls=6,void(Ps=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ps=t);Ps=t=e}while(null!==t);0===Ls&&(Ls=5)}function xc(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Ys);if(0!==(6&Ns))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===As&&(Ps=As=null,Os=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Ac(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=Ns;Ns|=4,Ts.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ic(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ys(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),$e(),Ns=s,kt=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,Ys=e,$s=i),o=e.pendingLanes,0===o&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ws)throw Ws=!1,e=Gs,Gs=null,e;0!==(1&$s)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===Xs?Js++:(Js=0,Xs=e):Js=0,Bi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function _c(){if(null!==Ys){var e=bt($s),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,$s=0,0!==(6&Ns))throw Error(a(331));var i=Ns;for(Ns|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var b=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Zu=b;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(x){Ic(s,s.return,x)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(Ns=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Ec(e,t,n){e=Da(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ic(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Da(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,As===e&&(Os&n)===n&&(4===Ls||3===Ls&&(130023424&Os)===Os&&500>Je()-Bs?dc(e,0):Us|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Ac(e,t){return He(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Pc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Mc(n.children,i,o,t);case E:u=8,i|=8;break;case I:return(e=Oc(12,n,t,2|i)).elementType=I,e.lanes=o,e;case N:return(e=Oc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Oc(19,n,t,i)).elementType=A,e.lanes=o,e;case R:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case C:u=11;break e;case P:u=14;break e;case O:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Oc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Oc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=zc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=Ra(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Kc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Es=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Oi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?ju(e,t,n):(Si(uo,1&uo.current),null!==(e=Wu(e,t,n))?e.sibling:null);Si(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Iu(e,t,n)}return Wu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ku(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=Io();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ku(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Oa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pu(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Pu(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Wu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Su(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return ju(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Wu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Ia(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_u(e,t,r,i=ma(r.type,i),n);case 15:return Eu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Ku(e,t),t.tag=1,Oi(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),qa(t,r,i),Wa(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Iu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Wc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Wc(s);u.call(e)}}var s=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),fc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Wc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Kc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Je()),0===(6&Ns)&&(qs=Je()+500,Bi()))}break;case 13:fc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Hc(e,1)}},xt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Hc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Hc(e,t)}},Et=function(){return kt},It=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ne=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Se,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.s=r.createRoot,r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},R={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,R(x);else{var t=r(l);null!==t&&D(w,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(S),S=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&D(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,E=!1,I=null,S=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==I){var e=t.unstable_now();C=e;var n=!0;try{n=I(!0,e)}finally{n?_():(E=!1,I=null)}}else E=!1}if("function"===typeof k)_=function(){k(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,O=P.port2;P.port1.onmessage=A,_=function(){O.postMessage(null)}}else _=function(){y(A,0)};function R(e){I=e,E||(E=!0,_())}function D(e,n){S=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(S),S=-1):m=!0,D(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,R(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},391:function(e){"use strict";var t=function(){};e.exports=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return ar},SDK_VERSION:function(){return vi},_DEFAULT_ENTRY_NAME:function(){return ni},_addComponent:function(){return oi},_addOrOverwriteComponent:function(){return ui},_apps:function(){return ii},_clearComponents:function(){return fi},_components:function(){return ai},_getProvider:function(){return ci},_registerComponent:function(){return si},_removeServiceInstance:function(){return li},deleteApp:function(){return ki},getApp:function(){return yi},getApps:function(){return gi},initializeApp:function(){return mi},onLog:function(){return xi},registerVersion:function(){return wi},setLogLevel:function(){return _i}});var t=n(791),r=n.t(t,2),i=n(250);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(N){l=function(e,t,n){return e[t]=n}}function f(e,t,n,i){var a=t&&t.prototype instanceof p?t:p,o=Object.create(a.prototype),u=new T(i||[]);return r(o,"_invoke",{value:_(e,n,u)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=f;var d={};function p(){}function v(){}function m(){}var y={};l(y,u,(function(){return this}));var g=Object.getPrototypeOf,k=g&&g(g(C([])));k&&k!==t&&n.call(k,u)&&(y=k);var b=m.prototype=p.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function i(r,o,u,s){var c=h(e[r],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==a(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,u,s)}),(function(e){i("throw",e,u,s)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,s)}))}s(c.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=h(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function C(e){if(e||""===e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}throw new TypeError(a(e)+" is not iterable")}return v.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:v,configurable:!0}),v.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(x.prototype),l(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(f(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(b),l(b,c,"Generator"),l(b,u,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function u(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){u(a,r,i,o,s,"next",e)}function s(e){u(a,r,i,o,s,"throw",e)}o(void 0)}))}}function c(e){if(Array.isArray(e))return e}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){return c(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||f(e,t)||h()}var p={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},v=t.createContext&&t.createContext(p),m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},m.apply(this,arguments)},y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function g(e){return e&&e.map((function(e,n){return t.createElement(e.tag,m({key:n},e.attr),g(e.child))}))}function k(e){return function(n){return t.createElement(b,m({attr:m({},e.attr)},n),g(e.child))}}function b(e){var n=function(n){var r,i=e.attr,a=e.size,o=e.title,u=y(e,["attr","size","title"]),s=a||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",m({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,u,{className:r,style:m(m({color:e.color||n.color},n.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&t.createElement("title",null,o),e.children)};return void 0!==v?t.createElement(v.Consumer,null,(function(e){return n(e)})):n(p)}function w(e){return k({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"}}]})(e)}function x(e){return k({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"}}]})(e)}function _(e){return k({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"}}]})(e)}function E(e){return k({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"}}]})(e)}function I(e){return k({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}}]})(e)}function S(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}function T(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function P(e,t){if(null==e)return{};var n,r,i=A(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var O=n(694),R=n.n(O),D=n(184),L=["xxl","xl","lg","md","sm","xs"],M=t.createContext({prefixes:{},breakpoints:L,minBreakpoint:"xs"});M.Consumer,M.Provider;function F(e,n){var r=(0,t.useContext)(M).prefixes;return e||r[n]||n}function j(){return"rtl"===(0,t.useContext)(M).dir}var U=["bsPrefix","fluid","as","className"],V=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.fluid,i=void 0!==r&&r,a=e.as,o=void 0===a?"div":a,u=e.className,s=P(e,U),c=F(n,"container"),l="string"===typeof i?"-".concat(i):"-fluid";return(0,D.jsx)(o,N(N({ref:t},s),{},{className:R()(u,i?"".concat(c).concat(l):c)}))}));V.displayName="Container";var z=V,B=/-(.)/g;var q=["className","bsPrefix","as"],K=function(e){return e[0].toUpperCase()+(t=e,t.replace(B,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function W(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.displayName,i=void 0===r?K(e):r,a=n.Component,o=n.defaultProps,u=t.forwardRef((function(t,n){var r=t.className,i=t.bsPrefix,u=t.as,s=void 0===u?a||"div":u,c=P(t,q),l=N(N({},o),c),f=F(i,e);return(0,D.jsx)(s,N({ref:n,className:R()(r,f)},l))}));return u.displayName=i,u}var G=function(e){return t.forwardRef((function(t,n){return(0,D.jsx)("div",N(N({},t),{},{ref:n,className:R()(t.className,e)}))}))},H=["bsPrefix","className","variant","as"],Q=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.variant,a=e.as,o=void 0===a?"img":a,u=P(e,H),s=F(n,"card-img");return(0,D.jsx)(o,N({ref:t,className:R()(i?"".concat(s,"-").concat(i):s,r)},u))}));Q.displayName="CardImg";var Y=Q,$=t.createContext(null);$.displayName="CardHeaderContext";var J=$,X=["bsPrefix","className","as"],Z=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.as,o=void 0===a?"div":a,u=P(e,X),s=F(r,"card-header"),c=(0,t.useMemo)((function(){return{cardHeaderBsPrefix:s}}),[s]);return(0,D.jsx)(J.Provider,{value:c,children:(0,D.jsx)(o,N(N({ref:n},u),{},{className:R()(i,s)}))})}));Z.displayName="CardHeader";var ee=Z,te=["bsPrefix","className","bg","text","border","body","children","as"],ne=G("h5"),re=G("h6"),ie=W("card-body"),ae=W("card-title",{Component:ne}),oe=W("card-subtitle",{Component:re}),ue=W("card-link",{Component:"a"}),se=W("card-text",{Component:"p"}),ce=W("card-footer"),le=W("card-img-overlay"),fe=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.bg,a=e.text,o=e.border,u=e.body,s=void 0!==u&&u,c=e.children,l=e.as,f=void 0===l?"div":l,h=P(e,te),d=F(n,"card");return(0,D.jsx)(f,N(N({ref:t},h),{},{className:R()(r,d,i&&"bg-".concat(i),a&&"text-".concat(a),o&&"border-".concat(o)),children:s?(0,D.jsx)(ie,{children:c}):c}))}));fe.displayName="Card";var he=Object.assign(fe,{Img:Y,Title:ae,Subtitle:oe,Body:ie,Link:ue,Text:se,Header:ee,Footer:ce,ImgOverlay:le});function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},de.apply(this,arguments)}n(176);function pe(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function ve(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function me(e,n){return Object.keys(n).reduce((function(r,i){var a,o=r,u=o[pe(i)],s=o[i],c=A(o,[pe(i),i].map(ve)),l=n[i],f=function(e,n,r){var i=(0,t.useRef)(void 0!==e),a=(0,t.useState)(n),o=a[0],u=a[1],s=void 0!==e,c=i.current;return i.current=s,!s&&c&&o!==n&&u(n),[s?e:o,(0,t.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r&&r.apply(void 0,[e].concat(n)),u(e)}),[r])]}(s,u,e[l]),h=f[0],d=f[1];return de({},c,((a={})[i]=h,a[l]=d,a))}),e)}function ye(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function ge(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function ke(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}ye.__suppressDeprecationWarning=!0,ge.__suppressDeprecationWarning=!0,ke.__suppressDeprecationWarning=!0;var be=function(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e}),[e]),n};function we(e){var n=be(e);return(0,t.useCallback)((function(){return n.current&&n.current.apply(n,arguments)}),[n])}function xe(){return(0,t.useState)(null)}function _e(){var e=(0,t.useRef)(!0),n=(0,t.useRef)((function(){return e.current}));return(0,t.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),n.current}function Ee(e){var n=(0,t.useRef)(null);return(0,t.useEffect)((function(){n.current=e})),n.current}var Ie="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,Se="undefined"!==typeof document||Ie?t.useLayoutEffect:t.useEffect;new WeakMap;var Te=["as","disabled"];function Ce(e){var t=e.tagName,n=e.disabled,r=e.href,i=e.target,a=e.rel,o=e.role,u=e.onClick,s=e.tabIndex,c=void 0===s?0:s,l=e.type;t||(t=null!=r||null!=i||null!=a?"a":"button");var f={tagName:t};if("button"===t)return[{type:l||"button",disabled:n},f];var h=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==u||u(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:n?void 0:c,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?a:void 0,onClick:h,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),h(e))}},f]}var Ne=t.forwardRef((function(e,t){var n=e.as,r=e.disabled,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Te),a=d(Ce(Object.assign({tagName:n,disabled:r},i)),2),o=a[0],u=a[1].tagName;return(0,D.jsx)(u,Object.assign({},i,o,{ref:t}))}));Ne.displayName="Button";var Ae=Ne,Pe=["onKeyDown"];var Oe=t.forwardRef((function(e,t){var n,r=e.onKeyDown,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Pe),a=d(Ce(Object.assign({tagName:"a"},i)),1)[0],o=we((function(e){a.onKeyDown(e),null==r||r(e)}));return(n=i.href)&&"#"!==n.trim()&&"button"!==i.role?(0,D.jsx)("a",Object.assign({ref:t},i,{onKeyDown:r})):(0,D.jsx)("a",Object.assign({ref:t},i,a,{onKeyDown:o}))}));Oe.displayName="Anchor";var Re=Oe;function De(e,t){return De=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},De(e,t)}var Le=n(164),Me=!1,Fe=t.createContext(null),je="unmounted",Ue="exited",Ve="entering",ze="entered",Be="exiting",qe=function(e){var n,r;function i(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=Ue,r.appearStatus=Ve):i=ze:i=t.unmountOnExit||t.mountOnEnter?je:Ue,r.state={status:i},r.nextCallback=null,r}r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,De(n,r),i.getDerivedStateFromProps=function(e,t){return e.in&&t.status===je?{status:Ue}:null};var a=i.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Ve&&n!==ze&&(t=Ve):n!==Ve&&n!==ze||(t=Be)}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},a.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Ve){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:Le.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ue&&this.setState({status:je})},a.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[Le.findDOMNode(this),r],a=i[0],o=i[1],u=this.getTimeouts(),s=r?u.appear:u.enter;!e&&!n||Me?this.safeSetState({status:ze},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,o),this.safeSetState({status:Ve},(function(){t.props.onEntering(a,o),t.onTransitionEnd(s,(function(){t.safeSetState({status:ze},(function(){t.props.onEntered(a,o)}))}))})))},a.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:Le.findDOMNode(this);t&&!Me?(this.props.onExit(r),this.safeSetState({status:Be},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Ue},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Ue},(function(){e.props.onExited(r)}))},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Le.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],o=i[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},a.render=function(){var e=this.state.status;if(e===je)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,A(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(Fe.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},i}(t.Component);function Ke(){}qe.contextType=Fe,qe.propTypes={},qe.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ke,onEntering:Ke,onEntered:Ke,onExit:Ke,onExiting:Ke,onExited:Ke},qe.UNMOUNTED=je,qe.EXITED=Ue,qe.ENTERING=Ve,qe.ENTERED=ze,qe.EXITING=Be;var We=qe;function Ge(e){return e&&e.ownerDocument||document}function He(e,t){return function(e){var t=Ge(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var Qe=/([A-Z])/g;var Ye=/^ms-/;function $e(e){return function(e){return e.replace(Qe,"-$1").toLowerCase()}(e).replace(Ye,"-ms-")}var Je=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var Xe=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue($e(t))||He(e).getPropertyValue($e(t));Object.keys(t).forEach((function(i){var a=t[i];a||0===a?!function(e){return!(!e||!Je.test(e))}(i)?n+=$e(i)+": "+a+";":r+=i+"("+a+") ":e.style.removeProperty($e(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n},Ze=!("undefined"===typeof window||!window.document||!window.document.createElement),et=!1,tt=!1;try{var nt={get passive(){return et=!0},get once(){return tt=et=!0}};Ze&&(window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,!0))}catch(KM){}var rt=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!tt){var i=r.once,a=r.capture,o=n;!tt&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,a),n.call(this,r)},n.__once=o),e.addEventListener(t,o,et?r:a)}e.addEventListener(t,n,r)};var it=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};var at=function(e,t,n,r){return rt(e,t,n,r),function(){it(e,t,n,r)}};function ot(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),a=at(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),a()}}function ut(e,t,n,r){null==n&&(n=function(e){var t=Xe(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=ot(e,n,r),a=at(e,"transitionend",t);return function(){i(),a()}}function st(e,t){var n=Xe(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function ct(e,t){var n=st(e,"transitionDuration"),r=st(e,"transitionDelay"),i=ut(e,(function(n){n.target===e&&(i(),t(n))}),n+r)}function lt(e){e.offsetHeight}var ft=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var ht=function(e,n){return(0,t.useMemo)((function(){return function(e,t){var n=ft(e),r=ft(t);return function(e){n&&n(e),r&&r(e)}}(e,n)}),[e,n])};var dt,pt=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],vt=t.forwardRef((function(e,n){var r=e.onEnter,i=e.onEntering,a=e.onEntered,o=e.onExit,u=e.onExiting,s=e.onExited,c=e.addEndListener,l=e.children,f=e.childRef,h=P(e,pt),d=(0,t.useRef)(null),p=ht(d,f),v=function(e){var t;p((t=e)&&"setState"in t?Le.findDOMNode(t):null!=t?t:null)},m=function(e){return function(t){e&&d.current&&e(d.current,t)}},y=(0,t.useCallback)(m(r),[r]),g=(0,t.useCallback)(m(i),[i]),k=(0,t.useCallback)(m(a),[a]),b=(0,t.useCallback)(m(o),[o]),w=(0,t.useCallback)(m(u),[u]),x=(0,t.useCallback)(m(s),[s]),_=(0,t.useCallback)(m(c),[c]);return(0,D.jsx)(We,N(N({ref:n},h),{},{onEnter:y,onEntered:k,onEntering:g,onExit:b,onExited:x,onExiting:w,addEndListener:_,nodeRef:d,children:"function"===typeof l?function(e,t){return l(e,N(N({},t),{},{ref:v}))}:t.cloneElement(l,{ref:v})}))})),mt=vt,yt=["className","children","transitionClasses","onEnter"],gt=(T(dt={},Ve,"show"),T(dt,ze,"show"),dt),kt=t.forwardRef((function(e,n){var r=e.className,i=e.children,a=e.transitionClasses,o=void 0===a?{}:a,u=e.onEnter,s=N({in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},P(e,yt)),c=(0,t.useCallback)((function(e,t){lt(e),null==u||u(e,t)}),[u]);return(0,D.jsx)(mt,N(N({ref:n,addEndListener:ct},s),{},{onEnter:c,childRef:i.ref,children:function(e,n){return t.cloneElement(i,N(N({},n),{},{className:R()("fade",r,i.props.className,gt[e],o[e])}))}}))}));kt.displayName="Fade";var bt=kt,wt=n(7),xt=n.n(wt),_t=["className","variant","aria-label"],Et={"aria-label":xt().string,onClick:xt().func,variant:xt().oneOf(["white"])},It=t.forwardRef((function(e,t){var n=e.className,r=e.variant,i=e["aria-label"],a=void 0===i?"Close":i,o=P(e,_t);return(0,D.jsx)("button",N({ref:t,type:"button",className:R()("btn-close",r&&"btn-close-".concat(r),n),"aria-label":a},o))}));It.displayName="CloseButton",It.propTypes=Et;var St=It,Tt=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],Ct=G("h4");Ct.displayName="DivStyledAsH4";var Nt=W("alert-heading",{Component:Ct}),At=W("alert-link",{Component:Re}),Pt=t.forwardRef((function(e,t){var n=me(e,{show:"onClose"}),r=n.bsPrefix,i=n.show,a=void 0===i||i,o=n.closeLabel,u=void 0===o?"Close alert":o,s=n.closeVariant,c=n.className,l=n.children,f=n.variant,h=void 0===f?"primary":f,d=n.onClose,p=n.dismissible,v=n.transition,m=void 0===v?bt:v,y=P(n,Tt),g=F(r,"alert"),k=we((function(e){d&&d(!1,e)})),b=!0===m?bt:m,w=(0,D.jsxs)("div",N(N({role:"alert"},b?void 0:y),{},{ref:t,className:R()(c,g,h&&"".concat(g,"-").concat(h),p&&"".concat(g,"-dismissible")),children:[p&&(0,D.jsx)(St,{onClick:k,"aria-label":u,variant:s}),l]}));return b?(0,D.jsx)(b,N(N({unmountOnExit:!0},y),{},{ref:void 0,in:a,children:w})):a?w:null}));Pt.displayName="Alert";var Ot=Object.assign(Pt,{Link:At,Heading:Nt}),Rt=["as","className","type","tooltip"],Dt={type:xt().string,tooltip:xt().bool,as:xt().elementType},Lt=t.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,i=e.className,a=e.type,o=void 0===a?"valid":a,u=e.tooltip,s=void 0!==u&&u,c=P(e,Rt);return(0,D.jsx)(r,N(N({},c),{},{ref:t,className:R()(i,"".concat(o,"-").concat(s?"tooltip":"feedback"))}))}));Lt.displayName="Feedback",Lt.propTypes=Dt;var Mt=Lt,Ft=t.createContext({}),jt=["id","bsPrefix","className","type","isValid","isInvalid","as"],Ut=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.className,o=e.type,u=void 0===o?"checkbox":o,s=e.isValid,c=void 0!==s&&s,l=e.isInvalid,f=void 0!==l&&l,h=e.as,d=void 0===h?"input":h,p=P(e,jt),v=(0,t.useContext)(Ft).controlId;return i=F(i,"form-check-input"),(0,D.jsx)(d,N(N({},p),{},{ref:n,type:u,id:r||v,className:R()(a,i,c&&"is-valid",f&&"is-invalid")}))}));Ut.displayName="FormCheckInput";var Vt=Ut,zt=["bsPrefix","className","htmlFor"],Bt=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.htmlFor,o=P(e,zt),u=(0,t.useContext)(Ft).controlId;return r=F(r,"form-check-label"),(0,D.jsx)("label",N(N({},o),{},{ref:n,htmlFor:a||u,className:R()(i,r)}))}));Bt.displayName="FormCheckLabel";var qt=Bt;var Kt=["id","bsPrefix","bsSwitchPrefix","inline","reverse","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],Wt=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.bsSwitchPrefix,o=e.inline,u=void 0!==o&&o,s=e.reverse,c=void 0!==s&&s,l=e.disabled,f=void 0!==l&&l,h=e.isValid,d=void 0!==h&&h,p=e.isInvalid,v=void 0!==p&&p,m=e.feedbackTooltip,y=void 0!==m&&m,g=e.feedback,k=e.feedbackType,b=e.className,w=e.style,x=e.title,_=void 0===x?"":x,E=e.type,I=void 0===E?"checkbox":E,S=e.label,T=e.children,C=e.as,A=void 0===C?"input":C,O=P(e,Kt);i=F(i,"form-check"),a=F(a,"form-switch");var L=(0,t.useContext)(Ft).controlId,M=(0,t.useMemo)((function(){return{controlId:r||L}}),[L,r]),j=!T&&null!=S&&!1!==S||function(e,n){return t.Children.toArray(e).some((function(e){return t.isValidElement(e)&&e.type===n}))}(T,qt),U=(0,D.jsx)(Vt,N(N({},O),{},{type:"switch"===I?"checkbox":I,ref:n,isValid:d,isInvalid:v,disabled:f,as:A}));return(0,D.jsx)(Ft.Provider,{value:M,children:(0,D.jsx)("div",{style:w,className:R()(b,j&&i,u&&"".concat(i,"-inline"),c&&"".concat(i,"-reverse"),"switch"===I&&a),children:T||(0,D.jsxs)(D.Fragment,{children:[U,j&&(0,D.jsx)(qt,{title:_,children:S}),g&&(0,D.jsx)(Mt,{type:k,tooltip:y,children:g})]})})})}));Wt.displayName="FormCheck";var Gt=Object.assign(Wt,{Input:Vt,Label:qt}),Ht=n(391),Qt=n.n(Ht),Yt=["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"],$t=t.forwardRef((function(e,n){var r,i,a=e.bsPrefix,o=e.type,u=e.size,s=e.htmlSize,c=e.id,l=e.className,f=e.isValid,h=void 0!==f&&f,d=e.isInvalid,p=void 0!==d&&d,v=e.plaintext,m=e.readOnly,y=e.as,g=void 0===y?"input":y,k=P(e,Yt),b=(0,t.useContext)(Ft).controlId;(a=F(a,"form-control"),v)?r=T({},"".concat(a,"-plaintext"),!0):(T(i={},a,!0),T(i,"".concat(a,"-").concat(u),u),r=i);return(0,D.jsx)(g,N(N({},k),{},{type:o,size:s,ref:n,readOnly:m,id:c||b,className:R()(l,r,h&&"is-valid",p&&"is-invalid","color"===o&&"".concat(a,"-color"))}))}));$t.displayName="FormControl";var Jt=Object.assign($t,{Feedback:Mt}),Xt=W("form-floating"),Zt=["controlId","as"],en=t.forwardRef((function(e,n){var r=e.controlId,i=e.as,a=void 0===i?"div":i,o=P(e,Zt),u=(0,t.useMemo)((function(){return{controlId:r}}),[r]);return(0,D.jsx)(Ft.Provider,{value:u,children:(0,D.jsx)(a,N(N({},o),{},{ref:n}))})}));en.displayName="FormGroup";var tn=en,nn=["as","bsPrefix","className"],rn=["className"];function an(e){var n=e.as,r=e.bsPrefix,i=e.className,a=P(e,nn);r=F(r,"col");var o=(0,t.useContext)(M).breakpoints,u=(0,t.useContext)(M).minBreakpoint,s=[],c=[];return o.forEach((function(e){var t,n,i,o=a[e];delete a[e],"object"===typeof o&&null!=o?(t=o.span,n=o.offset,i=o.order):t=o;var l=e!==u?"-".concat(e):"";t&&s.push(!0===t?"".concat(r).concat(l):"".concat(r).concat(l,"-").concat(t)),null!=i&&c.push("order".concat(l,"-").concat(i)),null!=n&&c.push("offset".concat(l,"-").concat(n))})),[N(N({},a),{},{className:R().apply(void 0,[i].concat(s,c))}),{as:n,bsPrefix:r,spans:s}]}var on=t.forwardRef((function(e,t){var n=d(an(e),2),r=n[0],i=r.className,a=P(r,rn),o=n[1],u=o.as,s=void 0===u?"div":u,c=o.bsPrefix,l=o.spans;return(0,D.jsx)(s,N(N({},a),{},{ref:t,className:R()(i,!l.length&&c)}))}));on.displayName="Col";var un=on,sn=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],cn=t.forwardRef((function(e,n){var r=e.as,i=void 0===r?"label":r,a=e.bsPrefix,o=e.column,u=void 0!==o&&o,s=e.visuallyHidden,c=void 0!==s&&s,l=e.className,f=e.htmlFor,h=P(e,sn),d=(0,t.useContext)(Ft).controlId;a=F(a,"form-label");var p="col-form-label";"string"===typeof u&&(p="".concat(p," ").concat(p,"-").concat(u));var v=R()(l,a,c&&"visually-hidden",u&&p);return f=f||d,u?(0,D.jsx)(un,N({ref:n,as:"label",className:v,htmlFor:f},h)):(0,D.jsx)(i,N({ref:n,className:v,htmlFor:f},h))}));cn.displayName="FormLabel";var ln=cn,fn=["bsPrefix","className","id"],hn=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.id,o=P(e,fn),u=(0,t.useContext)(Ft).controlId;return r=F(r,"form-range"),(0,D.jsx)("input",N(N({},o),{},{type:"range",ref:n,className:R()(i,r),id:a||u}))}));hn.displayName="FormRange";var dn=hn,pn=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],vn=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.size,a=e.htmlSize,o=e.className,u=e.isValid,s=void 0!==u&&u,c=e.isInvalid,l=void 0!==c&&c,f=e.id,h=P(e,pn),d=(0,t.useContext)(Ft).controlId;return r=F(r,"form-select"),(0,D.jsx)("select",N(N({},h),{},{size:a,ref:n,className:R()(o,r,i&&"".concat(r,"-").concat(i),s&&"is-valid",l&&"is-invalid"),id:f||d}))}));vn.displayName="FormSelect";var mn=vn,yn=["bsPrefix","className","as","muted"],gn=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?"small":i,o=e.muted,u=P(e,yn);return n=F(n,"form-text"),(0,D.jsx)(a,N(N({},u),{},{ref:t,className:R()(r,n,o&&"text-muted")}))}));gn.displayName="FormText";var kn=gn,bn=t.forwardRef((function(e,t){return(0,D.jsx)(Gt,N(N({},e),{},{ref:t,type:"switch"}))}));bn.displayName="Switch";var wn=Object.assign(bn,{Input:Gt.Input,Label:Gt.Label}),xn=["bsPrefix","className","children","controlId","label"],_n=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.children,a=e.controlId,o=e.label,u=P(e,xn);return n=F(n,"form-floating"),(0,D.jsxs)(tn,N(N({ref:t,className:R()(r,n),controlId:a},u),{},{children:[i,(0,D.jsx)("label",{htmlFor:a,children:o})]}))}));_n.displayName="FloatingLabel";var En=_n,In=["className","validated","as"],Sn={_ref:xt().any,validated:xt().bool,as:xt().elementType},Tn=t.forwardRef((function(e,t){var n=e.className,r=e.validated,i=e.as,a=void 0===i?"form":i,o=P(e,In);return(0,D.jsx)(a,N(N({},o),{},{ref:t,className:R()(n,r&&"was-validated")}))}));Tn.displayName="Form",Tn.propTypes=Sn;var Cn=Object.assign(Tn,{Group:tn,Control:Jt,Floating:Xt,Check:Gt,Switch:wn,Label:ln,Text:kn,Range:dn,Select:mn,FloatingLabel:En}),Nn=["as","bsPrefix","variant","size","active","disabled","className"],An=t.forwardRef((function(e,t){var n=e.as,r=e.bsPrefix,i=e.variant,a=void 0===i?"primary":i,o=e.size,u=e.active,s=void 0!==u&&u,c=e.disabled,l=void 0!==c&&c,f=e.className,h=P(e,Nn),p=F(r,"btn"),v=d(Ce(N({tagName:n,disabled:l},h)),2),m=v[0],y=v[1].tagName;return(0,D.jsx)(y,N(N(N({},m),h),{},{ref:t,disabled:l,className:R()(f,p,s&&"active",a&&"".concat(p,"-").concat(a),o&&"".concat(p,"-").concat(o),h.href&&l&&"disabled")}))}));An.displayName="Button";var Pn=An;function On(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function Dn(e,t,n){return t&&Rn(e.prototype,t),n&&Rn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ln(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=f(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Mn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&De(e,t)}function jn(e){return jn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jn(e)}function Un(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(KM){return!1}}function Vn(e){var t=Un();return function(){var n,r=jn(e);if(t){var i=jn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Mn(e)}(this,n)}}function zn(e,t,n){return zn=Un()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&De(i,n.prototype),i},zn.apply(null,arguments)}function Bn(e){var t="function"===typeof Map?new Map:void 0;return Bn=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return zn(e,arguments,jn(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),De(r,e)},Bn(e)}var qn=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Kn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(qn(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new Wn;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Wn=function(e){Fn(n,e);var t=Vn(n);function n(){var e;return On(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return Dn(n)}(Bn(Error)),Gn=function(e){return function(e){var t=qn(e);return Kn.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Hn=function(e){try{return Kn.decodeString(e,!0)}catch(KM){console.error("base64Decode failed: ",KM)}return null};function Qn(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Qn(e[n],t[n]));return e}var Yn=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},$n=function(){try{return Yn()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/keymate",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyCYKdCOGyJlFox9USViM1j-DZhl2WBAw5I",REACT_APP_FIREBASE_APP_ID:"1:258275383022:web:3e032ec110250fdec385ff",REACT_APP_FIREBASE_AUTH_DOMAIN:"keymate-827d7.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://keymate-827d7-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"258275383022",REACT_APP_FIREBASE_PROJECT_ID:"keymate-827d7",REACT_APP_FIREBASE_STORAGE_BUCKET:"keymate-827d7.appspot.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(KM){return}var t=e&&Hn(e[1]);return t&&JSON.parse(t)}}()}catch(KM){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(KM))}},Jn=function(){var e;return null===(e=$n())||void 0===e?void 0:e.config},Xn=function(){function e(){var t=this;On(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Dn(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Zn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function er(){var e,t=null===(e=$n())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(KM){return!1}}function tr(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function nr(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function rr(){var e=Zn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ir(){try{return"object"===typeof indexedDB}catch(KM){return!1}}var ar=function(e){Fn(n,e);var t=Vn(n);function n(e,r,i){var a;return On(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Mn(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Mn(a),or.prototype.create),a}return Dn(n)}(Bn(Error)),or=function(){function e(t,n,r){On(this,e),this.service=t,this.serviceName=n,this.errors=r}return Dn(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ur,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new ar(n,a,t)}}]),e}();var ur=/\{\$([^}]+)}/g;function sr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function cr(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function lr(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(fr(u)&&fr(s)){if(!lr(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function fr(e){return null!==e&&"object"===typeof e}function hr(e){for(var t=[],n=function(){var e=d(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function dr(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=d(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function pr(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function vr(e,t){var n=new mr(e,t);return n.subscribe.bind(n)}var mr=function(){function e(t,n){var r=this;On(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Dn(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Ln(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=yr),void 0===r.error&&(r.error=yr),void 0===r.complete&&(r.complete=yr);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(KM){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(KM){"undefined"!==typeof console&&console.error&&console.error(KM)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function yr(){}function gr(e){return e&&e._delegate?e._delegate:e}function kr(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function br(e){return function(e){if(Array.isArray(e))return l(e)}(e)||kr(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var wr=function(){function e(t,n,r){On(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Dn(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),xr="[DEFAULT]",_r=function(){function e(t,n){On(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Dn(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Xn;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(KM){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(KM){if(r)return null;throw KM}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:xr})}catch(KM){}var t,n=Ln(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=d(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(KM){}}}catch(s){n.e(s)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(br(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),br(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Ln(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=d(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Ln(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===xr?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr;return this.component?this.component.multipleInstances?e:xr:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Er,Ir,Sr=function(){function e(t){On(this,e),this.name=t,this.providers=new Map}return Dn(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new _r(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Tr=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ir||(Ir={}));var Cr={debug:Ir.DEBUG,verbose:Ir.VERBOSE,info:Ir.INFO,warn:Ir.WARN,error:Ir.ERROR,silent:Ir.SILENT},Nr=Ir.INFO,Ar=(T(Er={},Ir.DEBUG,"log"),T(Er,Ir.VERBOSE,"log"),T(Er,Ir.INFO,"info"),T(Er,Ir.WARN,"warn"),T(Er,Ir.ERROR,"error"),Er),Pr=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Ar[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Or=function(){function e(t){On(this,e),this.name=t,this._logLevel=Nr,this._logHandler=Pr,this._userLogHandler=null,Tr.push(this)}return Dn(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ir))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Cr[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ir.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ir.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ir.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ir.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ir.INFO].concat(t)),this._logHandler.apply(this,[this,Ir.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ir.WARN].concat(t)),this._logHandler.apply(this,[this,Ir.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ir.ERROR].concat(t)),this._logHandler.apply(this,[this,Ir.ERROR].concat(t))}}]),e}();var Rr,Dr,Lr=function(e,t){return t.some((function(t){return e instanceof t}))};var Mr=new WeakMap,Fr=new WeakMap,jr=new WeakMap,Ur=new WeakMap,Vr=new WeakMap;var zr={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Fr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||jr.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kr(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Br(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Dr||(Dr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Wr(this),n),Kr(Mr.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Kr(e.apply(Wr(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Wr(this),t].concat(r));return jr.set(a,t.sort?t.sort():[t]),Kr(a)}}function qr(e){return"function"===typeof e?Br(e):(e instanceof IDBTransaction&&function(e){if(!Fr.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Fr.set(e,t)}}(e),Lr(e,Rr||(Rr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,zr):e)}function Kr(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Kr(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Mr.set(t,e)})).catch((function(){})),Vr.set(t,e),t}(e);if(Ur.has(e))return Ur.get(e);var t=qr(e);return t!==e&&(Ur.set(e,t),Vr.set(t,e)),t}var Wr=function(e){return Vr.get(e)};var Gr,Hr,Qr=["get","getKey","getAll","getAllKeys","count"],Yr=["put","add","delete","clear"],$r=new Map;function Jr(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if($r.get(t))return $r.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Yr.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Qr.includes(n))){var a=function(){var e=s(o().mark((function e(t){var a,u,s,c,l,f,h=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u=this.transaction(t,i?"readwrite":"readonly"),s=u.store,c=h.length,l=new Array(c>1?c-1:0),f=1;f<c;f++)l[f-1]=h[f];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,l),i&&u.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return $r.set(t,a),a}}}zr=function(e){return N(N({},e),{},{get:function(t,n,r){return Jr(t,n)||e.get(t,n,r)},has:function(t,n){return!!Jr(t,n)||e.has(t,n)}})}(zr);var Xr=function(){function e(t){On(this,e),this.container=t}return Dn(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Zr="@firebase/app",ei="0.9.16",ti=new Or("@firebase/app"),ni="[DEFAULT]",ri=(T(Gr={},Zr,"fire-core"),T(Gr,"@firebase/app-compat","fire-core-compat"),T(Gr,"@firebase/analytics","fire-analytics"),T(Gr,"@firebase/analytics-compat","fire-analytics-compat"),T(Gr,"@firebase/app-check","fire-app-check"),T(Gr,"@firebase/app-check-compat","fire-app-check-compat"),T(Gr,"@firebase/auth","fire-auth"),T(Gr,"@firebase/auth-compat","fire-auth-compat"),T(Gr,"@firebase/database","fire-rtdb"),T(Gr,"@firebase/database-compat","fire-rtdb-compat"),T(Gr,"@firebase/functions","fire-fn"),T(Gr,"@firebase/functions-compat","fire-fn-compat"),T(Gr,"@firebase/installations","fire-iid"),T(Gr,"@firebase/installations-compat","fire-iid-compat"),T(Gr,"@firebase/messaging","fire-fcm"),T(Gr,"@firebase/messaging-compat","fire-fcm-compat"),T(Gr,"@firebase/performance","fire-perf"),T(Gr,"@firebase/performance-compat","fire-perf-compat"),T(Gr,"@firebase/remote-config","fire-rc"),T(Gr,"@firebase/remote-config-compat","fire-rc-compat"),T(Gr,"@firebase/storage","fire-gcs"),T(Gr,"@firebase/storage-compat","fire-gcs-compat"),T(Gr,"@firebase/firestore","fire-fst"),T(Gr,"@firebase/firestore-compat","fire-fst-compat"),T(Gr,"fire-js","fire-js"),T(Gr,"firebase","fire-js-all"),Gr),ii=new Map,ai=new Map;function oi(e,t){try{e.container.addComponent(t)}catch(KM){ti.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),KM)}}function ui(e,t){e.container.addOrOverwriteComponent(t)}function si(e){var t=e.name;if(ai.has(t))return ti.debug("There were multiple attempts to register component ".concat(t,".")),!1;ai.set(t,e);var n,r=Ln(ii.values());try{for(r.s();!(n=r.n()).done;){oi(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function ci(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function li(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ni;ci(e,t).clearInstance(n)}function fi(){ai.clear()}var hi=(T(Hr={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),T(Hr,"bad-app-name","Illegal App name: '{$appName}"),T(Hr,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),T(Hr,"app-deleted","Firebase App named '{$appName}' already deleted"),T(Hr,"no-options","Need to provide options, when not being deployed to hosting via source."),T(Hr,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),T(Hr,"invalid-log-argument","First argument to `onLog` must be null or a function."),T(Hr,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),T(Hr,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),T(Hr,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),T(Hr,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Hr),di=new or("app","Firebase",hi),pi=function(){function e(t,n,r){var i=this;On(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wr("app",(function(){return i}),"PUBLIC"))}return Dn(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw di.create("app-deleted",{appName:this._name})}}]),e}(),vi="10.2.0";function mi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:ni,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw di.create("bad-app-name",{appName:String(i)});if(n||(n=Jn()),!n)throw di.create("no-options");var a=ii.get(i);if(a){if(lr(n,a.options)&&lr(r,a.config))return a;throw di.create("duplicate-app",{appName:i})}var o,u=new Sr(i),s=Ln(ai.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new pi(n,r,u);return ii.set(i,l),l}function yi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ni,t=ii.get(e);if(!t&&e===ni&&Jn())return mi();if(!t)throw di.create("no-app",{appName:e});return t}function gi(){return Array.from(ii.values())}function ki(e){return bi.apply(this,arguments)}function bi(){return bi=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!ii.has(n)){e.next=6;break}return ii.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),bi.apply(this,arguments)}function wi(e,t,n){var r,i=null!==(r=ri[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ti.warn(u.join(" "))}si(new wr("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function xi(e,t){if(null!==e&&"function"!==typeof e)throw di.create("invalid-log-argument");!function(e,t){var n,r=Ln(Tr);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Cr[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Ir[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function _i(e){var t;t=e,Tr.forEach((function(e){e.setLogLevel(t)}))}var Ei="firebase-heartbeat-database",Ii=1,Si="firebase-heartbeat-store",Ti=null;function Ci(){return Ti||(Ti=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Kr(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Kr(u.result),e.oldVersion,e.newVersion,Kr(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(Ei,Ii,{upgrade:function(e,t){if(0===t)e.createObjectStore(Si)}}).catch((function(e){throw di.create("idb-open",{originalErrorMessage:e.message})}))),Ti}function Ni(e){return Ai.apply(this,arguments)}function Ai(){return Ai=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ci();case 3:return n=e.sent,e.next=6,n.transaction(Si).objectStore(Si).get(Ri(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof ar?ti.warn(e.t0.message):(i=di.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),ti.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),Ai.apply(this,arguments)}function Pi(e,t){return Oi.apply(this,arguments)}function Oi(){return Oi=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ci();case 3:return r=e.sent,i=r.transaction(Si,"readwrite"),a=i.objectStore(Si),e.next=8,a.put(n,Ri(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof ar?ti.warn(e.t0.message):(u=di.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),ti.warn(u.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Oi.apply(this,arguments)}function Ri(e){return"".concat(e.name,"!").concat(e.options.appId)}var Di=function(){function e(t){var n=this;On(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Ui(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Dn(e,[{key:"triggerHeartbeat",value:function(){var e=s(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Li(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=s(o().mark((function e(){var t,n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Li(),n=Mi(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Gn(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Li(){return(new Date).toISOString().substring(0,10)}function Mi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Ln(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Vi(r)>n)return a.dates.pop(),0}else if(r.push({agent:e.agent,dates:[e.date]}),Vi(r)>n)return r.pop(),0;i=i.slice(1)};for(a.s();!(t=a.n()).done&&0!==o(););}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Fi,ji,Ui=function(){function e(t){On(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Dn(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ir()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Ni(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Pi(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Pi(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(br(r.heartbeats),br(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Vi(e){return Gn(JSON.stringify({version:2,heartbeats:e})).length}Fi="",si(new wr("platform-logger",(function(e){return new Xr(e)}),"PRIVATE")),si(new wr("heartbeat",(function(e){return new Di(e)}),"PRIVATE")),wi(Zr,ei,Fi),wi(Zr,ei,"esm2017"),wi("fire-js","");var zi=function(){function e(t,n){var r=this;On(this,e),this._delegate=t,this.firebase=n,oi(t,new wr("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Dn(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),ki(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ni;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ni;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){oi(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){ui(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Bi=(T(ji={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),T(ji,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ji),qi=new or("app-compat","Firebase",Bi);var Ki=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=mi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(sr(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:wi,setLogLevel:_i,onLog:xi,apps:null,SDK_VERSION:vi,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(si(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw qi.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Qn(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!sr(n,e=e||ni))throw qi.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(zi);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Qn(n,e)},createSubscribe:vr,ErrorFactory:or,deepExtend:Qn}),n}(),Wi=new Or("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Wi.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Gi=self.firebase.SDK_VERSION;Gi&&Gi.indexOf("LITE")>=0&&Wi.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Hi=Ki;!function(e){wi("@firebase/app-compat","0.2.16",e)}();function Qi(e){return c(e)||kr(e)||f(e)||h()}function Yi(){return Yi="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jn(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Yi.apply(this,arguments)}Hi.registerVersion("firebase","10.2.0","app-compat");function $i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var Ji,Xi={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Zi="EMAIL_SIGNIN",ea="PASSWORD_RESET",ta="RECOVER_EMAIL",na="REVERT_SECOND_FACTOR_ADDITION",ra="VERIFY_AND_CHANGE_EMAIL",ia="VERIFY_EMAIL";function aa(e){return void 0!==e&&void 0!==e.getResponse}function oa(e){return void 0!==e&&void 0!==e.enterprise}var ua=Dn((function e(t){if(On(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function sa(){return T({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var ca=function(){var e;return T(e={},"admin-restricted-operation","This operation is restricted to administrators only."),T(e,"argument-error",""),T(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),T(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),T(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),T(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),T(e,"cordova-not-ready","Cordova framework is not ready."),T(e,"cors-unsupported","This browser is not supported."),T(e,"credential-already-in-use","This credential is already associated with a different user account."),T(e,"custom-token-mismatch","The custom token corresponds to a different audience."),T(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),T(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),T(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),T(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),T(e,"email-already-in-use","The email address is already in use by another account."),T(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),T(e,"expired-action-code","The action code has expired."),T(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),T(e,"internal-error","An internal AuthError has occurred."),T(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),T(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),T(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),T(e,"invalid-auth-event","An internal AuthError has occurred."),T(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),T(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),T(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),T(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),T(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),T(e,"invalid-email","The email address is badly formatted."),T(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),T(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),T(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),T(e,"invalid-credential","The supplied auth credential is malformed or has expired."),T(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),T(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),T(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),T(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),T(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),T(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),T(e,"wrong-password","The password is invalid or the user does not have a password."),T(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),T(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),T(e,"invalid-provider-id","The specified provider ID is invalid."),T(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),T(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),T(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),T(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),T(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),T(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),T(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),T(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),T(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),T(e,"missing-continue-uri","A continue URL must be provided in the request."),T(e,"missing-iframe-start","An internal AuthError has occurred."),T(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),T(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),T(e,"missing-password","A non-empty password must be provided"),T(e,"missing-multi-factor-info","No second factor identifier is provided."),T(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),T(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),T(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),T(e,"app-deleted","This instance of FirebaseApp has been deleted."),T(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),T(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),T(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),T(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),T(e,"no-auth-event","An internal AuthError has occurred."),T(e,"no-such-provider","User was not linked to an account with the given provider."),T(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),T(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),T(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),T(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),T(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),T(e,"provider-already-linked","User can only be linked to one identity for the given provider."),T(e,"quota-exceeded","The project's quota for this operation has been exceeded."),T(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),T(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),T(e,"rejected-credential","The request contains malformed or mismatching credentials."),T(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),T(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),T(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),T(e,"timeout","The operation has timed out."),T(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),T(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),T(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),T(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),T(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),T(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),T(e,"unverified-email","The operation requires a verified email."),T(e,"user-cancelled","The user did not grant your application the permissions it requested."),T(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),T(e,"user-disabled","The user account has been disabled by an administrator."),T(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),T(e,"user-signed-out",""),T(e,"weak-password","The password must be 6 characters long or more."),T(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),T(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),T(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),T(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),T(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),T(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),T(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),T(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),T(e,"invalid-req-type","Invalid request parameters."),T(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),T(e,"unsupported-password-policy-schema-version","The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK."),T(e,"password-does-not-meet-requirements","The password does not meet the requirements."),e},la=sa,fa=new or("auth","Firebase",sa()),ha=new Or("@firebase/auth");function da(e){if(ha.logLevel<=Ir.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ha.warn.apply(ha,["Auth (".concat(vi,"): ").concat(e)].concat(n))}}function pa(e){if(ha.logLevel<=Ir.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ha.error.apply(ha,["Auth (".concat(vi,"): ").concat(e)].concat(n))}}function va(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ka.apply(void 0,[e].concat(n))}function ma(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ka.apply(void 0,[e].concat(n))}function ya(e,t,n){var r=Object.assign(Object.assign({},la()),T({},t,n));return new or("auth","Firebase",r).create(t,{appName:e.name})}function ga(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&va(e,"argument-error"),ya(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function ka(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=br(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(br(o)))}return fa.create.apply(fa,[e].concat(n))}function ba(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ka.apply(void 0,[t].concat(r))}}function wa(e){var t="INTERNAL ASSERTION FAILED: "+e;throw pa(t),new Error(t)}function xa(e,t){e||wa(t)}function _a(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ea(){return"http:"===Ia()||"https:"===Ia()}function Ia(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Sa=function(){function e(t,n){On(this,e),this.shortDelay=t,this.longDelay=n,xa(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zn())||nr()}return Dn(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ea()||tr()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Ta(e,t){xa(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Ca=function(){function e(){On(this,e)}return Dn(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void wa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void wa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void wa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Na=(T(Ji={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),T(Ji,"MISSING_CUSTOM_TOKEN","internal-error"),T(Ji,"INVALID_IDENTIFIER","invalid-email"),T(Ji,"MISSING_CONTINUE_URI","internal-error"),T(Ji,"INVALID_PASSWORD","wrong-password"),T(Ji,"MISSING_PASSWORD","missing-password"),T(Ji,"EMAIL_EXISTS","email-already-in-use"),T(Ji,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),T(Ji,"INVALID_IDP_RESPONSE","invalid-credential"),T(Ji,"INVALID_PENDING_TOKEN","invalid-credential"),T(Ji,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),T(Ji,"MISSING_REQ_TYPE","internal-error"),T(Ji,"EMAIL_NOT_FOUND","user-not-found"),T(Ji,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),T(Ji,"EXPIRED_OOB_CODE","expired-action-code"),T(Ji,"INVALID_OOB_CODE","invalid-action-code"),T(Ji,"MISSING_OOB_CODE","internal-error"),T(Ji,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),T(Ji,"INVALID_ID_TOKEN","invalid-user-token"),T(Ji,"TOKEN_EXPIRED","user-token-expired"),T(Ji,"USER_NOT_FOUND","user-token-expired"),T(Ji,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),T(Ji,"PASSWORD_DOES_NOT_MEET_REQUIREMENTS","password-does-not-meet-requirements"),T(Ji,"INVALID_CODE","invalid-verification-code"),T(Ji,"INVALID_SESSION_INFO","invalid-verification-id"),T(Ji,"INVALID_TEMPORARY_PROOF","invalid-credential"),T(Ji,"MISSING_SESSION_INFO","missing-verification-id"),T(Ji,"SESSION_EXPIRED","code-expired"),T(Ji,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),T(Ji,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),T(Ji,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),T(Ji,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),T(Ji,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),T(Ji,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),T(Ji,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),T(Ji,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),T(Ji,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),T(Ji,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),T(Ji,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),T(Ji,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),T(Ji,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),T(Ji,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),T(Ji,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),T(Ji,"MISSING_CLIENT_TYPE","missing-client-type"),T(Ji,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),T(Ji,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),T(Ji,"INVALID_REQ_TYPE","invalid-req-type"),Ji),Aa=new Sa(3e4,6e4);function Pa(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Oa(e,t,n,r){return Ra.apply(this,arguments)}function Ra(){return Ra=s(o().mark((function e(t,n,r,i){var a,u=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.abrupt("return",Da(t,a,s(o().mark((function e(){var a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},u={},i&&("GET"===n?u=i:a={body:JSON.stringify(i)}),s=hr(Object.assign({key:t.config.apiKey},u)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(c=e.sent)["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Ca.fetch()(ja(t,t.config.apiHost,r,s),Object.assign({method:n,headers:c,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Ra.apply(this,arguments)}function Da(e,t,n){return La.apply(this,arguments)}function La(){return La=s(o().mark((function e(t,n,r){var i,a,u,s,c,l,f,h,p,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Na),n),e.prev=2,a=new Ua(t),e.next=6,Promise.race([r(),a.promise]);case 6:return u=e.sent,a.clearNetworkTimeout(),e.next=10,u.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw Va(t,"account-exists-with-different-credential",s);case 13:if(!u.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(c=u.ok?s.errorMessage:s.error.message,l=c.split(" : "),f=d(l,2),h=f[0],p=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Va(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw Va(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw Va(t,"user-disabled",s);case 29:if(v=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!p){e.next=34;break}throw ya(t,v,p);case 34:va(t,v);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof ar)){e.next=41;break}throw e.t0;case 41:va(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),La.apply(this,arguments)}function Ma(e,t,n,r){return Fa.apply(this,arguments)}function Fa(){return Fa=s(o().mark((function e(t,n,r,i){var a,u,s=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Oa(t,n,r,i,a);case 3:return"mfaPendingCredential"in(u=e.sent)&&va(t,"multi-factor-auth-required",{_serverResponse:u}),e.abrupt("return",u);case 6:case"end":return e.stop()}}),e)}))),Fa.apply(this,arguments)}function ja(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Ta(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Ua=function(){function e(t){var n=this;On(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(ma(n.auth,"network-request-failed"))}),Aa.get())}))}return Dn(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Va(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=ma(e,t,r);return i.customData._tokenResponse=n,i}function za(e){return Ba.apply(this,arguments)}function Ba(){return Ba=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oa(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Ba.apply(this,arguments)}function qa(e,t){return Ka.apply(this,arguments)}function Ka(){return Ka=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oa(t,"GET","/v2/recaptchaConfig",Pa(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ka.apply(this,arguments)}function Wa(e,t){return Ga.apply(this,arguments)}function Ga(){return Ga=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oa(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Ga.apply(this,arguments)}function Ha(e,t){return Qa.apply(this,arguments)}function Qa(){return Qa=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Qa.apply(this,arguments)}function Ya(e,t){return $a.apply(this,arguments)}function $a(){return $a=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oa(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),$a.apply(this,arguments)}function Ja(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(KM){}}function Xa(){return Xa=s(o().mark((function e(t){var n,r,i,a,u,s,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],r=gr(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,ba((a=eo(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),u="object"===typeof a.firebase?a.firebase:void 0,s=null===u||void 0===u?void 0:u.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Ja(Za(a.auth_time)),issuedAtTime:Ja(Za(a.iat)),expirationTime:Ja(Za(a.exp)),signInProvider:s||null,signInSecondFactor:(null===u||void 0===u?void 0:u.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Xa.apply(this,arguments)}function Za(e){return 1e3*Number(e)}function eo(e){var t=d(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return pa("JWT malformed, contained fewer than 3 sections"),null;try{var a=Hn(r);return a?JSON.parse(a):(pa("Failed to decode base64 JWT payload"),null)}catch(KM){return pa("Caught error parsing JWT payload as JSON",null===KM||void 0===KM?void 0:KM.toString()),null}}function to(e,t){return no.apply(this,arguments)}function no(){return no=s(o().mark((function e(t,n){var r=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof ar&&ro(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),no.apply(this,arguments)}function ro(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var io=function(){function e(t){On(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Dn(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),ao=function(){function e(t,n){On(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Dn(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Ja(this.lastLoginAt),this.creationTime=Ja(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function oo(e){return uo.apply(this,arguments)}function uo(){return uo=s(o().mark((function e(t){var n,r,i,a,u,s,c,l,f,h,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,to(t,Ya(r,{idToken:i}));case 6:ba(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),u=a.users[0],t._notifyReloadListener(u),s=(null===(n=u.providerUserInfo)||void 0===n?void 0:n.length)?u.providerUserInfo.map((function(e){var t=e.providerId,n=$i(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],c=co(t.providerData,s),l=t.isAnonymous,f=!(t.email&&u.passwordHash)&&!(null===c||void 0===c?void 0:c.length),h=!!l&&f,d={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:c,metadata:new ao(u.createdAt,u.lastLoginAt),isAnonymous:h},Object.assign(t,d);case 17:case"end":return e.stop()}}),e)}))),uo.apply(this,arguments)}function so(){return(so=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gr(t),e.next=3,oo(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function co(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(br(n),br(t))}function lo(e,t){return fo.apply(this,arguments)}function fo(){return fo=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Da(t,{},s(o().mark((function e(){var r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=hr({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,u=i.apiKey,s=ja(t,a,"/v1/token","key=".concat(u)),e.next=5,t._getAdditionalHeaders();case 5:return(c=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Ca.fetch()(s,{method:"POST",headers:c,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),fo.apply(this,arguments)}var ho=function(){function e(){On(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Dn(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){ba(e.idToken,"internal-error"),ba("undefined"!==typeof e.idToken,"internal-error"),ba("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=eo(e);return ba(t,"internal-error"),ba("undefined"!==typeof t.exp,"internal-error"),ba("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=s(o().mark((function e(t){var n,r=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],ba(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lo(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,u=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(u));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return wa("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(ba("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(ba("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(ba("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function po(e,t){ba("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var vo=function(){function e(t){On(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=$i(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new io(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?br(a.providerData):[],this.metadata=new ao(a.createdAt||void 0,a.lastLoginAt||void 0)}return Dn(e,[{key:"getIdToken",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,to(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(ba(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Xa.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return so.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(ba(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){ba(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=s(o().mark((function e(t){var n,r,i=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,oo(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,to(this,Wa(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;ba(k&&_,t,"internal-error");var E=ho.fromJSON(this.name,_);ba("string"===typeof k,t,"internal-error"),po(f,t.name),po(h,t.name),ba("boolean"===typeof b,t,"internal-error"),ba("boolean"===typeof w,t,"internal-error"),po(d,t.name),po(p,t.name),po(v,t.name),po(m,t.name),po(y,t.name),po(g,t.name);var I=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(I.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(I._redirectEventId=m),I}},{key:"_fromIdTokenResponse",value:function(){var t=s(o().mark((function t(n,r){var i,a,u,s=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new ho).updateFromServerResponse(r),u=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,oo(u);case 6:return t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),mo=new Map;function yo(e){xa(e instanceof Function,"Expected a class definition");var t=mo.get(e);return t?(xa(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,mo.set(e,t),t)}var go=function(){function e(){On(this,e),this.type="NONE",this.storage={}}return Dn(e,[{key:"_isAvailable",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();go.type="NONE";var ko=go;function bo(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var wo=function(){function e(t,n,r){On(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=bo(this.userKey,a.apiKey,o),this.fullPersistenceKey=bo("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Dn(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?vo._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=s(o().mark((function t(n,r){var i,a,u,c,l,f,h,d,p,v,m,y=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=y.length>2&&void 0!==y[2]?y[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(yo(ko),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),u=a[0]||yo(ko),c=bo(i,n.config.apiKey,n.name),l=null,f=Ln(r),t.prev=10,f.s();case 12:if((h=f.n()).done){t.next=29;break}return d=h.value,t.prev=14,t.next=17,d._get(c);case 17:if(!(p=t.sent)){t.next=23;break}return v=vo._fromJSON(n,p),d!==u&&(l=v),u=d,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),f.e(t.t1);case 34:return t.prev=34,f.f(),t.finish(34);case 37:if(m=a.filter((function(e){return e._shouldAllowMigration})),u._shouldAllowMigration&&m.length){t.next=40;break}return t.abrupt("return",new e(u,n,i));case 40:if(u=m[0],!l){t.next=44;break}return t.next=44,u._set(c,l.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===u){e.next=8;break}return e.prev=1,e.next=4,t._remove(c);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(u,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function xo(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(So(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(_o(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Co(t))return"Blackberry";if(No(t))return"Webos";if(Eo(t))return"Safari";if((t.includes("chrome/")||Io(t))&&!t.includes("edge/"))return"Chrome";if(To(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function _o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn();return/firefox\//i.test(e)}function Eo(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Io(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn();return/crios\//i.test(e)}function So(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn();return/iemobile/i.test(e)}function To(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn();return/android/i.test(e)}function Co(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn();return/blackberry/i.test(e)}function No(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn();return/webos/i.test(e)}function Ao(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Po(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn();return Ao(e)||To(e)||No(e)||Co(e)||/windows phone/i.test(e)||So(e)}function Oo(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=xo(Zn());break;case"Worker":t="".concat(xo(Zn()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(vi,"/").concat(r)}var Ro=function(){function e(t){On(this,e),this.auth=t,this.queue=[]}return Dn(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(KM){r(KM)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=s(o().mark((function e(t){var n,r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=Ln(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),u=Ln(n);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(o){}}}catch(l){u.e(l)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Do(e){return Lo.apply(this,arguments)}function Lo(){return Lo=s(o().mark((function e(t){var n,r=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Oa(t,"GET","/v2/passwordPolicy",Pa(t,n)));case 2:case"end":return e.stop()}}),e)}))),Lo.apply(this,arguments)}var Mo=function(){function e(t){var n,r,i,a;On(this,e);var o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=o.minPasswordLength)&&void 0!==n?n:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=t.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(a=t.forceUpgradeOnSignin)&&void 0!==a&&a,this.schemaVersion=t.schemaVersion}return Dn(e,[{key:"validatePassword",value:function(e){var t,n,r,i,a,o,u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=null===(t=u.meetsMinPasswordLength)||void 0===t||t),u.isValid&&(u.isValid=null===(n=u.meetsMaxPasswordLength)||void 0===n||n),u.isValid&&(u.isValid=null===(r=u.containsLowercaseLetter)||void 0===r||r),u.isValid&&(u.isValid=null===(i=u.containsUppercaseLetter)||void 0===i||i),u.isValid&&(u.isValid=null===(a=u.containsNumericCharacter)||void 0===a||a),u.isValid&&(u.isValid=null===(o=u.containsNonAlphanumericCharacter)||void 0===o||o),u}},{key:"validatePasswordLengthOptions",value:function(e,t){var n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}},{key:"validatePasswordCharacterOptions",value:function(e,t){var n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(var r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}},{key:"updatePasswordCharacterOptionsStatuses",value:function(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}]),e}(),Fo=function(){function e(t,n,r,i){On(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Uo(this),this.idTokenSubscription=new Uo(this),this.beforeStateQueue=new Ro(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fa,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return Dn(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=yo(t)),this._initializationPromise=this.queue(s(o().mark((function r(){var i,a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,wo.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=s(o().mark((function e(t){var n,r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return u=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:c=e.sent,u&&u!==s||!(null===c||void 0===c?void 0:c.user)||(i=c.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return ba(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oo(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?gr(t):null)&&ba(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=s(o().mark((function e(t){var n,r=this,i=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&ba(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(s(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(yo(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"validatePassword",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._getPasswordPolicyInternal()){e.next=3;break}return e.next=3,this._updatePasswordPolicy();case 3:if((n=this._getPasswordPolicyInternal()).schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION){e.next=6;break}return e.abrupt("return",Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})));case 6:return e.abrupt("return",n.validatePassword(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPasswordPolicyInternal",value:function(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}},{key:"_updatePasswordPolicy",value:function(){var e=s(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Do(this);case 2:t=e.sent,n=new Mo(t),null===this.tenantId?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new or("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"authStateReady",value:function(){var e=this;return new Promise((function(t,n){if(e.currentUser)t();else var r=e.onAuthStateChanged((function(){r(),t()}),n)}))}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return ba(n=t&&yo(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,wo.create(this,[yo(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=s(o().mark((function e(t){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ba(u,this,"internal-error"),u.then((function(){o||a(i.currentUser)})),"function"===typeof t){var s=e.addObserver(t,n,r);return function(){o=!0,s()}}var c=e.addObserver(t);return function(){o=!0,c()}}},{key:"directlySetCurrentUser",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return ba(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Oo(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=s(o().mark((function e(){var t,n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=T({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=s(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&da("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function jo(e){return gr(e)}var Uo=function(){function e(t){var n=this;On(this,e),this.auth=t,this.observer=null,this.addObserver=vr((function(e){return n.observer=e}))}return Dn(e,[{key:"next",get:function(){return ba(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Vo(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=ma("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function zo(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Bo=function(){function e(t){On(this,e),this.type="recaptcha-enterprise",this.auth=jo(t)}return Dn(e,[{key:"verify",value:function(){var e=s(o().mark((function e(){var t,n,r,i,a,u=this,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;oa(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=s(o().mark((function e(n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:qa(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new ua(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=c.length>0&&void 0!==c[0]?c[0]:"verify",n=c.length>1&&void 0!==c[1]&&c[1],e.abrupt("return",new Promise((function(e,t){r(u.auth).then((function(r){if(!n&&oa(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));Vo("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function qo(e,t,n){return Ko.apply(this,arguments)}function Ko(){return Ko=s(o().mark((function e(t,n,r){var i,a,u,s,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.length>3&&void 0!==c[3]&&c[3],a=new Bo(t),e.prev=2,e.next=5,a.verify(r);case 5:u=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:u=e.sent;case 13:return s=Object.assign({},n),i?Object.assign(s,{captchaResp:u}):Object.assign(s,{captchaResponse:u}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),Ko.apply(this,arguments)}function Wo(e,t,n){var r=jo(e);ba(r._canInitEmulator,r,"emulator-config-failed"),ba(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Go(t),o=function(e){var t=Go(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Ho(r.substr(a.length+1))}}var o=d(r.split(":"),2);return{host:o[0],port:Ho(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Go(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ho(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Qo=function(){function e(t,n){On(this,e),this.providerId=t,this.signInMethod=n}return Dn(e,[{key:"toJSON",value:function(){return wa("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return wa("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return wa("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return wa("not implemented")}}]),e}();function Yo(e,t){return $o.apply(this,arguments)}function $o(){return $o=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oa(t,"POST","/v1/accounts:resetPassword",Pa(t,n)));case 1:case"end":return e.stop()}}),e)}))),$o.apply(this,arguments)}function Jo(e,t){return Xo.apply(this,arguments)}function Xo(){return Xo=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Xo.apply(this,arguments)}function Zo(e,t){return eu.apply(this,arguments)}function eu(){return eu=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oa(t,"POST","/v1/accounts:update",Pa(t,n)));case 1:case"end":return e.stop()}}),e)}))),eu.apply(this,arguments)}function tu(e,t){return nu.apply(this,arguments)}function nu(){return nu=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ma(t,"POST","/v1/accounts:signInWithPassword",Pa(t,n)));case 1:case"end":return e.stop()}}),e)}))),nu.apply(this,arguments)}function ru(e,t){return iu.apply(this,arguments)}function iu(){return iu=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oa(t,"POST","/v1/accounts:sendOobCode",Pa(t,n)));case 1:case"end":return e.stop()}}),e)}))),iu.apply(this,arguments)}function au(e,t){return ou.apply(this,arguments)}function ou(){return ou=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ru(t,n));case 1:case"end":return e.stop()}}),e)}))),ou.apply(this,arguments)}function uu(e,t){return su.apply(this,arguments)}function su(){return su=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ru(t,n));case 1:case"end":return e.stop()}}),e)}))),su.apply(this,arguments)}function cu(e,t){return lu.apply(this,arguments)}function lu(){return lu=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ru(t,n));case 1:case"end":return e.stop()}}),e)}))),lu.apply(this,arguments)}function fu(e,t){return hu.apply(this,arguments)}function hu(){return hu=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ru(t,n));case 1:case"end":return e.stop()}}),e)}))),hu.apply(this,arguments)}function du(e,t){return pu.apply(this,arguments)}function pu(){return pu=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ma(t,"POST","/v1/accounts:signInWithEmailLink",Pa(t,n)));case 1:case"end":return e.stop()}}),e)}))),pu.apply(this,arguments)}function vu(e,t){return mu.apply(this,arguments)}function mu(){return mu=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ma(t,"POST","/v1/accounts:signInWithEmailLink",Pa(t,n)));case 1:case"end":return e.stop()}}),e)}))),mu.apply(this,arguments)}var yu=function(e){Fn(n,e);var t=Vn(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return On(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Dn(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,qo(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",tu(t,i));case 11:return e.abrupt("return",tu(t,r).catch(function(){var e=s(o().mark((function e(n){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,qo(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",tu(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",du(t,{email:this._email,oobCode:this._password}));case 13:va(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Jo(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",vu(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:va(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Qo);function gu(e,t){return ku.apply(this,arguments)}function ku(){return ku=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ma(t,"POST","/v1/accounts:signInWithIdp",Pa(t,n)));case 1:case"end":return e.stop()}}),e)}))),ku.apply(this,arguments)}var bu=function(e){Fn(n,e);var t=Vn(n);function n(){var e;return On(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Dn(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return gu(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,gu(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,gu(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=hr(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):va("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=$i(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Qo);function wu(e,t){return xu.apply(this,arguments)}function xu(){return xu=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oa(t,"POST","/v1/accounts:sendVerificationCode",Pa(t,n)));case 1:case"end":return e.stop()}}),e)}))),xu.apply(this,arguments)}function _u(){return _u=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ma(t,"POST","/v1/accounts:signInWithPhoneNumber",Pa(t,n)));case 1:case"end":return e.stop()}}),e)}))),_u.apply(this,arguments)}function Eu(){return Eu=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ma(t,"POST","/v1/accounts:signInWithPhoneNumber",Pa(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Va(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Eu.apply(this,arguments)}var Iu=T({},"USER_NOT_FOUND","user-not-found");function Su(){return Su=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Ma(t,"POST","/v1/accounts:signInWithPhoneNumber",Pa(t,r),Iu));case 2:case"end":return e.stop()}}),e)}))),Su.apply(this,arguments)}var Tu=function(e){Fn(n,e);var t=Vn(n);function n(e){var r;return On(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Dn(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return _u.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Eu.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Su.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Qo);var Cu=function(){function e(t){var n,r,i,a,o,u;On(this,e);var s=dr(pr(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);ba(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Dn(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=dr(pr(e)).link,n=t?dr(pr(t)).deep_link_id:null,r=dr(pr(e)).deep_link_id;return(r?dr(pr(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var Nu=function(){function e(){On(this,e),this.providerId=e.PROVIDER_ID}return Dn(e,null,[{key:"credential",value:function(e,t){return yu._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Cu.parseLink(t);return ba(n,"argument-error"),yu._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Nu.PROVIDER_ID="password",Nu.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Nu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Au=function(){function e(t){On(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Dn(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Pu=function(e){Fn(n,e);var t=Vn(n);function n(){var e;return On(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Dn(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return br(this.scopes)}}]),n}(Au),Ou=function(e){Fn(n,e);var t=Vn(n);function n(){return On(this,n),t.apply(this,arguments)}return Dn(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return ba(e.idToken||e.accessToken,"argument-error"),bu._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return ba("providerId"in t&&"signInMethod"in t,"argument-error"),bu._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(KM){return null}}}]),n}(Pu),Ru=function(e){Fn(n,e);var t=Vn(n);function n(){return On(this,n),t.call(this,"facebook.com")}return Dn(n,null,[{key:"credential",value:function(e){return bu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Pu);Ru.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ru.PROVIDER_ID="facebook.com";var Du=function(e){Fn(n,e);var t=Vn(n);function n(){var e;return On(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Dn(n,null,[{key:"credential",value:function(e,t){return bu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Pu);Du.GOOGLE_SIGN_IN_METHOD="google.com",Du.PROVIDER_ID="google.com";var Lu=function(e){Fn(n,e);var t=Vn(n);function n(){return On(this,n),t.call(this,"github.com")}return Dn(n,null,[{key:"credential",value:function(e){return bu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Pu);Lu.GITHUB_SIGN_IN_METHOD="github.com",Lu.PROVIDER_ID="github.com";var Mu=function(e){Fn(n,e);var t=Vn(n);function n(e,r){var i;return On(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Dn(n,[{key:"_getIdTokenResponse",value:function(e){return gu(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,gu(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,gu(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Qo),Fu=function(e){Fn(n,e);var t=Vn(n);function n(e){return On(this,n),ba(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Dn(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Mu.fromJSON(e);return ba(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Mu._create(r,n)}catch(KM){return null}}}]),n}(Au),ju=function(e){Fn(n,e);var t=Vn(n);function n(){return On(this,n),t.call(this,"twitter.com")}return Dn(n,null,[{key:"credential",value:function(e,t){return bu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Pu);function Uu(e,t){return Vu.apply(this,arguments)}function Vu(){return Vu=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ma(t,"POST","/v1/accounts:signUp",Pa(t,n)));case 1:case"end":return e.stop()}}),e)}))),Vu.apply(this,arguments)}ju.TWITTER_SIGN_IN_METHOD="twitter.com",ju.PROVIDER_ID="twitter.com";var zu=function(){function e(t){On(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Dn(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=s(o().mark((function t(n,r,i){var a,u,s,c,l=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>3&&void 0!==l[3]&&l[3],t.next=3,vo._fromIdTokenResponse(n,i,a);case 3:return u=t.sent,s=Bu(i),c=new e({user:u,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=s(o().mark((function t(n,r,i){var a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Bu(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Bu(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function qu(){return qu=s(o().mark((function e(t){var n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jo(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new zu({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Uu(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,zu._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),qu.apply(this,arguments)}var Ku=function(e){Fn(n,e);var t=Vn(n);function n(e,r,i,a){var o,u;return On(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(Mn(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Dn(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(ar);function Wu(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ku._fromErrorAndOperation(e,n,t,r);throw n}))}function Gu(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Hu(e,t){return Qu.apply(this,arguments)}function Qu(){return Qu=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gr(t),e.next=3,Ju(!0,r,n);case 3:return e.t0=Ha,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,u=Gu(a||[]),r.providerData=r.providerData.filter((function(e){return u.has(e.providerId)})),u.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Qu.apply(this,arguments)}function Yu(e,t){return $u.apply(this,arguments)}function $u(){return $u=s(o().mark((function e(t,n){var r,i,a=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=to,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",zu._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),$u.apply(this,arguments)}function Ju(e,t,n){return Xu.apply(this,arguments)}function Xu(){return(Xu=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oo(n);case 2:i=Gu(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",ba(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zu(e,t){return es.apply(this,arguments)}function es(){return es=s(o().mark((function e(t,n){var r,i,a,u,s,c,l=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,to(t,Wu(i,a,n,t),r);case 6:return ba((u=e.sent).idToken,i,"internal-error"),ba(s=eo(u.idToken),i,"internal-error"),c=s.sub,ba(t.uid===c,i,"user-mismatch"),e.abrupt("return",zu._forOperation(t,a,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&va(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),es.apply(this,arguments)}function ts(e,t){return ns.apply(this,arguments)}function ns(){return ns=s(o().mark((function e(t,n){var r,i,a,u,s=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Wu(t,i,n);case 4:return a=e.sent,e.next=7,zu._fromIdTokenResponse(t,i,a);case 7:if(u=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(u.user);case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)}))),ns.apply(this,arguments)}function rs(e,t){return is.apply(this,arguments)}function is(){return is=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ts(jo(t),n));case 1:case"end":return e.stop()}}),e)}))),is.apply(this,arguments)}function as(e,t){return os.apply(this,arguments)}function os(){return(os=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gr(t),e.next=3,Ju(!1,r,n.providerId);case 3:return e.abrupt("return",Yu(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function us(e,t){return ss.apply(this,arguments)}function ss(){return(ss=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zu(gr(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cs(e,t){return ls.apply(this,arguments)}function ls(){return ls=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ma(t,"POST","/v1/accounts:signInWithCustomToken",Pa(t,n)));case 1:case"end":return e.stop()}}),e)}))),ls.apply(this,arguments)}function fs(){return fs=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jo(t),e.next=3,cs(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,zu._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),fs.apply(this,arguments)}var hs=function(){function e(t,n){On(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Dn(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?ds._fromServerResponse(e,t):"totpInfo"in t?ps._fromServerResponse(e,t):va(e,"internal-error")}}]),e}(),ds=function(e){Fn(n,e);var t=Vn(n);function n(e){var r;return On(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Dn(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(hs),ps=function(e){Fn(n,e);var t=Vn(n);function n(e){return On(this,n),t.call(this,"totp",e)}return Dn(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(hs);function vs(e,t,n){var r;ba((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ba("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ba(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ba(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function ms(e){return ys.apply(this,arguments)}function ys(){return ys=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=jo(t))._getPasswordPolicyInternal()){e.next=4;break}return e.next=4,n._updatePasswordPolicy();case 4:case"end":return e.stop()}}),e)}))),ys.apply(this,arguments)}function gs(){return gs=s(o().mark((function e(t,n,r){var i,a,u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=jo(t),u={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,qo(a,u,"getOobCode",!0);case 5:return c=e.sent,r&&vs(a,c,r),e.next=9,uu(a,c);case 9:e.next=14;break;case 11:return r&&vs(a,u,r),e.next=14,uu(a,u).catch(function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,qo(a,u,"getOobCode",!0);case 4:return n=e.sent,r&&vs(a,n,r),e.next=8,uu(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),gs.apply(this,arguments)}function ks(){return ks=s(o().mark((function e(t,n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yo(gr(t),{oobCode:n,newPassword:r}).catch(function(){var e=s(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&ms(t),n;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),ks.apply(this,arguments)}function bs(){return bs=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zo(gr(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),bs.apply(this,arguments)}function ws(e,t){return xs.apply(this,arguments)}function xs(){return xs=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gr(t),e.next=3,Yo(r,{oobCode:n});case 3:i=e.sent,ba(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return ba(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:ba(i.mfaInfo,r,"internal-error");case 13:ba(i.email,r,"internal-error");case 14:return u=null,i.mfaInfo&&(u=hs._fromServerResponse(jo(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:u},operation:a});case 17:case"end":return e.stop()}}),e)}))),xs.apply(this,arguments)}function _s(){return _s=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ws(gr(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),_s.apply(this,arguments)}function Es(e,t,n){return Is.apply(this,arguments)}function Is(){return Is=s(o().mark((function e(t,n,r){var i,a,u,c,l,f,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=jo(t),u={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,qo(a,u,"signUpPassword");case 5:l=e.sent,c=Uu(a,l),e.next=10;break;case 9:c=Uu(a,u).catch(function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=6;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,qo(a,u,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",Uu(a,n));case 6:throw t;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,c.catch((function(e){throw e.code==="auth/".concat("password-does-not-meet-requirements")&&ms(t),e}));case 12:return f=e.sent,e.next=15,zu._fromIdTokenResponse(a,"signIn",f);case 15:return h=e.sent,e.next=18,a._updateCurrentUser(h.user);case 18:return e.abrupt("return",h);case 19:case"end":return e.stop()}}),e)}))),Is.apply(this,arguments)}function Ss(){return Ss=s(o().mark((function e(t,n,r){var i,a,u,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=function(e,t){ba(t.handleCodeInApp,a,"argument-error"),t&&vs(a,e,t)},a=jo(t),u={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,qo(a,u,"getOobCode",!0);case 6:return l=e.sent,c(l,r),e.next=10,cu(a,l);case 10:e.next=15;break;case 12:return c(u,r),e.next=15,cu(a,u).catch(function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,qo(a,u,"getOobCode",!0);case 4:return n=e.sent,c(n,r),e.next=8,cu(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),Ss.apply(this,arguments)}function Ts(){return Ts=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gr(t),ba((a=Nu.credentialWithLink(n,r||_a()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",rs(i,a));case 4:case"end":return e.stop()}}),e)}))),Ts.apply(this,arguments)}function Cs(e,t){return Ns.apply(this,arguments)}function Ns(){return Ns=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oa(t,"POST","/v1/accounts:createAuthUri",Pa(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ns.apply(this,arguments)}function As(){return As=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ea()?_a():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Cs(gr(t),i);case 4:return a=e.sent,u=a.signinMethods,e.abrupt("return",u||[]);case 7:case"end":return e.stop()}}),e)}))),As.apply(this,arguments)}function Ps(){return(Ps=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gr(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&vs(r.auth,a,n),e.next=8,au(r.auth,a);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Os(){return(Os=s(o().mark((function e(t,n,r){var i,a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gr(t),e.next=3,t.getIdToken();case 3:return a=e.sent,u={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&vs(i.auth,u,r),e.next=8,fu(i.auth,u);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rs(e,t){return Ds.apply(this,arguments)}function Ds(){return Ds=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Ds.apply(this,arguments)}function Ls(){return(Ls=s(o().mark((function e(t,n){var r,i,a,u,s,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=gr(t),e.next=6,a.getIdToken();case 6:return u=e.sent,s={idToken:u,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,to(a,Rs(a.auth,s));case 10:return c=e.sent,a.displayName=c.displayName||null,a.photoURL=c.photoUrl||null,(l=a.providerData.find((function(e){return"password"===e.providerId})))&&(l.displayName=a.displayName,l.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(c);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ms(e,t,n){return Fs.apply(this,arguments)}function Fs(){return Fs=s(o().mark((function e(t,n,r){var i,a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,u={idToken:a,returnSecureToken:!0},n&&(u.email=n),r&&(u.password=r),e.next=9,to(t,Jo(i,u));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),Fs.apply(this,arguments)}var js=Dn((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};On(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Us=function(e){Fn(n,e);var t=Vn(n);function n(e,r,i,a){var o;return On(this,n),(o=t.call(this,e,r,i)).username=a,o}return Dn(n)}(js),Vs=function(e){Fn(n,e);var t=Vn(n);function n(e,r){return On(this,n),t.call(this,e,"facebook.com",r)}return Dn(n)}(js),zs=function(e){Fn(n,e);var t=Vn(n);function n(e,r){return On(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Dn(n)}(Us),Bs=function(e){Fn(n,e);var t=Vn(n);function n(e,r){return On(this,n),t.call(this,e,"google.com",r)}return Dn(n)}(js),qs=function(e){Fn(n,e);var t=Vn(n);function n(e,r,i){return On(this,n),t.call(this,e,"twitter.com",r,i)}return Dn(n)}(Us);function Ks(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=eo(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new js(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Vs(a,i);case"github.com":return new zs(a,i);case"google.com":return new Bs(a,i);case"twitter.com":return new qs(a,i,e.screenName||null);case"custom":case"anonymous":return new js(a,null);default:return new js(a,r,i)}}(n)}var Ws=function(){function e(t,n,r){On(this,e),this.type=t,this.credential=n,this.user=r}return Dn(e,[{key:"toJSON",value:function(){return{multiFactorSession:T({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Gs=function(){function e(t,n,r){On(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Dn(e,[{key:"resolveSignIn",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=jo(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return hs._fromServerResponse(r,e)}));ba(i.mfaPendingCredential,r,"internal-error");var u=Ws._fromMfaPendingCredential(i.mfaPendingCredential);return new e(u,a,function(){var e=s(o().mark((function e(t){var a,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,u);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,zu._fromIdTokenResponse(r,n.operationType,s);case 11:return c=e.sent,e.next=14,r._updateCurrentUser(c.user);case 14:return e.abrupt("return",c);case 15:return ba(n.user,r,"internal-error"),e.abrupt("return",zu._forOperation(n.user,n.operationType,s));case 17:va(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Hs(e,t){return Oa(e,"POST","/v2/accounts/mfaEnrollment:start",Pa(e,t))}function Qs(e,t){return Oa(e,"POST","/v2/accounts/mfaEnrollment:start",Pa(e,t))}function Ys(e,t){return Oa(e,"POST","/v2/accounts/mfaEnrollment:finalize",Pa(e,t))}function $s(e,t){return Oa(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Pa(e,t))}var Js=function(){function e(t){var n=this;On(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return hs._fromServerResponse(t.auth,e)})))}))}return Dn(e,[{key:"getSession",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ws,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,to(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,to(this.user,$s(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Xs=new WeakMap;var Zs="__sak",ec=function(){function e(t,n){On(this,e),this.storageRetriever=t,this.type=n}return Dn(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Zs,"1"),this.storage.removeItem(Zs),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var tc=function(e){Fn(n,e);var t=Vn(n);function n(){var e;return On(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Zn();return Eo(e)||Ao(e)}()&&function(){try{return!(!window||window===window.top)}catch(KM){return!1}}(),e.fallbackToPolling=Po(),e._shouldAllowMigration=!0,e}return Dn(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);rr()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=s(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yi(jn(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=s(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yi(jn(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yi(jn(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ec);tc.type="LOCAL";var nc=tc,rc=function(e){Fn(n,e);var t=Vn(n);function n(){return On(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Dn(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(ec);rc.type="SESSION";var ic=rc;function ac(e){return Promise.all(e.map(function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var oc=function(){function e(t){On(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Dn(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=s(o().mark((function e(t){var n,r,i,a,u,c,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,u=r.data,null===(c=this.handlersMap[a])||void 0===c?void 0:c.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),l=Array.from(c).map(function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,u));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,ac(l);case 9:f=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:f});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function uc(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}oc.receivers=[];var sc=function(){function e(t){On(this,e),this.target=t,this.handlers=new Set}return Dn(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=s(o().mark((function e(t,n){var r,i,a,u,s=this,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]?c[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,o){var c=uc("",20);i.port1.start();var l=setTimeout((function(){o(new Error("unsupported_event"))}),r);u={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),o(new Error("invalid_response"))}}},s.handlers.add(u),i.port1.addEventListener("message",u.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){u&&s.removeMessageHandler(u)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function cc(){return window}function lc(e){cc().location.href=e}function fc(){return"undefined"!==typeof cc().WorkerGlobalScope&&"function"===typeof cc().importScripts}function hc(){return dc.apply(this,arguments)}function dc(){return(dc=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function pc(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var vc="firebaseLocalStorageDb",mc="firebaseLocalStorage",yc="fbase_key",gc=function(){function e(t){On(this,e),this.request=t}return Dn(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function kc(e,t){return e.transaction([mc],t?"readwrite":"readonly").objectStore(mc)}function bc(){var e=indexedDB.deleteDatabase(vc);return new gc(e).toPromise()}function wc(){var e=indexedDB.open(vc,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(mc,{keyPath:yc})}catch(KM){n(KM)}})),e.addEventListener("success",s(o().mark((function n(){var r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(mc)){n.next=12;break}return r.close(),n.next=5,bc();case 5:return n.t0=t,n.next=8,wc();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function xc(e,t,n){return _c.apply(this,arguments)}function _c(){return _c=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=kc(t,!0).put((T(i={},yc,n),T(i,"value",r),i)),e.abrupt("return",new gc(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),_c.apply(this,arguments)}function Ec(e,t){return Ic.apply(this,arguments)}function Ic(){return Ic=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kc(t,!1).get(n),e.next=3,new gc(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Ic.apply(this,arguments)}function Sc(e,t){var n=kc(e,!0).delete(t);return new gc(n).toPromise()}var Tc=function(){function e(){On(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Dn(e,[{key:"_openDb",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,wc();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fc()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=s(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=oc._getInstance(fc()?self:null),this.receiver._subscribe("keyChanged",function(){var e=s(o().mark((function e(n,r){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=s(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hc();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new sc(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&pc()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,wc();case 5:return t=e.sent,e.next=8,xc(t,Zs,"1");case 8:return e.next=10,Sc(t,Zs);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=s(o().mark((function e(t,n){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return xc(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Ec(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=s(o().mark((function e(t){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Sc(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=s(o().mark((function e(){var t,n,r,i,a,u,s,c,l,f,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=kc(e,!1).getAll();return new gc(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Ln(t);try{for(i.s();!(a=i.n()).done;)u=a.value,s=u.fbase_key,c=u.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(c)&&(this.notifyListeners(s,c),n.push(s))}catch(o){i.e(o)}finally{i.f()}for(l=0,f=Object.keys(this.localCache);l<f.length;l++)h=f[l],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Tc.type="LOCAL";var Cc=Tc;function Nc(e,t){return Oa(e,"POST","/v2/accounts/mfaSignIn:start",Pa(e,t))}function Ac(e,t){return Oa(e,"POST","/v2/accounts/mfaSignIn:finalize",Pa(e,t))}var Pc=1e12,Oc=function(){function e(t){On(this,e),this.auth=t,this.counter=Pc,this._widgets=new Map}return Dn(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Rc(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Pc;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Pc;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Pc,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Rc=function(){function e(t,n,r){var i=this;On(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;ba(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Dn(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(KM){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(KM){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Dc=zo("rcb"),Lc=new Sa(3e4,6e4),Mc=function(){function e(){var t;On(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=cc().grecaptcha)||void 0===t?void 0:t.render)}return Dn(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ba(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&aa(cc().grecaptcha)?Promise.resolve(cc().grecaptcha):new Promise((function(r,i){var a=cc().setTimeout((function(){i(ma(e,"network-request-failed"))}),Lc.get());cc()[Dc]=function(){cc().clearTimeout(a),delete cc()[Dc];var o=cc().grecaptcha;if(o&&aa(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(ma(e,"internal-error"))},Vo("".concat("https://www.google.com/recaptcha/api.js?","?").concat(hr({onload:Dc,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(ma(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=cc().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var Fc=function(){function e(){On(this,e)}return Dn(e,[{key:"load",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Oc(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),jc="recaptcha",Uc={theme:"light",type:"image"},Vc=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Uc);On(this,e),this.parameters=r,this.type=jc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=jo(t),this.isInvisible="invisible"===this.parameters.size,ba("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof n?document.getElementById(n):n;ba(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Fc:new Mc,this.validateStartingState()}return Dn(e,[{key:"verify",value:function(){var e=s(o().mark((function e(){var t,n,r,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(KM){return Promise.reject(KM)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){ba(!this.parameters.sitekey,this.auth,"argument-error"),ba(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ba("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=cc()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){ba(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=s(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ba(Ea()&&!fc(),this.auth,"internal-error"),e.next=3,zc();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,za(this.auth);case 8:ba(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return ba(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function zc(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Bc=function(){function e(t,n){On(this,e),this.verificationId=t,this.onConfirmation=n}return Dn(e,[{key:"confirm",value:function(e){var t=Tu._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function qc(){return qc=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jo(t),e.next=3,Hc(i,n,gr(r));case 3:return a=e.sent,e.abrupt("return",new Bc(a,(function(e){return rs(i,e)})));case 5:case"end":return e.stop()}}),e)}))),qc.apply(this,arguments)}function Kc(e,t,n){return Wc.apply(this,arguments)}function Wc(){return(Wc=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gr(t),e.next=3,Ju(!1,i,"phone");case 3:return e.next=5,Hc(i.auth,n,gr(r));case 5:return a=e.sent,e.abrupt("return",new Bc(a,(function(e){return as(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gc(){return(Gc=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gr(t),e.next=3,Hc(i.auth,n,gr(r));case 3:return a=e.sent,e.abrupt("return",new Bc(a,(function(e){return us(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hc(e,t,n){return Qc.apply(this,arguments)}function Qc(){return Qc=s(o().mark((function e(t,n,r){var i,a,u,s,c,l,f,h,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,ba("string"===typeof a,t,"argument-error"),ba(r.type===jc,t,"argument-error"),!("session"in(u="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=u.session,!("phoneNumber"in u)){e.next=17;break}return ba("enroll"===s.type,t,"internal-error"),e.next=13,Hs(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:u.phoneNumber,recaptchaToken:a}});case 13:return c=e.sent,e.abrupt("return",c.phoneSessionInfo.sessionInfo);case 17:return ba("signin"===s.type,t,"internal-error"),ba(l=(null===(i=u.multiFactorHint)||void 0===i?void 0:i.uid)||u.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Nc(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:a}});case 22:return f=e.sent,e.abrupt("return",f.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,wu(t,{phoneNumber:u.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,d=h.sessionInfo,e.abrupt("return",d);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Qc.apply(this,arguments)}function Yc(){return(Yc=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yu(gr(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $c=function(){function e(t){On(this,e),this.providerId=e.PROVIDER_ID,this.auth=jo(t)}return Dn(e,[{key:"verifyPhoneNumber",value:function(e,t){return Hc(this.auth,e,gr(t))}}],[{key:"credential",value:function(e,t){return Tu._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Tu._fromTokenResponse(n,r):null}}]),e}();function Jc(e,t){return t?yo(t):(ba(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}$c.PROVIDER_ID="phone",$c.PHONE_SIGN_IN_METHOD="phone";var Xc=function(e){Fn(n,e);var t=Vn(n);function n(e){var r;return On(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Dn(n,[{key:"_getIdTokenResponse",value:function(e){return gu(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return gu(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return gu(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Qo);function Zc(e){return ts(e.auth,new Xc(e),e.bypassAuthState)}function el(e){var t=e.auth,n=e.user;return ba(n,t,"internal-error"),Zu(n,new Xc(e),e.bypassAuthState)}function tl(e){return nl.apply(this,arguments)}function nl(){return nl=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,ba(r=t.user,n,"internal-error"),e.abrupt("return",Yu(r,new Xc(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),nl.apply(this,arguments)}var rl=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];On(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Dn(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=s(o().mark((function t(n,r){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=s(o().mark((function e(t){var n,r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,u=t.error,s=t.type,!u){e.next=4;break}return this.reject(u),e.abrupt("return");case 4:return c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(c);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Zc;case"linkViaPopup":case"linkViaRedirect":return tl;case"reauthViaPopup":case"reauthViaRedirect":return el;default:va(this.auth,"internal-error")}}},{key:"resolve",value:function(e){xa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){xa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),il=new Sa(2e3,1e4);function al(e,t,n){return ol.apply(this,arguments)}function ol(){return ol=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jo(t),ga(t,n,Au),a=Jc(i,r),u=new ll(i,"signInViaPopup",n,a),e.abrupt("return",u.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),ol.apply(this,arguments)}function ul(){return(ul=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ga((i=gr(t)).auth,n,Au),a=Jc(i.auth,r),u=new ll(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",u.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sl(e,t,n){return cl.apply(this,arguments)}function cl(){return(cl=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ga((i=gr(t)).auth,n,Au),a=Jc(i.auth,r),u=new ll(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",u.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ll=function(e){Fn(n,e);var t=Vn(n);function n(e,r,i,a,o){var u;return On(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Mn(u),u}return Dn(n,[{key:"executeNotNull",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return ba(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=s(o().mark((function e(){var t,n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xa(1===this.filter.length,"Popup operations only handle one event"),t=uc(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(ma(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(ma(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(ma(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,il.get())}()}}]),n}(rl);ll.currentPopupAction=null;var fl="pendingRedirect",hl=new Map,dl=function(e){Fn(n,e);var t=Vn(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return On(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Dn(n,[{key:"execute",value:function(){var e=s(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=hl.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,pl(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Yi(jn(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:hl.set(this.auth._key(),t);case 21:return this.bypassAuthState||hl.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=s(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Yi(jn(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Yi(jn(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(rl);function pl(e,t){return vl.apply(this,arguments)}function vl(){return vl=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bl(n),i=kl(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),vl.apply(this,arguments)}function ml(e,t){return yl.apply(this,arguments)}function yl(){return yl=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kl(t)._set(bl(n),"true"));case 1:case"end":return e.stop()}}),e)}))),yl.apply(this,arguments)}function gl(e,t){hl.set(e._key(),t)}function kl(e){return yo(e._redirectPersistence)}function bl(e){return bo(fl,e.config.apiKey,e.name)}function wl(e,t,n){return function(e,t,n){return xl.apply(this,arguments)}(e,t,n)}function xl(){return xl=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jo(t),ga(t,n,Au),e.next=4,i._initializationPromise;case 4:return a=Jc(i,r),e.next=7,ml(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),xl.apply(this,arguments)}function _l(e,t,n){return function(e,t,n){return El.apply(this,arguments)}(e,t,n)}function El(){return(El=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ga((i=gr(t)).auth,n,Au),e.next=4,i.auth._initializationPromise;case 4:return a=Jc(i.auth,r),e.next=7,ml(a,i.auth);case 7:return e.next=9,Pl(i);case 9:return u=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",u));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Il(e,t,n){return function(e,t,n){return Sl.apply(this,arguments)}(e,t,n)}function Sl(){return(Sl=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ga((i=gr(t)).auth,n,Au),e.next=4,i.auth._initializationPromise;case 4:return a=Jc(i.auth,r),e.next=7,Ju(!1,i,n.providerId);case 7:return e.next=9,ml(a,i.auth);case 9:return e.next=11,Pl(i);case 11:return u=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",u));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tl(e,t){return Cl.apply(this,arguments)}function Cl(){return Cl=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jo(t)._initializationPromise;case 2:return e.abrupt("return",Nl(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Cl.apply(this,arguments)}function Nl(e,t){return Al.apply(this,arguments)}function Al(){return Al=s(o().mark((function e(t,n){var r,i,a,u,s,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=jo(t),a=Jc(i,n),u=new dl(i,a,r),e.next=6,u.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),Al.apply(this,arguments)}function Pl(e){return Ol.apply(this,arguments)}function Ol(){return(Ol=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=uc("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Rl=function(){function e(t){On(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Dn(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ll(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Ll(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ma(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dl(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Dl(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Dl(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Ll(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Ml(e){return Fl.apply(this,arguments)}function Fl(){return Fl=s(o().mark((function e(t){var n,r=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Oa(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Fl.apply(this,arguments)}var jl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ul=/^https?/;function Vl(){return Vl=s(o().mark((function e(t){var n,r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ml(t);case 4:n=e.sent,r=n.authorizedDomains,i=Ln(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(u=a.value,e.prev=11,!zl(u)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:va(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Vl.apply(this,arguments)}function zl(e){var t=_a(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Ul.test(r))return!1;if(jl.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Bl=new Sa(3e4,6e4);function ql(){var e=cc().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=br(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Kl=null;function Wl(e){return Kl=Kl||function(e){return new Promise((function(t,n){var r,i,a;function o(){ql(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){ql(),n(ma(e,"network-request-failed"))},timeout:Bl.get()})}if(null===(i=null===(r=cc().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=cc().gapi)||void 0===a?void 0:a.load)){var u=zo("iframefcb");return cc()[u]=function(){gapi.load?o():n(ma(e,"network-request-failed"))},Vo("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Kl=null,e}))}(e),Kl}var Gl=new Sa(5e3,15e3),Hl="__/auth/iframe",Ql="emulator/auth/iframe",Yl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$l=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jl(e){var t=e.config;ba(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Ta(t,Ql):"https://".concat(e.config.authDomain,"/").concat(Hl),r={apiKey:t.apiKey,appName:e.name,v:vi},i=$l.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(hr(r).slice(1))}function Xl(e){return Zl.apply(this,arguments)}function Zl(){return Zl=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wl(t);case 2:return n=e.sent,ba(r=cc().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Jl(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yl,dontclear:!0},(function(e){return new Promise(function(){var n=s(o().mark((function n(r,i){var a,u,s;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){cc().clearTimeout(u),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=ma(t,"network-request-failed"),u=cc().setTimeout((function(){i(a)}),Gl.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Zl.apply(this,arguments)}var ef={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tf=function(){function e(t){On(this,e),this.window=t,this.associatedEvent=null}return Dn(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(KM){}}}]),e}();function nf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},ef),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Zn().toLowerCase();n&&(u=Io(c)?"_blank":n),_o(c)&&(t=t||"http://localhost",s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=d(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return Ao(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new tf(null);var f=window.open(t||"",u,l);ba(f,e,"popup-blocked");try{f.focus()}catch(KM){}return new tf(f)}var rf="__/auth/handler",af="emulator/auth/handler",of=encodeURIComponent("fac");function uf(e,t,n,r,i,a){return sf.apply(this,arguments)}function sf(){return sf=s(o().mark((function e(t,n,r,i,a,u){var s,c,l,f,h,p,v,m,y,g,k,b,w;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ba(t.config.authDomain,t,"auth-domain-config-required"),ba(t.config.apiKey,t,"invalid-api-key"),s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:vi,eventId:a},n instanceof Au)for(n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",cr(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters())),c=0,l=Object.entries(u||{});c<l.length;c++)f=d(l[c],2),h=f[0],p=f[1],s[h]=p;for(n instanceof Pu&&(v=n.getScopes().filter((function(e){return""!==e}))).length>0&&(s.scopes=v.join(",")),t.tenantId&&(s.tid=t.tenantId),m=s,y=0,g=Object.keys(m);y<g.length;y++)k=g[y],void 0===m[k]&&delete m[k];return e.next=10,t._getAppCheckToken();case 10:return b=e.sent,w=b?"#".concat(of,"=").concat(encodeURIComponent(b)):"",e.abrupt("return","".concat(cf(t),"?").concat(hr(m).slice(1)).concat(w));case 13:case"end":return e.stop()}}),e)}))),sf.apply(this,arguments)}function cf(e){var t=e.config;return t.emulator?Ta(t,af):"https://".concat(t.authDomain,"/").concat(rf)}var lf="webStorageSupport",ff=function(){function e(){On(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ic,this._completeRedirectFn=Nl,this._overrideRedirectResult=gl}return Dn(e,[{key:"_openPopup",value:function(){var e=s(o().mark((function e(t,n,r,i){var a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xa(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,uf(t,n,r,_a(),i);case 3:return u=e.sent,e.abrupt("return",nf(t,u,uc()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=s(o().mark((function e(t,n,r,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,uf(t,n,r,_a(),i);case 4:return lc(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(xa(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xl(t);case 2:return n=e.sent,r=new Rl(t),n.register("authEvent",(function(e){return ba(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(lf,{type:lf},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[lf];void 0!==i&&t(!!i),va(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Vl.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Po()||Eo()||Ao()}}]),e}(),hf=ff,df=function(){function e(t){On(this,e),this.factorId=t}return Dn(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return wa("unexpected MultiFactorSessionType")}}}]),e}(),pf=function(e){Fn(n,e);var t=Vn(n);function n(e){var r;return On(this,n),(r=t.call(this,"phone")).credential=e,r}return Dn(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Oa(e,"POST","/v2/accounts/mfaEnrollment:finalize",Pa(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Oa(e,"POST","/v2/accounts/mfaSignIn:finalize",Pa(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(df),vf=function(){function e(){On(this,e)}return Dn(e,null,[{key:"assertion",value:function(e){return pf._fromCredential(e)}}]),e}();vf.FACTOR_ID="phone";var mf=function(){function e(){On(this,e)}return Dn(e,null,[{key:"assertionForEnrollment",value:function(e,t){return yf._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return yf._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ba("undefined"!==typeof(null===(n=(r=t).user)||void 0===n?void 0:n.auth),"internal-error"),e.next=4,Qs(r.user.auth,{idToken:r.credential,totpEnrollmentInfo:{}});case 4:return i=e.sent,e.abrupt("return",gf._fromStartTotpMfaEnrollmentResponse(i,r.user.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();mf.FACTOR_ID="totp";var yf=function(e){Fn(n,e);var t=Vn(n);function n(e,r,i){var a;return On(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return Dn(n,[{key:"_finalizeEnroll",value:function(){var e=s(o().mark((function e(t,n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ba("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",Ys(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ba(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",Ac(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(df),gf=function(){function e(t,n,r,i,a,o,u){On(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return Dn(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(kf(e)||kf(t))&&(r=!0),r&&(kf(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),kf(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function kf(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var bf="@firebase/auth",wf="1.2.0",xf=function(){function e(t){On(this,e),this.auth=t,this.internalListeners=new Map}return Dn(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){ba(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var _f;!function(e){var t;null===(t=$n())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function Ef(){return window}_f="Browser",si(new wr("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;ba(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:_f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Oo(_f)},l=new Fo(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(yo);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),si(new wr("auth-internal",(function(e){return function(e){return new xf(e)}(jo(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),wi(bf,wf,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_f)),wi(bf,wf,"esm2017");var If=2e3;function Sf(e,t,n){return Tf.apply(this,arguments)}function Tf(){return Tf=s(o().mark((function e(t,n,r){var i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ef(),u=a.BuildInfo,xa(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Rf(n.sessionId);case 4:return s=e.sent,c={},Ao()?c.ibi=u.packageName:To()?c.apn=u.packageName:va(t,"operation-not-supported-in-this-environment"),u.displayName&&(c.appDisplayName=u.displayName),c.sessionId=s,e.abrupt("return",uf(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,c));case 10:case"end":return e.stop()}}),e)}))),Tf.apply(this,arguments)}function Cf(){return Cf=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ef(),r=n.BuildInfo,i={},Ao()?i.iosBundleId=r.packageName:To()?i.androidPackageName=r.packageName:va(t,"operation-not-supported-in-this-environment"),e.next=5,Ml(t,i);case 5:case"end":return e.stop()}}),e)}))),Cf.apply(this,arguments)}function Nf(e){var t=Ef().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Af(e,t,n){return Pf.apply(this,arguments)}function Pf(){return Pf=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ef(),a=i.cordova,u=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var o=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){o||(o=window.setTimeout((function(){i(ma(t,"redirect-cancelled-by-user"))}),If))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),To()&&document.addEventListener("visibilitychange",l,!1),u=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),o&&window.clearTimeout(o)}}));case 5:return e.prev=5,u(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Pf.apply(this,arguments)}function Of(e){var t,n,r,i,a,o,u,s,c,l,f=Ef();ba("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ba("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ba("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ba("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ba("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Rf(e){return Df.apply(this,arguments)}function Df(){return(Df=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Lf(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lf(e){if(xa(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Mf=20,Ff=function(e){Fn(n,e);var t=Vn(n);function n(){var e;return On(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Dn(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Yi(jn(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Rl);function jf(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:qf(),postBody:null,tenantId:e.tenantId,error:ma(e,"no-auth-event")}}function Uf(e,t){return Kf()._set(Wf(e),t)}function Vf(e){return zf.apply(this,arguments)}function zf(){return zf=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kf()._get(Wf(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Kf()._remove(Wf(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),zf.apply(this,arguments)}function Bf(e,t){var n,r,i=function(e){var t=Gf(e),n=t.link?decodeURIComponent(t.link):void 0,r=Gf(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Gf(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Gf(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(KM){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?ma(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function qf(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<Mf;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function Kf(){return yo(nc)}function Wf(e){return bo("authEvent",e.config.apiKey,e.name)}function Gf(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=Qi(e.split("?"));t[0];return dr(t.slice(1).join("?"))}var Hf=function(){function e(){On(this,e),this._redirectPersistence=ic,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Nl,this._overrideRedirectResult=gl}return Dn(e,[{key:"_initialize",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Ff(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){va(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=s(o().mark((function e(t,n,r,i){var a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Of(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),hl.clear(),e.next=10,this._originValidation(t);case 10:return u=jf(t,r,i),e.next=13,Uf(t,u);case 13:return e.next=15,Sf(t,u,n);case 15:return s=e.sent,e.next=18,Nf(s);case 18:return c=e.sent,e.abrupt("return",Af(t,a,c));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Cf.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Ef(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,u=setTimeout(s(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Vf(e);case 2:t.onEvent(Yf());case 3:case"end":return n.stop()}}),n)}))),500),c=function(){var n=s(o().mark((function n(r){var i,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(u),n.next=3,Vf(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Bf(i,r.url)),t.onEvent(a||Yf());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,c);var l=i,f="".concat(a.packageName.toLowerCase(),"://");Ef().handleOpenURL=function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(f)&&c({url:t}),"function"===typeof l)try{l(t)}catch(KM){console.error(KM)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Qf=Hf;function Yf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ma("no-auth-event")}}var $f=1e3;function Jf(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Xf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn();return!("file:"!==Jf()&&"ionic:"!==Jf()&&"capacitor:"!==Jf()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn();return rr()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn();return/Edge\/\d+/.test(e)}(e)}function eh(){try{var e=self.localStorage,t=uc();if(e)return e.setItem(t,"1"),e.removeItem(t),!Zf()||ir()}catch(KM){return th()&&ir()}return!1}function th(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function nh(){return("http:"===Jf()||"https:"===Jf()||tr()||Xf())&&!(nr()||er())&&eh()&&!th()}function rh(){return Xf()&&"undefined"!==typeof document}function ih(){return ah.apply(this,arguments)}function ah(){return(ah=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(rh()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),$f);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oh={LOCAL:"local",NONE:"none",SESSION:"session"},uh=ba,sh="persistence";function ch(e,t){uh(Object.values(oh).includes(t),e,"invalid-persistence-type"),nr()?uh(t!==oh.SESSION,e,"unsupported-persistence-type"):er()?uh(t===oh.NONE,e,"unsupported-persistence-type"):th()?uh(t===oh.NONE||t===oh.LOCAL&&ir(),e,"unsupported-persistence-type"):uh(t===oh.NONE||eh(),e,"unsupported-persistence-type")}function lh(e){return fh.apply(this,arguments)}function fh(){return fh=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=hh(),r=bo(sh,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),fh.apply(this,arguments)}function hh(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(KM){return null}}var dh=ba,ph=function(){function e(){On(this,e),this.browserResolver=yo(hf),this.cordovaResolver=yo(Qf),this.underlyingResolver=null,this._redirectPersistence=ic,this._completeRedirectFn=Nl,this._overrideRedirectResult=gl}return Dn(e,[{key:"_initialize",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=s(o().mark((function e(t,n,r,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=s(o().mark((function e(t,n,r,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return rh()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return dh(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ih();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function vh(e){return e.unwrap()}function mh(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new wh(e,function(e,t){var n,r=gr(e),i=t;return ba(t.customData.operationType,r,"argument-error"),ba(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Gs._fromError(r,i)}(e,t));else if(r){var i=yh(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function yh(e){var t=(e instanceof ar?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof ar)&&"temporaryProof"in t&&"phoneNumber"in t)return $c.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Xi.PASSWORD)return null;switch(r){case Xi.GOOGLE:n=Du;break;case Xi.FACEBOOK:n=Ru;break;case Xi.GITHUB:n=Lu;break;case Xi.TWITTER:n=ju;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Mu._create(r,u):bu._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Ou(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof ar?n.credentialFromError(e):n.credentialFromResult(e)}function gh(e,t){return t.catch((function(t){throw t instanceof ar&&mh(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,yh(t)),additionalUserInfo:Ks(e),user:xh.getOrCreate(r)}}))}function kh(e,t){return bh.apply(this,arguments)}function bh(){return bh=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return gh(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),bh.apply(this,arguments)}var wh=function(){function e(t,n){On(this,e),this.resolver=n,this.auth=t.wrapped()}return Dn(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return gh(vh(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),xh=function(){function e(t){On(this,e),this._delegate=t,this.multiFactor=function(e){var t=gr(e);return Xs.has(t)||Xs.set(t,Js._fromUser(t)),Xs.get(t)}(t)}return Dn(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gh(this.auth,as(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kh(this.auth,Kc(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gh(this.auth,sl(this._delegate,t,ph)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lh(jo(this.auth));case 2:return e.abrupt("return",Il(this._delegate,t,ph));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gh(this.auth,us(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return kh(this.auth,function(e,t,n){return Gc.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return gh(this.auth,function(e,t,n){return ul.apply(this,arguments)}(this._delegate,e,ph))}},{key:"reauthenticateWithRedirect",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lh(jo(this.auth));case 2:return e.abrupt("return",_l(this._delegate,t,ph));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Ps.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hu(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Ms(gr(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Ms(gr(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Yc.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Ls.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Os.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();xh.USER_MAP=new WeakMap;var _h=ba,Eh=function(){function e(t,n){if(On(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;_h(r,"invalid-api-key",{appName:t.name}),_h(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?ph:void 0;this._delegate=n.initialize({options:{persistence:Sh(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(ca),this.linkUnderlyingAuth()}return Dn(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?xh.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Wo(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return bs.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return ws(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return ks.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gh(this._delegate,Es(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return As.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Cu.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _h(nh(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Tl(this._delegate,ph);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",gh(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){jo(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Ih(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Ih(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Ss.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return gs.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ch(this._delegate,t),e.t0=t,e.next=e.t0===oh.SESSION?4:e.t0===oh.LOCAL?6:e.t0===oh.NONE?11:13;break;case 4:return n=ic,e.abrupt("break",14);case 6:return e.next=8,yo(Cc)._isAvailable();case 8:return r=e.sent,n=r?Cc:nc,e.abrupt("break",14);case 11:return n=ko,e.abrupt("break",14);case 13:return e.abrupt("return",va("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return gh(this._delegate,function(e){return qu.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return gh(this._delegate,rs(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return gh(this._delegate,function(e,t){return fs.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return gh(this._delegate,function(e,t,n){return rs(gr(e),Nu.credential(t,n)).catch(function(){var t=s(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&ms(e),n;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return gh(this._delegate,function(e,t,n){return Ts.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return kh(this._delegate,function(e,t,n){return qc.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _h(nh(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",gh(this._delegate,al(this._delegate,t,ph)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _h(nh(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,lh(this._delegate);case 3:return e.abrupt("return",wl(this._delegate,t,ph));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return _s.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Ih(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&xh.getOrCreate(e))},error:t,complete:n}}function Sh(e,t){var n=function(e,t){var n=hh();if(!n)return[];var r=bo(sh,e,t);switch(n.getItem(r)){case oh.NONE:return[ko];case oh.LOCAL:return[Cc,ic];case oh.SESSION:return[ic];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Cc)||n.push(Cc),"undefined"!==typeof window)for(var r=0,i=[nc,ic];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(ko)||n.push(ko),n}Eh.Persistence=oh;var Th=function(){function e(){On(this,e),this.providerId="phone",this._delegate=new $c(vh(Hi.auth()))}return Dn(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return $c.credential(e,t)}}]),e}();Th.PHONE_SIGN_IN_METHOD=$c.PHONE_SIGN_IN_METHOD,Th.PROVIDER_ID=$c.PROVIDER_ID;var Ch,Nh=ba,Ah=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hi.app();On(this,e),Nh(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Vc(i.auth(),t,n),this.type=this._delegate.type}return Dn(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Ch=Hi).INTERNAL.registerComponent(new wr("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Eh(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Zi,PASSWORD_RESET:ea,RECOVER_EMAIL:ta,REVERT_SECOND_FACTOR_ADDITION:na,VERIFY_AND_CHANGE_EMAIL:ra,VERIFY_EMAIL:ia}},EmailAuthProvider:Nu,FacebookAuthProvider:Ru,GithubAuthProvider:Lu,GoogleAuthProvider:Du,OAuthProvider:Ou,SAMLAuthProvider:Fu,PhoneAuthProvider:Th,PhoneMultiFactorGenerator:vf,RecaptchaVerifier:Ah,TwitterAuthProvider:ju,Auth:Eh,AuthCredential:Qo,Error:ar}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ch.registerVersion("@firebase/auth-compat","0.4.5");var Ph,Oh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Rh={},Dh=Dh||{},Lh=Oh||self;function Mh(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Fh(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var jh="closure_uid_"+(1e9*Math.random()>>>0),Uh=0;function Vh(e,t,n){return e.call.apply(e.bind,arguments)}function zh(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Bh(e,t,n){return(Bh=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Vh:zh).apply(null,arguments)}function qh(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Kh(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Wh(){this.s=this.s,this.o=this.o}Wh.prototype.s=!1,Wh.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,jh)&&e[jh]||(e[jh]=++Uh))},Wh.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Gh=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Hh(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Qh(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Mh(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Yh(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Yh.prototype.h=function(){this.defaultPrevented=!0};var $h=function(){if(!Lh.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Lh.addEventListener("test",(function(){}),t),Lh.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function Jh(e){return/^[\s\xa0]*$/.test(e)}function Xh(){var e=Lh.navigator;return e&&(e=e.userAgent)?e:""}function Zh(e){return-1!=Xh().indexOf(e)}function ed(e){return ed[" "](e),e}ed[" "]=function(){};var td,nd,rd=Zh("Opera"),id=Zh("Trident")||Zh("MSIE"),ad=Zh("Edge"),od=ad||id,ud=Zh("Gecko")&&!(-1!=Xh().toLowerCase().indexOf("webkit")&&!Zh("Edge"))&&!(Zh("Trident")||Zh("MSIE"))&&!Zh("Edge"),sd=-1!=Xh().toLowerCase().indexOf("webkit")&&!Zh("Edge");function cd(){var e=Lh.document;return e?e.documentMode:void 0}e:{var ld="",fd=function(){var e=Xh();return ud?/rv:([^\);]+)(\)|;)/.exec(e):ad?/Edge\/([\d\.]+)/.exec(e):id?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):sd?/WebKit\/(\S+)/.exec(e):rd?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(fd&&(ld=fd?fd[1]:""),id){var hd=cd();if(null!=hd&&hd>parseFloat(ld)){td=String(hd);break e}}td=ld}if(Lh.document&&id){var dd=cd();nd=dd||(parseInt(td,10)||void 0)}else nd=void 0;var pd=nd;function vd(e,t){if(Yh.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ud){e:{try{ed(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:md[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&vd.$.h.call(this)}}Kh(vd,Yh);var md={2:"touch",3:"pen",4:"mouse"};vd.prototype.h=function(){vd.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var yd="closure_listenable_"+(1e6*Math.random()|0),gd=0;function kd(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++gd,this.fa=this.ia=!1}function bd(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function wd(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function xd(e){var t={};for(var n in e)t[n]=e[n];return t}var _d="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ed(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<_d.length;a++)n=_d[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Id(e){this.src=e,this.g={},this.h=0}function Sd(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Gh(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(bd(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Td(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Id.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Td(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new kd(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Cd="closure_lm_"+(1e6*Math.random()|0),Nd={};function Ad(e,t,n,r,i){if(r&&r.once)return Od(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ad(e,t[a],n,r,i);return null}return n=Ud(n),e&&e[yd]?e.O(t,n,Fh(r)?!!r.capture:!!r,i):Pd(e,t,n,!1,r,i)}function Pd(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Fh(i)?!!i.capture:!!i,u=Fd(e);if(u||(e[Cd]=u=new Id(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Md;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)$h||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ld(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Od(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Od(e,t[a],n,r,i);return null}return n=Ud(n),e&&e[yd]?e.P(t,n,Fh(r)?!!r.capture:!!r,i):Pd(e,t,n,!0,r,i)}function Rd(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Rd(e,t[a],n,r,i);else r=Fh(r)?!!r.capture:!!r,n=Ud(n),e&&e[yd]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Td(a=e.g[t],n,r,i))&&(bd(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Fd(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Td(t,n,r,i)),(n=-1<e?t[e]:null)&&Dd(n))}function Dd(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[yd])Sd(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ld(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Fd(t))?(Sd(n,e),0==n.h&&(n.src=null,t[Cd]=null)):bd(e)}}}function Ld(e){return e in Nd?Nd[e]:Nd[e]="on"+e}function Md(e,t){if(e.fa)e=!0;else{t=new vd(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Dd(e),e=n.call(r,t)}return e}function Fd(e){return(e=e[Cd])instanceof Id?e:null}var jd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ud(e){return"function"===typeof e?e:(e[jd]||(e[jd]=function(t){return e.handleEvent(t)}),e[jd])}function Vd(){Wh.call(this),this.i=new Id(this),this.S=this,this.J=null}function zd(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Yh(t,e);else if(t instanceof Yh)t.target=t.target||e;else{var i=t;Ed(t=new Yh(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Bd(o,r,!0,t)&&i}if(i=Bd(o=t.g=e,r,!0,t)&&i,i=Bd(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Bd(o=t.g=n[a],r,!1,t)&&i}function Bd(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&Sd(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Kh(Vd,Wh),Vd.prototype[yd]=!0,Vd.prototype.removeEventListener=function(e,t,n,r){Rd(this,e,t,n,r)},Vd.prototype.N=function(){if(Vd.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)bd(n[r]);delete t.g[e],t.h--}}this.J=null},Vd.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Vd.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var qd=Lh.JSON.stringify,Kd=function(){function e(t,n){On(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Dn(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Wd(){var e=Zd,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Gd=function(){function e(){On(this,e),this.h=this.g=null}return Dn(e,[{key:"add",value:function(e,t){var n=Hd.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Hd=new Kd((function(){return new Qd}),(function(e){return e.reset()})),Qd=function(){function e(){On(this,e),this.next=this.g=this.h=null}return Dn(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Yd(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function $d(e){Lh.setTimeout((function(){throw e}),0)}var Jd,Xd=!1,Zd=new Gd,ep=function(){var e=Lh.Promise.resolve(void 0);Jd=function(){e.then(tp)}},tp=function(){for(var e;e=Wd();){try{e.h.call(e.g)}catch(n){$d(n)}var t=Hd;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Xd=!1};function np(e,t){Vd.call(this),this.h=e||1,this.g=t||Lh,this.j=Bh(this.qb,this),this.l=Date.now()}function rp(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function ip(e,t,n){if("function"===typeof e)n&&(e=Bh(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Bh(e.handleEvent,e)}return 2147483647<Number(t)?-1:Lh.setTimeout(e,t||0)}function ap(e){e.g=ip((function(){e.g=null,e.i&&(e.i=!1,ap(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Kh(np,Vd),(Ph=np.prototype).ga=!1,Ph.T=null,Ph.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),zd(this,"tick"),this.ga&&(rp(this),this.start()))}},Ph.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ph.N=function(){np.$.N.call(this),rp(this),delete this.g};var op=function(e){Fn(n,e);var t=Vn(n);function n(e,r){var i;return On(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Dn(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:ap(this)}},{key:"N",value:function(){Yi(jn(n.prototype),"N",this).call(this),this.g&&(Lh.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Wh);function up(e){Wh.call(this),this.h=e,this.g={}}Kh(up,Wh);var sp=[];function cp(e,t,n,r){Array.isArray(n)||(n&&(sp[0]=n.toString()),n=sp);for(var i=0;i<n.length;i++){var a=Ad(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function lp(e){wd(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Dd(e)}),e),e.g={}}function fp(){this.g=!0}function hp(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return qd(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}up.prototype.N=function(){up.$.N.call(this),lp(this)},up.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fp.prototype.Ea=function(){this.g=!1},fp.prototype.info=function(){};var dp={},pp=null;function vp(){return pp=pp||new Vd}function mp(e){Yh.call(this,dp.Ta,e)}function yp(e){var t=vp();zd(t,new mp(t))}function gp(e,t){Yh.call(this,dp.STAT_EVENT,e),this.stat=t}function kp(e){var t=vp();zd(t,new gp(t,e))}function bp(e,t){Yh.call(this,dp.Ua,e),this.size=t}function wp(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Lh.setTimeout((function(){e()}),t)}dp.Ta="serverreachability",Kh(mp,Yh),dp.STAT_EVENT="statevent",Kh(gp,Yh),dp.Ua="timingevent",Kh(bp,Yh);var xp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},_p={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ep(){}function Ip(e){return e.h||(e.h=e.i())}function Sp(){}Ep.prototype.h=null;var Tp,Cp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Np(){Yh.call(this,"d")}function Ap(){Yh.call(this,"c")}function Pp(){}function Op(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new up(this),this.P=Dp,e=od?125:void 0,this.V=new np(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Rp}function Rp(){this.i=null,this.g="",this.h=!1}Kh(Np,Yh),Kh(Ap,Yh),Kh(Pp,Ep),Pp.prototype.g=function(){return new XMLHttpRequest},Pp.prototype.i=function(){return{}},Tp=new Pp;var Dp=45e3,Lp={},Mp={};function Fp(e,t,n){e.L=1,e.v=nv(Jp(t)),e.s=n,e.S=!0,jp(e,null)}function jp(e,t){e.G=Date.now(),Bp(e),e.A=Jp(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),vv(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Rp,e.g=mm(e.l,n?t:null,!e.s),0<e.O&&(e.M=new op(Bh(e.Pa,e,e.g),e.O)),cp(e.U,e.g,"readystatechange",e.nb),t=e.I?xd(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),yp(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Up(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Vp(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=zp(e,n))==Mp){4==t&&(e.o=4,kp(14),i=!1),hp(e.j,e.m,null,"[Incomplete Response]");break}if(r==Lp){e.o=4,kp(15),hp(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}hp(e.j,e.m,r,null),Hp(e,r)}Up(e)&&r!=Mp&&r!=Lp&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,kp(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),sm(t),t.M=!0,kp(11))):(hp(e.j,e.m,n,"[Invalid Chunked Response]"),Gp(e),Wp(e))}function zp(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Mp:(n=Number(t.substring(n,r)),isNaN(n)?Lp:(r+=1)+n>t.length?Mp:(t=t.slice(r,r+n),e.C=r+n,t))}function Bp(e){e.Y=Date.now()+e.P,qp(e,e.P)}function qp(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=wp(Bh(e.lb,e),t)}function Kp(e){e.B&&(Lh.clearTimeout(e.B),e.B=null)}function Wp(e){0==e.l.H||e.J||fm(e.l,e)}function Gp(e){Kp(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,rp(e.V),lp(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Hp(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||xv(n.i,e)))if(!e.K&&xv(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;lm(n),em(n)}um(n),kp(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=wp(Bh(n.ib,n),6e3));if(1>=wv(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else dm(n,11)}else if((e.K||n.g==e)&&lm(n),!Jh(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(_v(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,tv(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=vm(r,r.J?r.pa:null,r.Y),d.K){Ev(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(Kp(p),Bp(p)),r.g=d}else om(r);0<n.j.length&&nm(n)}else"stop"!=a[0]&&"close"!=a[0]||dm(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?dm(n,7):Zv(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}yp()}catch(a){}}function Qp(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Mh(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Mh(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Mh(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Ph=Op.prototype).setTimeout=function(e){this.P=e},Ph.nb=function(e){e=e.target;var t=this.M;t&&3==Hv(e)?t.l():this.Pa(e)},Ph.Pa=function(e){try{if(e==this.g)e:{var t=Hv(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||od||this.g&&(this.h.h||this.g.ja()||Qv(this.g)))){this.J||4!=t||7==n||yp(),Kp(this);var r=this.g.da();this.ca=r;t:if(Up(this)){var i=Qv(this.g);e="";var a=i.length,o=4==Hv(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Gp(this),Wp(this);var u="";break t}this.h.i=new Lh.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jh(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,kp(12),Gp(this),Wp(this);break e}hp(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hp(this,r)}this.S?(Vp(this,t,u),od&&this.i&&3==t&&(cp(this.U,this.V,"tick",this.mb),this.V.start())):(hp(this.j,this.m,u,null),Hp(this,u)),4==t&&Gp(this),this.i&&!this.J&&(4==t?fm(this.l,this):(this.i=!1,Bp(this)))}else(function(e){var t={};e=(e.g&&2<=Hv(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!Jh(e[n])){var r=Yd(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,kp(12)):(this.o=0,kp(13)),Gp(this),Wp(this)}}}catch(t){}},Ph.mb=function(){if(this.g){var e=Hv(this.g),t=this.g.ja();this.C<t.length&&(Kp(this),Vp(this,e,t),this.i&&4!=e&&Bp(this))}},Ph.cancel=function(){this.J=!0,Gp(this)},Ph.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(yp(),kp(17)),Gp(this),this.o=2,Wp(this)):qp(this,this.Y-e)};var Yp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $p(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof $p){this.h=e.h,Xp(this,e.j),this.s=e.s,this.g=e.g,Zp(this,e.m),this.l=e.l;var t=e.i,n=new fv;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ev(this,n),this.o=e.o}else e&&(t=String(e).match(Yp))?(this.h=!1,Xp(this,t[1]||"",!0),this.s=rv(t[2]||""),this.g=rv(t[3]||"",!0),Zp(this,t[4]),this.l=rv(t[5]||"",!0),ev(this,t[6]||"",!0),this.o=rv(t[7]||"")):(this.h=!1,this.i=new fv(null,this.h))}function Jp(e){return new $p(e)}function Xp(e,t,n){e.j=n?rv(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Zp(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ev(e,t,n){t instanceof fv?(e.i=t,function(e,t){t&&!e.j&&(hv(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(dv(this,t),vv(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=iv(t,cv)),e.i=new fv(t,e.h))}function tv(e,t,n){e.i.set(t,n)}function nv(e){return tv(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function rv(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function iv(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,av),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function av(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}$p.prototype.toString=function(){var e=[],t=this.j;t&&e.push(iv(t,ov,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(iv(t,ov,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(iv(n,"/"==n.charAt(0)?sv:uv,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",iv(n,lv)),e.join("")};var ov=/[#\/\?@]/g,uv=/[#\?:]/g,sv=/[#\?]/g,cv=/[#\?@]/g,lv=/#/g;function fv(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function hv(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function dv(e,t){hv(e),t=mv(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function pv(e,t){return hv(e),t=mv(e,t),e.g.has(t)}function vv(e,t,n){dv(e,t),0<n.length&&(e.i=null,e.g.set(mv(e,t),Hh(n)),e.h+=n.length)}function mv(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ph=fv.prototype).add=function(e,t){hv(this),this.i=null,e=mv(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ph.forEach=function(e,t){hv(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Ph.ta=function(){hv(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Ph.Z=function(e){hv(this);var t=[];if("string"===typeof e)pv(this,e)&&(t=t.concat(this.g.get(mv(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Ph.set=function(e,t){return hv(this),this.i=null,pv(this,e=mv(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ph.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Ph.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var yv=Dn((function e(t,n){On(this,e),this.g=t,this.map=n}));function gv(e){this.l=e||kv,Lh.PerformanceNavigationTiming?e=0<(e=Lh.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Lh.g&&Lh.g.Ka&&Lh.g.Ka()&&Lh.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var kv=10;function bv(e){return!!e.h||!!e.g&&e.g.size>=e.j}function wv(e){return e.h?1:e.g?e.g.size:0}function xv(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function _v(e,t){e.g?e.g.add(t):e.h=t}function Ev(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Iv(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Ln(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return Hh(e.i)}gv.prototype.cancel=function(){if(this.i=Iv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Ln(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var Sv,Tv=function(){function e(){On(this,e)}return Dn(e,[{key:"stringify",value:function(e){return Lh.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return Lh.JSON.parse(e,void 0)}}]),e}();function Cv(){this.g=new Tv}function Nv(e,t,n){var r=n||"";try{Qp(e,(function(e,n){var i=e;Fh(e)&&(i=qd(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(KM){throw t.push(r+"type="+encodeURIComponent("_badmap")),KM}}function Av(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Pv(e){this.l=e.fc||null,this.j=e.ob||!1}function Ov(e,t){Vd.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Rv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Kh(Pv,Ep),Pv.prototype.g=function(){return new Ov(this.l,this.j)},Pv.prototype.i=(Sv={},function(){return Sv}),Kh(Ov,Vd);var Rv=0;function Dv(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Lv(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Mv(e)}function Mv(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ph=Ov.prototype).open=function(e,t){if(this.readyState!=Rv)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Mv(this)},Ph.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Lh).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Ph.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Lv(this)),this.readyState=Rv},Ph.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Mv(this)),this.g&&(this.readyState=3,Mv(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Lh.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Dv(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Ph.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Lv(this):Mv(this),3==this.readyState&&Dv(this)}},Ph.Za=function(e){this.g&&(this.response=this.responseText=e,Lv(this))},Ph.Ya=function(e){this.g&&(this.response=e,Lv(this))},Ph.ka=function(){this.g&&Lv(this)},Ph.setRequestHeader=function(e,t){this.v.append(e,t)},Ph.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ph.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ov.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Fv=Lh.JSON.parse;function jv(e){Vd.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Uv,this.L=this.M=!1}Kh(jv,Vd);var Uv="",Vv=/^https?$/i,zv=["POST","PUT"];function Bv(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,qv(e),Wv(e)}function qv(e){e.F||(e.F=!0,zd(e,"complete"),zd(e,"error"))}function Kv(e){if(e.h&&"undefined"!=typeof Dh&&(!e.C[1]||4!=Hv(e)||2!=e.da()))if(e.v&&4==Hv(e))ip(e.La,0,e);else if(zd(e,"readystatechange"),4==Hv(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Yp)[1]||null;!a&&Lh.self&&Lh.self.location&&(a=Lh.self.location.protocol.slice(0,-1)),i=!Vv.test(a?a.toLowerCase():"")}t=i}if(t)zd(e,"complete"),zd(e,"success");else{e.m=6;try{var o=2<Hv(e)?e.g.statusText:""}catch(u){o=""}e.j=o+" ["+e.da()+"]",qv(e)}}finally{Wv(e)}}}function Wv(e,t){if(e.g){Gv(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||zd(e,"ready");try{n.onreadystatechange=r}catch(KM){}}}function Gv(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Lh.clearTimeout(e.A),e.A=null)}function Hv(e){return e.g?e.g.readyState:0}function Qv(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Uv:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ty){return null}}function Yv(e){var t="";return wd(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function $v(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Yv(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):tv(e,t,n))}function Jv(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Xv(e){this.Ga=0,this.j=[],this.l=new fp,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Jv("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Jv("baseRetryDelayMs",5e3,e),this.hb=Jv("retryDelaySeedMs",1e4,e),this.eb=Jv("forwardChannelMaxRetries",2,e),this.xa=Jv("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new gv(e&&e.concurrentRequestLimit),this.Ja=new Cv,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Zv(e){if(tm(e),3==e.H){var t=e.W++,n=Jp(e.I);if(tv(n,"SID",e.K),tv(n,"RID",t),tv(n,"TYPE","terminate"),im(e,n),(t=new Op(e,e.l,t)).L=2,t.v=nv(Jp(n)),n=!1,Lh.navigator&&Lh.navigator.sendBeacon)try{n=Lh.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Lh.Image&&((new Image).src=t.v,n=!0),n||(t.g=mm(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Bp(t)}pm(e)}function em(e){e.g&&(sm(e),e.g.cancel(),e.g=null)}function tm(e){em(e),e.u&&(Lh.clearTimeout(e.u),e.u=null),lm(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Lh.clearTimeout(e.m),e.m=null)}function nm(e){if(!bv(e.i)&&!e.m){e.m=!0;var t=e.Na;Jd||ep(),Xd||(Jd(),Xd=!0),Zd.add(t,e),e.C=0}}function rm(e,t){var n;n=t?t.m:e.W++;var r=Jp(e.I);tv(r,"SID",e.K),tv(r,"RID",n),tv(r,"AID",e.V),im(e,r),e.o&&e.s&&$v(r,e.o,e.s),n=new Op(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=am(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),_v(e.i,n),Fp(n,r,t)}function im(e,t){e.na&&wd(e.na,(function(e,n){tv(t,n,e)})),e.h&&Qp({},(function(e,n){tv(t,n,e)}))}function am(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Bh(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{Nv(l,o,"req"+c+"_")}catch(kg){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function om(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Jd||ep(),Xd||(Jd(),Xd=!0),Zd.add(t,e),e.A=0}}function um(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=wp(Bh(e.Ma,e),hm(e,e.A)),e.A++,!0)}function sm(e){null!=e.B&&(Lh.clearTimeout(e.B),e.B=null)}function cm(e){e.g=new Op(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Jp(e.wa);tv(t,"RID","rpc"),tv(t,"SID",e.K),tv(t,"AID",e.V),tv(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&tv(t,"TO",e.qa),tv(t,"TYPE","xmlhttp"),im(e,t),e.o&&e.s&&$v(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=nv(Jp(t)),n.s=null,n.S=!0,jp(n,e)}function lm(e){null!=e.v&&(Lh.clearTimeout(e.v),e.v=null)}function fm(e,t){var n=null;if(e.g==t){lm(e),sm(e),e.g=null;var r=2}else{if(!xv(e.i,t))return;n=t.F,Ev(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;zd(r=vp(),new bp(r,n)),nm(e)}else om(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(wv(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=wp(Bh(e.Na,e,t),hm(e,e.C)),e.C++,!0))}(e,t)||2==r&&um(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:dm(e,5);break;case 4:dm(e,10);break;case 3:dm(e,6);break;default:dm(e,2)}}function hm(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function dm(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Bh(e.pb,e);n||(n=new $p("//www.google.com/images/cleardot.gif"),Lh.location&&"http"==Lh.location.protocol||Xp(n,"https"),nv(n)),function(e,t){var n=new fp;if(Lh.Image){var r=new Image;r.onload=qh(Av,n,r,"TestLoadImage: loaded",!0,t),r.onerror=qh(Av,n,r,"TestLoadImage: error",!1,t),r.onabort=qh(Av,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=qh(Av,n,r,"TestLoadImage: timeout",!1,t),Lh.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else kp(2);e.H=0,e.h&&e.h.za(t),pm(e),tm(e)}function pm(e){if(e.H=0,e.ma=[],e.h){var t=Iv(e.i);0==t.length&&0==e.j.length||(Qh(e.ma,t),Qh(e.ma,e.j),e.i.i.length=0,Hh(e.j),e.j.length=0),e.h.ya()}}function vm(e,t,n){var r=n instanceof $p?Jp(n):new $p(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Zp(r,r.m);else{var i=Lh.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new $p(null);r&&Xp(a,r),t&&(a.g=t),i&&Zp(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&tv(r,n,t),tv(r,"VER",e.ra),im(e,r),r}function mm(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new jv(new Pv({ob:!0})):new jv(e.va)).Oa(e.J),t}function ym(){}function gm(){if(id&&!(10<=Number(pd)))throw Error("Environmental error: no available transport.")}function km(e,t){Vd.call(this),this.g=new Xv(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Jh(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Jh(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new xm(this)}function bm(e){Np.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function wm(){Ap.call(this),this.status=1}function xm(e){this.g=e}function _m(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Em(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Im(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Ph=jv.prototype).Oa=function(e){this.M=e},Ph.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Tp.g(),this.C=this.u?Ip(this.u):Ip(Tp),this.g.onreadystatechange=Bh(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void Bv(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=Ln(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Lh.FormData&&e instanceof Lh.FormData,!(0<=Gh(zv,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=Ln(n);try{for(c.s();!(s=c.n()).done;){var l=d(s.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(p){c.e(p)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Gv(this),0<this.B&&((this.L=function(e){return id&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bh(this.ua,this)):this.A=ip(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Bv(this,u)}},Ph.ua=function(){"undefined"!=typeof Dh&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,zd(this,"timeout"),this.abort(8))},Ph.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,zd(this,"complete"),zd(this,"abort"),Wv(this))},Ph.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Wv(this,!0)),jv.$.N.call(this)},Ph.La=function(){this.s||(this.G||this.v||this.l?Kv(this):this.kb())},Ph.kb=function(){Kv(this)},Ph.isActive=function(){return!!this.g},Ph.da=function(){try{return 2<Hv(this)?this.g.status:-1}catch(Sv){return-1}},Ph.ja=function(){try{return this.g?this.g.responseText:""}catch(Sv){return""}},Ph.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Fv(t)}},Ph.Ia=function(){return this.m},Ph.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Ph=Xv.prototype).ra=8,Ph.H=1,Ph.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new Op(this,this.l,e),n=this.s;if(this.U&&(n?Ed(n=xd(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=am(this,t,r),tv(i=Jp(this.I),"RID",e),tv(i,"CVER",22),this.F&&tv(i,"X-HTTP-Session-Id",this.F),im(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Yv(n)))+"&"+r:this.o&&$v(i,this.o,n)),_v(this.i,t),this.bb&&tv(i,"TYPE","init"),this.P?(tv(i,"$req",r),tv(i,"SID","null"),t.aa=!0,Fp(t,i,null)):Fp(t,i,r),this.H=2}}else 3==this.H&&(e?rm(this,e):0==this.j.length||bv(this.i)||rm(this))},Ph.Ma=function(){if(this.u=null,cm(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=wp(Bh(this.jb,this),e)}},Ph.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,kp(10),em(this),cm(this))},Ph.ib=function(){null!=this.v&&(this.v=null,em(this),um(this),kp(19))},Ph.pb=function(e){e?(this.l.info("Successfully pinged google.com"),kp(2)):(this.l.info("Failed to ping google.com"),kp(1))},Ph.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ph=ym.prototype).Ba=function(){},Ph.Aa=function(){},Ph.za=function(){},Ph.ya=function(){},Ph.isActive=function(){return!0},Ph.Va=function(){},gm.prototype.g=function(e,t){return new km(e,t)},Kh(km,Vd),km.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;kp(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=vm(e,null,e.Y),nm(e)},km.prototype.close=function(){Zv(this.g)},km.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=qd(e),e=n);t.j.push(new yv(t.fb++,e)),3==t.H&&nm(t)},km.prototype.N=function(){this.g.h=null,delete this.j,Zv(this.g),delete this.g,km.$.N.call(this)},Kh(bm,Np),Kh(wm,Ap),Kh(xm,ym),xm.prototype.Ba=function(){zd(this.g,"a")},xm.prototype.Aa=function(e){zd(this.g,new bm(e))},xm.prototype.za=function(e){zd(this.g,new wm)},xm.prototype.ya=function(){zd(this.g,"b")},Kh(_m,(function(){this.blockSize=-1})),_m.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},_m.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Em(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Em(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Em(this,r),i=0;break}}this.h=i,this.i+=t},_m.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Sm={};function Tm(e){return-128<=e&&128>e?function(e,t){var n=Sm;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Im([0|e],0>e?-1:0)})):new Im([0|e],0>e?-1:0)}function Cm(e){if(isNaN(e)||!isFinite(e))return Am;if(0>e)return Lm(Cm(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Nm;return new Im(t,0)}var Nm=4294967296,Am=Tm(0),Pm=Tm(1),Om=Tm(16777216);function Rm(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Dm(e){return-1==e.h}function Lm(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Im(n,~e.h).add(Pm)}function Mm(e,t){return e.add(Lm(t))}function Fm(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function jm(e,t){this.g=e,this.h=t}function Um(e,t){if(Rm(t))throw Error("division by zero");if(Rm(e))return new jm(Am,Am);if(Dm(e))return t=Um(Lm(e),t),new jm(Lm(t.g),Lm(t.h));if(Dm(t))return t=Um(e,Lm(t)),new jm(Lm(t.g),t.h);if(30<e.g.length){if(Dm(e)||Dm(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Pm,r=t;0>=r.X(e);)n=Vm(n),r=Vm(r);var i=zm(n,1),a=zm(r,1);for(r=zm(r,2),n=zm(n,2);!Rm(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=zm(r,1),n=zm(n,1)}return t=Mm(e,i.R(t)),new jm(i,t)}for(i=Am;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Cm(n)).R(t);Dm(o)||0<o.X(e);)o=(a=Cm(n-=r)).R(t);Rm(a)&&(a=Pm),i=i.add(a),e=Mm(e,o)}return new jm(i,e)}function Vm(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Im(n,e.h)}function zm(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Im(i,e.h)}(Ph=Im.prototype).ea=function(){if(Dm(this))return-Lm(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Nm+r)*t,t*=Nm}return e},Ph.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Rm(this))return"0";if(Dm(this))return"-"+Lm(this).toString(e);for(var t=Cm(Math.pow(e,6)),n=this,r="";;){var i=Um(n,t).g,a=((0<(n=Mm(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Rm(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Ph.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Ph.X=function(e){return Dm(e=Mm(this,e))?-1:Rm(e)?0:1},Ph.abs=function(){return Dm(this)?Lm(this):this},Ph.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Im(n,-2147483648&n[n.length-1]?-1:0)},Ph.R=function(e){if(Rm(this)||Rm(e))return Am;if(Dm(this))return Dm(e)?Lm(this).R(Lm(e)):Lm(Lm(this).R(e));if(Dm(e))return Lm(this.R(Lm(e)));if(0>this.X(Om)&&0>e.X(Om))return Cm(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,Fm(n,2*r+2*i),n[2*r+2*i+1]+=a*s,Fm(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,Fm(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,Fm(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Im(n,0)},Ph.gb=function(e){return Um(this,e).h},Ph.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Im(n,this.h&e.h)},Ph.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Im(n,this.h|e.h)},Ph.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Im(n,this.h^e.h)},gm.prototype.createWebChannel=gm.prototype.g,km.prototype.send=km.prototype.u,km.prototype.open=km.prototype.m,km.prototype.close=km.prototype.close,xp.NO_ERROR=0,xp.TIMEOUT=8,xp.HTTP_ERROR=6,_p.COMPLETE="complete",Sp.EventType=Cp,Cp.OPEN="a",Cp.CLOSE="b",Cp.ERROR="c",Cp.MESSAGE="d",Vd.prototype.listen=Vd.prototype.O,jv.prototype.listenOnce=jv.prototype.P,jv.prototype.getLastError=jv.prototype.Sa,jv.prototype.getLastErrorCode=jv.prototype.Ia,jv.prototype.getStatus=jv.prototype.da,jv.prototype.getResponseJson=jv.prototype.Wa,jv.prototype.getResponseText=jv.prototype.ja,jv.prototype.send=jv.prototype.ha,jv.prototype.setWithCredentials=jv.prototype.Oa,_m.prototype.digest=_m.prototype.l,_m.prototype.reset=_m.prototype.reset,_m.prototype.update=_m.prototype.j,Im.prototype.add=Im.prototype.add,Im.prototype.multiply=Im.prototype.R,Im.prototype.modulo=Im.prototype.gb,Im.prototype.compare=Im.prototype.X,Im.prototype.toNumber=Im.prototype.ea,Im.prototype.toString=Im.prototype.toString,Im.prototype.getBits=Im.prototype.D,Im.fromNumber=Cm,Im.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Lm(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Cm(Math.pow(n,8)),i=Am,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=Cm(Math.pow(n,o)),i=i.R(o).add(Cm(u))):i=(i=i.R(r)).add(Cm(u))}return i};var Bm=Rh.createWebChannelTransport=function(){return new gm},qm=Rh.getStatEventTarget=function(){return vp()},Km=Rh.ErrorCode=xp,Wm=Rh.EventType=_p,Gm=Rh.Event=dp,Hm=Rh.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Qm=Rh.FetchXmlHttpFactory=Pv,Ym=Rh.WebChannel=Sp,$m=Rh.XhrIo=jv,Jm=Rh.Md5=_m,Xm=Rh.Integer=Im,Zm="@firebase/firestore",ey=function(){function e(t){On(this,e),this.uid=t}return Dn(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();ey.UNAUTHENTICATED=new ey(null),ey.GOOGLE_CREDENTIALS=new ey("google-credentials-uid"),ey.FIRST_PARTY=new ey("first-party-uid"),ey.MOCK_USER=new ey("mock-user");var ty="10.2.0",ny=new Or("@firebase/firestore");function ry(){return ny.logLevel}function iy(e){if(ny.logLevel<=Ir.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(uy);ny.debug.apply(ny,["Firestore (".concat(ty,"): ").concat(e)].concat(br(i)))}}function ay(e){if(ny.logLevel<=Ir.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(uy);ny.error.apply(ny,["Firestore (".concat(ty,"): ").concat(e)].concat(br(i)))}}function oy(e){if(ny.logLevel<=Ir.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(uy);ny.warn.apply(ny,["Firestore (".concat(ty,"): ").concat(e)].concat(br(i)))}}function uy(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function sy(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(ty,") INTERNAL ASSERTION FAILED: ")+e;throw ay(t),new Error(t)}function cy(e,t){e||sy()}function ly(e,t){return e}var fy={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},hy=function(e){Fn(n,e);var t=Vn(n);function n(e,r){var i;return On(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Dn(n)}(ar),dy=Dn((function e(){var t=this;On(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),py=Dn((function e(t,n){On(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),vy=function(){function e(){On(this,e)}return Dn(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ey.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),my=function(){function e(t){On(this,e),this.token=t,this.changeListener=null}return Dn(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),yy=function(){function e(t){On(this,e),this.t=t,this.currentUser=ey.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Dn(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new dy;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new dy,e.enqueueRetryable((function(){return i(n.currentUser)}))};var u=function(){var t=a;e.enqueueRetryable(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},c=function(e){iy("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),u()};this.t.onInit((function(e){return c(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?c(e):(iy("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new dy)}}),0),u()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(iy("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(cy("string"==typeof n.accessToken),new py(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return cy(null===e||"string"==typeof e),new ey(e)}}]),e}(),gy=function(){function e(t,n,r){On(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=ey.FIRST_PARTY,this.I=new Map}return Dn(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),ky=function(){function e(t,n,r){On(this,e),this.l=t,this.h=n,this.P=r}return Dn(e,[{key:"getToken",value:function(){return Promise.resolve(new gy(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ey.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),by=Dn((function e(t){On(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),wy=function(){function e(t){On(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return Dn(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&iy("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,iy("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){iy("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):iy("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(cy("string"==typeof t.token),e.R=t.token,new by(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function xy(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var _y=function(){function e(){On(this,e)}return Dn(e,null,[{key:"V",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=xy(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Ey(e,t){return e<t?-1:e>t?1:0}function Iy(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Sy(e){return e+"\0"}var Ty=function(){function e(t,n){if(On(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new hy(fy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new hy(fy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new hy(fy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new hy(fy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Dn(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Ey(this.nanoseconds,e.nanoseconds):Ey(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Cy=function(){function e(t){On(this,e),this.timestamp=t}return Dn(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Ty(0,0))}},{key:"max",value:function(){return new e(new Ty(253402300799,999999999))}}]),e}(),Ny=function(){function e(t,n,r){On(this,e),void 0===n?n=0:n>t.length&&sy(),void 0===r?r=t.length-n:r>t.length-n&&sy(),this.segments=t,this.offset=n,this.len=r}return Dn(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Ay=function(e){Fn(n,e);var t=Vn(n);function n(){return On(this,n),t.apply(this,arguments)}return Dn(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new hy(fy.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,br(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ny),Py=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Oy=function(e){Fn(n,e);var t=Vn(n);function n(){return On(this,n),t.apply(this,arguments)}return Dn(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Py.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new hy(fy.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new hy(fy.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new hy(fy.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new hy(fy.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ny),Ry=function(){function e(t){On(this,e),this.path=t}return Dn(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Ay.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Ay.fromString(t))}},{key:"fromName",value:function(t){return new e(Ay.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Ay.emptyPath())}},{key:"comparator",value:function(e,t){return Ay.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Ay(t.slice()))}}]),e}(),Dy=Dn((function e(t,n,r,i){On(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Ly(e){return e.fields.find((function(e){return 2===e.kind}))}function My(e){return e.fields.filter((function(e){return 2!==e.kind}))}Dy.UNKNOWN_ID=-1;var Fy=Dn((function e(t,n){On(this,e),this.fieldPath=t,this.kind=n}));var jy=function(){function e(t,n){On(this,e),this.sequenceNumber=t,this.offset=n}return Dn(e,null,[{key:"empty",value:function(){return new e(0,zy.min())}}]),e}();function Uy(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Cy.fromTimestamp(1e9===r?new Ty(n+1,0):new Ty(n,r));return new zy(i,Ry.empty(),t)}function Vy(e){return new zy(e.readTime,e.key,-1)}var zy=function(){function e(t,n,r){On(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Dn(e,null,[{key:"min",value:function(){return new e(Cy.min(),Ry.empty(),-1)}},{key:"max",value:function(){return new e(Cy.max(),Ry.empty(),-1)}}]),e}();function By(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Ry.comparator(e.documentKey,t.documentKey))?n:Ey(e.largestBatchId,t.largestBatchId)}var qy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ky=function(){function e(){On(this,e),this.onCommittedListeners=[]}return Dn(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Wy(e){return Gy.apply(this,arguments)}function Gy(){return(Gy=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===fy.FAILED_PRECONDITION&&t.message===qy){e.next=2;break}throw t;case 2:iy("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hy=function(){function e(t){var n=this;On(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Dn(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&sy(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Ln(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Qy=function(){function e(t,n){var r=this;On(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.m=new dy,this.transaction.oncomplete=function(){r.m.resolve()},this.transaction.onabort=function(){n.error?r.m.reject(new Jy(t,n.error)):r.m.resolve()},this.transaction.onerror=function(e){var n=ng(e.target.error);r.m.reject(new Jy(t,n))}}return Dn(e,[{key:"g",get:function(){return this.m.promise}},{key:"abort",value:function(e){e&&this.m.reject(e),this.aborted||(iy("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"p",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Zy(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Jy(n,t)}}}]),e}(),Yy=function(){function e(t,n,r){On(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(Zn())&&ay("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Dn(e,[{key:"N",value:function(){var e=s(o().mark((function e(t){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return iy("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Jy(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new hy(fy.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new hy(fy.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Jy(t,n))},i.onupgradeneeded=function(e){iy("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.B(t,i.transaction,e.oldVersion,n.version).next((function(){iy("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.L&&(this.db.onversionchange=function(e){return n.L(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"k",value:function(e){this.L=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=s(o().mark((function e(t,n,r,i){var a,u,s,c,l=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,u=0,s=o().mark((function e(){var n,s,c,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++u,e.prev=1,e.next=4,l.N(t);case 4:return l.db=e.sent,n=Qy.open(l.db,t,a?"readonly":"readwrite",r),s=i(n).next((function(e){return n.p(),e})).catch((function(e){return n.abort(e),Hy.reject(e)})).toPromise(),s.catch((function(){})),e.next=9,n.g;case 9:return e.t0=s,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),c=e.t1,f="FirebaseError"!==c.name&&u<3,iy("SimpleDb","Transaction failed with error:",c.message,"Retrying:",f),l.close(),f){e.next=18;break}return e.abrupt("return",{v:Promise.reject(c)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(s(),"t0",4);case 4:if(!(c=e.t0)){e.next=7;break}return e.abrupt("return",c.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return iy("SimpleDb","Removing database:",e),eg(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"v",value:function(){if(!ir())return!1;if(e.C())return!0;var t=Zn(),n=e.D(t),r=0<n&&n<10,i=e.F(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/keymate",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyCYKdCOGyJlFox9USViM1j-DZhl2WBAw5I",REACT_APP_FIREBASE_APP_ID:"1:258275383022:web:3e032ec110250fdec385ff",REACT_APP_FIREBASE_AUTH_DOMAIN:"keymate-827d7.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://keymate-827d7-default-rtdb.europe-west1.firebasedatabase.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"258275383022",REACT_APP_FIREBASE_PROJECT_ID:"keymate-827d7",REACT_APP_FIREBASE_STORAGE_BUCKET:"keymate-827d7.appspot.com"})||void 0===e?void 0:e.M)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"F",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),$y=function(){function e(t){On(this,e),this.q=t,this.K=!1,this.$=null}return Dn(e,[{key:"isDone",get:function(){return this.K}},{key:"U",get:function(){return this.$}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.K=!0}},{key:"W",value:function(e){this.$=e}},{key:"delete",value:function(){return eg(this.q.delete())}}]),e}(),Jy=function(e){Fn(n,e);var t=Vn(n);function n(e,r){var i;return On(this,n),(i=t.call(this,fy.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Dn(n)}(hy);function Xy(e){return"IndexedDbTransactionError"===e.name}var Zy=function(){function e(t){On(this,e),this.store=t}return Dn(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(iy("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(iy("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),eg(n)}},{key:"add",value:function(e){return iy("SimpleDb","ADD",this.store.name,e,e),eg(this.store.add(e))}},{key:"get",value:function(e){var t=this;return eg(this.store.get(e)).next((function(n){return void 0===n&&(n=null),iy("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return iy("SimpleDb","DELETE",this.store.name,e),eg(this.store.delete(e))}},{key:"count",value:function(){return iy("SimpleDb","COUNT",this.store.name),eg(this.store.count())}},{key:"G",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.j(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Hy((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Hy((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){iy("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.j(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.j(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new Hy((function(n,r){t.onerror=function(e){var t=ng(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"j",value:function(e,t){var n=[];return new Hy((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new $y(i),o=t(i.primaryKey,i.value,a);if(o instanceof Hy){var u=o.catch((function(e){return a.done(),Hy.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return Hy.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function eg(e){return new Hy((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=ng(e.target.error);n(t)}}))}var tg=!1;function ng(e){var t=Yy.D(Zn());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new hy("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return tg||(tg=!0,setTimeout((function(){throw r}),0)),r}}return e}var rg=function(){function e(t,n){On(this,e),this.asyncQueue=t,this.ee=n,this.task=null}return Dn(e,[{key:"start",value:function(){this.te(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"te",value:function(e){var t=this;iy("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=iy,e.t1="Documents written: ",e.next=6,t.ee.ne();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Xy(e.t4)){e.next=17;break}iy("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Wy(e.t4);case 19:return e.next=21,t.te(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),ig=function(){function e(t,n){On(this,e),this.localStore=t,this.persistence=n}return Dn(e,[{key:"ne",value:function(){var e=s(o().mark((function e(){var t,n=this,r=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.re(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"re",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Hy.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return iy("IndexBackiller","Processing collection: ".concat(t)),n.ie(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"ie",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.se(i,n)})).next((function(n){return iy("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"se",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Vy(t);By(r,n)>0&&(n=r)})),new zy(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),ag=function(){function e(t,n){var r=this;On(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.oe(e)},this._e=function(e){return n.writeSequenceNumber(e)})}return Dn(e,[{key:"oe",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this._e&&this._e(e),e}}]),e}();function og(e){return null==e}function ug(e){return 0===e&&1/e==-1/0}function sg(e){return"number"==typeof e&&Number.isInteger(e)&&!ug(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function cg(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=fg(t)),t=lg(e.get(n),t);return fg(t)}function lg(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function fg(e){return e+"\x01\x01"}function hg(e){var t=e.length;if(cy(t>=2),2===t)return cy("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Ay.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&sy(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:sy()}a=o+2}return new Ay(r)}ag.ae=-1;var dg=["userId","batchId"];function pg(e,t){return[e,cg(t)]}function vg(e,t,n){return[e,cg(t),n]}var mg={},yg=["prefixPath","collectionGroup","readTime","documentId"],gg=["prefixPath","collectionGroup","documentId"],kg=["collectionGroup","readTime","prefixPath","documentId"],bg=["canonicalId","targetId"],wg=["targetId","path"],xg=["path","targetId"],_g=["collectionId","parent"],Eg=["indexId","uid"],Ig=["uid","sequenceNumber"],Sg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Tg=["indexId","uid","orderedDocumentKey"],Cg=["userId","collectionPath","documentId"],Ng=["userId","collectionPath","largestBatchId"],Ag=["userId","collectionGroup","largestBatchId"],Pg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Og=[].concat(br(Pg),["documentOverlays"]),Rg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Dg=Rg,Lg=[].concat(Dg,["indexConfiguration","indexState","indexEntries"]),Mg=function(e){Fn(n,e);var t=Vn(n);function n(e,r){var i;return On(this,n),(i=t.call(this)).ue=e,i.currentSequenceNumber=r,i}return Dn(n)}(Ky);function Fg(e,t){var n=ly(e);return Yy.O(n.ue,t)}function jg(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ug(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Vg(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var zg=function(){function e(t,n){On(this,e),this.comparator=t,this.root=n||qg.EMPTY}return Dn(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,qg.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,qg.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Bg(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Bg(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Bg(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Bg(this.root,e,this.comparator,!0)}}]),e}(),Bg=function(){function e(t,n,r,i){On(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Dn(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),qg=function(){function e(t,n,r,i,a){On(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Dn(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw sy();if(this.right.isRed())throw sy();var e=this.left.check();if(e!==this.right.check())throw sy();return e+(this.isRed()?0:1)}}]),e}();qg.EMPTY=null,qg.RED=!0,qg.BLACK=!1,qg.EMPTY=new(function(){function e(){On(this,e),this.size=0}return Dn(e,[{key:"key",get:function(){throw sy()}},{key:"value",get:function(){throw sy()}},{key:"color",get:function(){throw sy()}},{key:"left",get:function(){throw sy()}},{key:"right",get:function(){throw sy()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new qg(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Kg=function(){function e(t){On(this,e),this.comparator=t,this.data=new zg(this.comparator)}return Dn(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Wg(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Wg(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Wg=function(){function e(t){On(this,e),this.iter=t}return Dn(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Gg(e){return e.hasNext()?e.getNext():void 0}var Hg=function(){function e(t){On(this,e),this.fields=t,t.sort(Oy.comparator)}return Dn(e,[{key:"unionWith",value:function(t){var n,r=new Kg(Oy.comparator),i=Ln(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=Ln(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Ln(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Iy(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Qg=function(e){Fn(n,e);var t=Vn(n);function n(){var e;return On(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return Dn(n)}(Bn(Error));var Yg=function(e){function t(e){On(this,t),this.binaryString=e}return Dn(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Ey(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Qg("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Yg.EMPTY_BYTE_STRING=new Yg("");var $g=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jg(e){if(cy(!!e),"string"==typeof e){var t=0,n=$g.exec(e);if(cy(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Xg(e.seconds),nanos:Xg(e.nanos)}}function Xg(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Zg(e){return"string"==typeof e?Yg.fromBase64String(e):Yg.fromUint8Array(e)}function ek(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function tk(e){var t=e.mapValue.fields.__previous_value__;return ek(t)?tk(t):t}function nk(e){var t=Jg(e.mapValue.fields.__local_write_time__.timestampValue);return new Ty(t.seconds,t.nanos)}var rk=Dn((function e(t,n,r,i,a,o,u,s,c){On(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),ik=function(){function e(t,n){On(this,e),this.projectId=t,this.database=n||"(default)"}return Dn(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),ak={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ok={nullValue:"NULL_VALUE"};function uk(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ek(e)?4:wk(e)?9007199254740991:10:sy()}function sk(e,t){if(e===t)return!0;var n=uk(e);if(n!==uk(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return nk(e).isEqual(nk(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Jg(e.timestampValue),r=Jg(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Zg(e.bytesValue).isEqual(Zg(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Xg(e.geoPointValue.latitude)===Xg(t.geoPointValue.latitude)&&Xg(e.geoPointValue.longitude)===Xg(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Xg(e.integerValue)===Xg(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Xg(e.doubleValue),r=Xg(t.doubleValue);return n===r?ug(n)===ug(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Iy(e.arrayValue.values||[],t.arrayValue.values||[],sk);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(jg(n)!==jg(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!sk(n[i],r[i])))return!1;return!0}(e,t);default:return sy()}}function ck(e,t){return void 0!==(e.values||[]).find((function(e){return sk(e,t)}))}function lk(e,t){if(e===t)return 0;var n=uk(e),r=uk(t);if(n!==r)return Ey(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ey(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Xg(e.integerValue||e.doubleValue),r=Xg(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return fk(e.timestampValue,t.timestampValue);case 4:return fk(nk(e),nk(t));case 5:return Ey(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Zg(e),r=Zg(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Ey(n[i],r[i]);if(0!==a)return a}return Ey(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Ey(Xg(e.latitude),Xg(t.latitude));return 0!==n?n:Ey(Xg(e.longitude),Xg(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=lk(n[i],r[i]);if(a)return a}return Ey(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===ak.mapValue&&t===ak.mapValue)return 0;if(e===ak.mapValue)return 1;if(t===ak.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Ey(r[o],a[o]);if(0!==u)return u;var s=lk(n[r[o]],i[a[o]]);if(0!==s)return s}return Ey(r.length,a.length)}(e.mapValue,t.mapValue);default:throw sy()}}function fk(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ey(e,t);var n=Jg(e),r=Jg(t),i=Ey(n.seconds,r.seconds);return 0!==i?i:Ey(n.nanos,r.nanos)}function hk(e){return dk(e)}function dk(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Jg(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Zg(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ry.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Ln(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=dk(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Ln(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(dk(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):sy()}function pk(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function vk(e){return!!e&&"integerValue"in e}function mk(e){return!!e&&"arrayValue"in e}function yk(e){return!!e&&"nullValue"in e}function gk(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function kk(e){return!!e&&"mapValue"in e}function bk(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Ug(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=bk(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=bk(e.arrayValue.values[r]);return n}return Object.assign({},e)}function wk(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function xk(e){return"nullValue"in e?ok:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?pk(ik.empty(),Ry.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:sy()}function _k(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?pk(ik.empty(),Ry.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?ak:sy()}function Ek(e,t){var n=lk(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Ik(e,t){var n=lk(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Sk=function(){function e(t){On(this,e),this.value=t}return Dn(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!kk(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bk(t)}},{key:"setAll",value:function(e){var t=this,n=Oy.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=bk(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());kk(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return sk(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];kk(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Ug(t,(function(t,n){return e[t]=n}));var r,i=Ln(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(bk(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Tk(e){var t=[];return Ug(e.fields,(function(e,n){var r=new Oy([e]);if(kk(n)){var i=Tk(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Ln(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Hg(t)}var Ck=function(){function e(t,n,r,i,a,o,u){On(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return Dn(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Cy.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Sk.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Sk.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Cy.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Cy.min(),Cy.min(),Cy.min(),Sk.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Cy.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Cy.min(),Cy.min(),Sk.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Cy.min(),Cy.min(),Sk.empty(),2)}}]),e}(),Nk=Dn((function e(t,n){On(this,e),this.position=t,this.inclusive=n}));function Ak(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Ry.comparator(Ry.fromName(o.referenceValue),n.key):lk(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Pk(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!sk(e.position[n],t.position[n]))return!1;return!0}var Ok=Dn((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";On(this,e),this.field=t,this.dir=n}));function Rk(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Dk=Dn((function e(){On(this,e)})),Lk=function(e){Fn(n,e);var t=Vn(n);function n(e,r,i){var a;return On(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Dn(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(lk(t,this.value)):null!==t&&uk(this.value)===uk(t)&&this.matchesComparison(lk(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return sy()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Wk(e,t,r):"array-contains"===t?new Yk(e,r):"in"===t?new $k(e,r):"not-in"===t?new Jk(e,r):"array-contains-any"===t?new Xk(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Gk(e,n):new Hk(e,n)}}]),n}(Dk),Mk=function(e){Fn(n,e);var t=Vn(n);function n(e,r){var i;return On(this,n),(i=t.call(this)).filters=e,i.op=r,i.ce=null,i}return Dn(n,[{key:"matches",value:function(e){return Fk(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ce||(this.ce=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ce}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.le((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"le",value:function(e){var t,n=Ln(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Dk);function Fk(e){return"and"===e.op}function jk(e){return"or"===e.op}function Uk(e){return Vk(e)&&Fk(e)}function Vk(e){var t,n=Ln(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Mk)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function zk(e){if(e instanceof Lk)return e.field.canonicalString()+e.op.toString()+hk(e.value);if(Uk(e))return e.filters.map((function(e){return zk(e)})).join(",");var t=e.filters.map((function(e){return zk(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Bk(e,t){return e instanceof Lk?function(e,t){return t instanceof Lk&&e.op===t.op&&e.field.isEqual(t.field)&&sk(e.value,t.value)}(e,t):e instanceof Mk?function(e,t){return t instanceof Mk&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Bk(n,t.filters[r])}),!0)}(e,t):void sy()}function qk(e,t){var n=e.filters.concat(t);return Mk.create(n,e.op)}function Kk(e){return e instanceof Lk?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(hk(e.value))}(e):e instanceof Mk?function(e){return e.op.toString()+" {"+e.getFilters().map(Kk).join(" ,")+"}"}(e):"Filter"}var Wk=function(e){Fn(n,e);var t=Vn(n);function n(e,r,i){var a;return On(this,n),(a=t.call(this,e,r,i)).key=Ry.fromName(i.referenceValue),a}return Dn(n,[{key:"matches",value:function(e){var t=Ry.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Lk),Gk=function(e){Fn(n,e);var t=Vn(n);function n(e,r){var i;return On(this,n),(i=t.call(this,e,"in",r)).keys=Qk("in",r),i}return Dn(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Lk),Hk=function(e){Fn(n,e);var t=Vn(n);function n(e,r){var i;return On(this,n),(i=t.call(this,e,"not-in",r)).keys=Qk("not-in",r),i}return Dn(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Lk);function Qk(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Ry.fromName(e.referenceValue)}))}var Yk=function(e){Fn(n,e);var t=Vn(n);function n(e,r){return On(this,n),t.call(this,e,"array-contains",r)}return Dn(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return mk(t)&&ck(t.arrayValue,this.value)}}]),n}(Lk),$k=function(e){Fn(n,e);var t=Vn(n);function n(e,r){return On(this,n),t.call(this,e,"in",r)}return Dn(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&ck(this.value.arrayValue,t)}}]),n}(Lk),Jk=function(e){Fn(n,e);var t=Vn(n);function n(e,r){return On(this,n),t.call(this,e,"not-in",r)}return Dn(n,[{key:"matches",value:function(e){if(ck(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!ck(this.value.arrayValue,t)}}]),n}(Lk),Xk=function(e){Fn(n,e);var t=Vn(n);function n(e,r){return On(this,n),t.call(this,e,"array-contains-any",r)}return Dn(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!mk(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return ck(t.value.arrayValue,e)}))}}]),n}(Lk),Zk=Dn((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;On(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.he=null}));function eb(e){return new Zk(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function tb(e){var t=ly(e);if(null===t.he){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return zk(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),og(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return hk(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return hk(e)})).join(",")),t.he=n}return t.he}function nb(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Rk(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Bk(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Pk(e.startAt,t.startAt)&&Pk(e.endAt,t.endAt)}function rb(e){return Ry.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function ib(e,t){return e.filters.filter((function(e){return e instanceof Lk&&e.field.isEqual(t)}))}function ab(e,t,n){var r,i=ok,a=!0,o=Ln(ib(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=ok,c=!0;switch(u.op){case"<":case"<=":s=xk(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=ok}Ek({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Ek({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function ob(e,t,n){var r,i=ak,a=!0,o=Ln(ib(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=ak,c=!0;switch(u.op){case">=":case">":s=_k(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=ak}Ik({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Ik({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var ub=Dn((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;On(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}));function sb(e,t,n,r,i,a,o,u){return new ub(e,t,n,r,i,a,o,u)}function cb(e){return new ub(e)}function lb(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function fb(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function hb(e){var t,n=Ln(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function db(e){return null!==e.collectionGroup}function pb(e){var t=ly(e);if(null===t.Pe){t.Pe=[];var n=hb(t),r=fb(t);if(null!==n&&null===r)n.isKeyField()||t.Pe.push(new Ok(n)),t.Pe.push(new Ok(Oy.keyField(),"asc"));else{var i,a=!1,o=Ln(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.Pe.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.Pe.push(new Ok(Oy.keyField(),s))}}}return t.Pe}function vb(e){var t=ly(e);return t.Ie||(t.Ie=mb(t,pb(e))),t.Ie}function mb(e,t){if("F"===e.limitType)return eb(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);t=t.map((function(e){var t="desc"===e.dir?"asc":"desc";return new Ok(e.field,t)}));var n=e.endAt?new Nk(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Nk(e.startAt.position,e.startAt.inclusive):null;return eb(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}function yb(e,t){t.getFirstInequalityField(),hb(e);var n=e.filters.concat([t]);return new ub(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function gb(e,t,n){return new ub(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function kb(e,t){return nb(vb(e),vb(t))&&e.limitType===t.limitType}function bb(e){return"".concat(tb(vb(e)),"|lt:").concat(e.limitType)}function wb(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Kk(e)})).join(", "),"]")),og(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return hk(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return hk(e)})).join(",")),"Target(".concat(t,")")}(vb(e)),"; limitType=").concat(e.limitType,")")}function xb(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ry.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Ln(pb(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Ln(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Ak(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,pb(e),t))&&!(e.endAt&&!function(e,t,n){var r=Ak(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,pb(e),t))}(e,t)}function _b(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Eb(e){return function(t,n){var r,i=!1,a=Ln(pb(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Ib(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Ib(e,t,n){var r=e.field.isKeyField()?Ry.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?lk(r,i):sy()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return sy()}}var Sb=function(){function e(t,n){On(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Dn(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Ln(n);try{for(i.s();!(r=i.n()).done;){var a=d(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Ug(this.inner,(function(t,n){var r,i=Ln(n);try{for(i.s();!(r=i.n()).done;){var a=d(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Vg(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Tb=new zg(Ry.comparator);function Cb(){return Tb}var Nb=new zg(Ry.comparator);function Ab(){for(var e=Nb,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Pb(e){var t=Nb;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Ob(){return Db()}function Rb(){return Db()}function Db(){return new Sb((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Lb=new zg(Ry.comparator),Mb=new Kg(Ry.comparator);function Fb(){for(var e=Mb,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var jb=new Kg(Ey);function Ub(){return jb}function Vb(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ug(t)?"-0":t}}function zb(e){return{integerValue:""+e}}function Bb(e,t){return sg(t)?zb(t):Vb(e,t)}var qb=Dn((function e(){On(this,e),this._=void 0}));function Kb(e,t,n){return e instanceof Hb?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ek(t)&&(t=tk(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Qb?Yb(e,t):e instanceof $b?Jb(e,t):function(e,t){var n=Gb(e,t),r=Zb(n)+Zb(e.Ee);return vk(n)&&vk(e.Ee)?zb(r):Vb(e.serializer,r)}(e,t)}function Wb(e,t,n){return e instanceof Qb?Yb(e,t):e instanceof $b?Jb(e,t):n}function Gb(e,t){return e instanceof Xb?function(e){return vk(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var Hb=function(e){Fn(n,e);var t=Vn(n);function n(){return On(this,n),t.apply(this,arguments)}return Dn(n)}(qb),Qb=function(e){Fn(n,e);var t=Vn(n);function n(e){var r;return On(this,n),(r=t.call(this)).elements=e,r}return Dn(n)}(qb);function Yb(e,t){var n,r=ew(t),i=Ln(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return sk(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var $b=function(e){Fn(n,e);var t=Vn(n);function n(e){var r;return On(this,n),(r=t.call(this)).elements=e,r}return Dn(n)}(qb);function Jb(e,t){var n,r=ew(t),i=Ln(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!sk(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Xb=function(e){Fn(n,e);var t=Vn(n);function n(e,r){var i;return On(this,n),(i=t.call(this)).serializer=e,i.Ee=r,i}return Dn(n)}(qb);function Zb(e){return Xg(e.integerValue||e.doubleValue)}function ew(e){return mk(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var tw=Dn((function e(t,n){On(this,e),this.field=t,this.transform=n}));var nw=Dn((function e(t,n){On(this,e),this.version=t,this.transformResults=n})),rw=function(){function e(t,n){On(this,e),this.updateTime=t,this.exists=n}return Dn(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function iw(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var aw=Dn((function e(){On(this,e)}));function ow(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new gw(e.key,rw.none()):new fw(e.key,e.data,rw.none());var n,r=e.data,i=Sk.empty(),a=new Kg(Oy.comparator),o=Ln(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new hw(e.key,i,new Hg(a.toArray()),rw.none())}function uw(e,t,n){e instanceof fw?function(e,t,n){var r=e.value.clone(),i=pw(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof hw?function(e,t,n){if(iw(e.precondition,t)){var r=pw(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(dw(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function sw(e,t,n,r){return e instanceof fw?function(e,t,n,r){if(!iw(e.precondition,t))return n;var i=e.value.clone(),a=vw(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof hw?function(e,t,n,r){if(!iw(e.precondition,t))return n;var i=vw(e.fieldTransforms,r,t),a=t.data;return a.setAll(dw(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return iw(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function cw(e,t){var n,r=null,i=Ln(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Gb(a.transform,o||null);null!=u&&(null===r&&(r=Sk.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function lw(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Iy(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Qb&&t instanceof Qb||e instanceof $b&&t instanceof $b?Iy(e.elements,t.elements,sk):e instanceof Xb&&t instanceof Xb?sk(e.Ee,t.Ee):e instanceof Hb&&t instanceof Hb}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var fw=function(e){Fn(n,e);var t=Vn(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return On(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Dn(n,[{key:"getFieldMask",value:function(){return null}}]),n}(aw),hw=function(e){Fn(n,e);var t=Vn(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return On(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Dn(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(aw);function dw(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function pw(e,t,n){var r=new Map;cy(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Wb(o,u,n[i]))}return r}function vw(e,t,n){var r,i=new Map,a=Ln(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Kb(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var mw,yw,gw=function(e){Fn(n,e);var t=Vn(n);function n(e,r){var i;return On(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Dn(n,[{key:"getFieldMask",value:function(){return null}}]),n}(aw),kw=function(e){Fn(n,e);var t=Vn(n);function n(e,r){var i;return On(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Dn(n,[{key:"getFieldMask",value:function(){return null}}]),n}(aw),bw=function(){function e(t,n,r,i){On(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Dn(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&uw(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Ln(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=sw(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=Ln(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=sw(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Rb();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=ow(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Cy.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Fb())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Iy(this.mutations,e.mutations,(function(e,t){return lw(e,t)}))&&Iy(this.baseMutations,e.baseMutations,(function(e,t){return lw(e,t)}))}}]),e}(),ww=function(){function e(t,n,r,i){On(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Dn(e,null,[{key:"from",value:function(t,n,r){cy(t.mutations.length===r.length);for(var i=Lb,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),xw=function(){function e(t,n){On(this,e),this.largestBatchId=t,this.mutation=n}return Dn(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),_w=Dn((function e(t,n){On(this,e),this.count=t,this.unchangedNames=n}));function Ew(e){switch(e){default:return sy();case fy.CANCELLED:case fy.UNKNOWN:case fy.DEADLINE_EXCEEDED:case fy.RESOURCE_EXHAUSTED:case fy.INTERNAL:case fy.UNAVAILABLE:case fy.UNAUTHENTICATED:return!1;case fy.INVALID_ARGUMENT:case fy.NOT_FOUND:case fy.ALREADY_EXISTS:case fy.PERMISSION_DENIED:case fy.FAILED_PRECONDITION:case fy.ABORTED:case fy.OUT_OF_RANGE:case fy.UNIMPLEMENTED:case fy.DATA_LOSS:return!0}}function Iw(e){if(void 0===e)return ay("GRPC error has no .code"),fy.UNKNOWN;switch(e){case mw.OK:return fy.OK;case mw.CANCELLED:return fy.CANCELLED;case mw.UNKNOWN:return fy.UNKNOWN;case mw.DEADLINE_EXCEEDED:return fy.DEADLINE_EXCEEDED;case mw.RESOURCE_EXHAUSTED:return fy.RESOURCE_EXHAUSTED;case mw.INTERNAL:return fy.INTERNAL;case mw.UNAVAILABLE:return fy.UNAVAILABLE;case mw.UNAUTHENTICATED:return fy.UNAUTHENTICATED;case mw.INVALID_ARGUMENT:return fy.INVALID_ARGUMENT;case mw.NOT_FOUND:return fy.NOT_FOUND;case mw.ALREADY_EXISTS:return fy.ALREADY_EXISTS;case mw.PERMISSION_DENIED:return fy.PERMISSION_DENIED;case mw.FAILED_PRECONDITION:return fy.FAILED_PRECONDITION;case mw.ABORTED:return fy.ABORTED;case mw.OUT_OF_RANGE:return fy.OUT_OF_RANGE;case mw.UNIMPLEMENTED:return fy.UNIMPLEMENTED;case mw.DATA_LOSS:return fy.DATA_LOSS;default:return sy()}}(yw=mw||(mw={}))[yw.OK=0]="OK",yw[yw.CANCELLED=1]="CANCELLED",yw[yw.UNKNOWN=2]="UNKNOWN",yw[yw.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yw[yw.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yw[yw.NOT_FOUND=5]="NOT_FOUND",yw[yw.ALREADY_EXISTS=6]="ALREADY_EXISTS",yw[yw.PERMISSION_DENIED=7]="PERMISSION_DENIED",yw[yw.UNAUTHENTICATED=16]="UNAUTHENTICATED",yw[yw.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yw[yw.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yw[yw.ABORTED=10]="ABORTED",yw[yw.OUT_OF_RANGE=11]="OUT_OF_RANGE",yw[yw.UNIMPLEMENTED=12]="UNIMPLEMENTED",yw[yw.INTERNAL=13]="INTERNAL",yw[yw.UNAVAILABLE=14]="UNAVAILABLE",yw[yw.DATA_LOSS=15]="DATA_LOSS";var Sw=function(){function e(){On(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return Dn(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return Tw}},{key:"getOrCreateInstance",value:function(){return null===Tw&&(Tw=new e),Tw}}]),e}(),Tw=null;function Cw(){return new TextEncoder}var Nw=new Xm([4294967295,4294967295],0);function Aw(e){var t=Cw().encode(e),n=new Jm;return n.update(t),new Uint8Array(n.digest())}function Pw(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Xm([n,r],0),new Xm([i,a],0)]}var Ow=function(){function e(t,n,r){if(On(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Rw("Invalid padding: ".concat(n));if(r<0)throw new Rw("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new Rw("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new Rw("Invalid padding when bitmap length is 0: ".concat(n));this.Ae=8*t.length-n,this.Re=Xm.fromNumber(this.Ae)}return Dn(e,[{key:"Ve",value:function(e,t,n){var r=e.add(t.multiply(Xm.fromNumber(n)));return 1===r.compare(Nw)&&(r=new Xm([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Re).toNumber()}},{key:"me",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.Ae)return!1;for(var t=d(Pw(Aw(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ve(n,r,i);if(!this.me(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.Ae)for(var t=d(Pw(Aw(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ve(n,r,i);this.fe(a)}}},{key:"fe",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),Rw=function(e){Fn(n,e);var t=Vn(n);function n(){var e;return On(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return Dn(n)}(Bn(Error)),Dw=function(){function e(t,n,r,i,a){On(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Dn(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Lw.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Cy.min(),i,new zg(Ey),Cb(),Fb())}}]),e}(),Lw=function(){function e(t,n,r,i,a){On(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Dn(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Fb(),Fb(),Fb())}}]),e}(),Mw=Dn((function e(t,n,r,i){On(this,e),this.ge=t,this.removedTargetIds=n,this.key=r,this.pe=i})),Fw=Dn((function e(t,n){On(this,e),this.targetId=t,this.ye=n})),jw=Dn((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yg.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;On(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Uw=function(){function e(){On(this,e),this.we=0,this.Se=Bw(),this.be=Yg.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}return Dn(e,[{key:"current",get:function(){return this.De}},{key:"resumeToken",get:function(){return this.be}},{key:"Ce",get:function(){return 0!==this.we}},{key:"Fe",get:function(){return this.ve}},{key:"Me",value:function(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}},{key:"xe",value:function(){var e=Fb(),t=Fb(),n=Fb();return this.Se.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:sy()}})),new Lw(this.be,this.De,e,t,n)}},{key:"Oe",value:function(){this.ve=!1,this.Se=Bw()}},{key:"Ne",value:function(e,t){this.ve=!0,this.Se=this.Se.insert(e,t)}},{key:"Be",value:function(e){this.ve=!0,this.Se=this.Se.remove(e)}},{key:"Le",value:function(){this.we+=1}},{key:"ke",value:function(){this.we-=1}},{key:"qe",value:function(){this.ve=!0,this.De=!0}}]),e}(),Vw=function(){function e(t){On(this,e),this.Qe=t,this.Ke=new Map,this.$e=Cb(),this.Ue=zw(),this.We=new zg(Ey)}return Dn(e,[{key:"Ge",value:function(e){var t,n=Ln(e.ge);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.pe&&e.pe.isFoundDocument()?this.ze(r,e.pe):this.je(r,e.key,e.pe)}}catch(u){n.e(u)}finally{n.f()}var i,a=Ln(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.je(o,e.key,e.pe)}}catch(u){a.e(u)}finally{a.f()}}},{key:"He",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Je(n);switch(e.state){case 0:t.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||t.removeTarget(n);break;case 3:t.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:t.Ye(n)&&(t.Ze(n),r.Me(e.resumeToken));break;default:sy()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ke.forEach((function(e,r){n.Ye(r)&&t(r)}))}},{key:"Xe",value:function(e){var t,n=e.targetId,r=e.ye.count,i=this.et(n);if(i){var a=i.target;if(rb(a))if(0===r){var o=new Ry(a.path);this.je(n,o,Ck.newNoDocument(o,Cy.min()))}else cy(1===r);else{var u=this.tt(n);if(u!==r){var s=this.nt(e),c=s?this.rt(s,e,u):1;if(0!==c){this.Ze(n);var l=2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,l)}null===(t=Sw.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n,r,i){var a,o,u,s,c,l,f={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(f.bloomFilter={applied:0===i,hashCount:null!==(a=null==h?void 0:h.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(s=null===(u=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===u?void 0:u.length)&&void 0!==s?s:0,padding:null!==(l=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:function(e){var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),f}(u,e.ye,this.Qe.it(),s,c))}}}}},{key:"nt",value:function(e){var t=e.ye.unchangedNames;if(!t||!t.bits)return null;var n,r,i=t.bits,a=i.bitmap,o=void 0===a?"":a,u=i.padding,s=void 0===u?0:u,c=t.hashCount,l=void 0===c?0:c;try{n=Zg(o).toUint8Array()}catch(e){if(e instanceof Qg)return oy("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new Ow(n,s,l)}catch(e){return oy(e instanceof Rw?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.Ae?null:r}},{key:"rt",value:function(e,t,n){return t.ye.count===n-this.st(e,t.targetId)?0:2}},{key:"st",value:function(e,t){var n=this,r=this.Qe.getRemoteKeysForTarget(t),i=0;return r.forEach((function(r){var a=n.Qe.it(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());e.mightContain(o)||(n.je(t,r,null),i++)})),i}},{key:"ot",value:function(e){var t=this,n=new Map;this.Ke.forEach((function(r,i){var a=t.et(i);if(a){if(r.current&&rb(a.target)){var o=new Ry(a.target.path);null!==t.$e.get(o)||t._t(i,o)||t.je(i,o,Ck.newNoDocument(o,e))}r.Fe&&(n.set(i,r.xe()),r.Oe())}}));var r=Fb();this.Ue.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.et(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$e.forEach((function(t,n){return n.setReadTime(e)}));var i=new Dw(e,n,this.We,this.$e,r);return this.$e=Cb(),this.Ue=zw(),this.We=new zg(Ey),i}},{key:"ze",value:function(e,t){if(this.Ye(e)){var n=this._t(e,t.key)?2:0;this.Je(e).Ne(t.key,n),this.$e=this.$e.insert(t.key,t),this.Ue=this.Ue.insert(t.key,this.ut(t.key).add(e))}}},{key:"je",value:function(e,t,n){if(this.Ye(e)){var r=this.Je(e);this._t(e,t)?r.Ne(t,1):r.Be(t),this.Ue=this.Ue.insert(t,this.ut(t).delete(e)),n&&(this.$e=this.$e.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ke.delete(e)}},{key:"tt",value:function(e){var t=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Le",value:function(e){this.Je(e).Le()}},{key:"Je",value:function(e){var t=this.Ke.get(e);return t||(t=new Uw,this.Ke.set(e,t)),t}},{key:"ut",value:function(e){var t=this.Ue.get(e);return t||(t=new Kg(Ey),this.Ue=this.Ue.insert(e,t)),t}},{key:"Ye",value:function(e){var t=null!==this.et(e);return t||iy("WatchChangeAggregator","Detected inactive target",e),t}},{key:"et",value:function(e){var t=this.Ke.get(e);return t&&t.Ce?null:this.Qe.ct(e)}},{key:"Ze",value:function(e){var t=this;this.Ke.set(e,new Uw),this.Qe.getRemoteKeysForTarget(e).forEach((function(n){t.je(e,n,null)}))}},{key:"_t",value:function(e,t){return this.Qe.getRemoteKeysForTarget(e).has(t)}}]),e}();function zw(){return new zg(Ry.comparator)}function Bw(){return new zg(Ry.comparator)}var qw={asc:"ASCENDING",desc:"DESCENDING"},Kw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ww={and:"AND",or:"OR"},Gw=Dn((function e(t,n){On(this,e),this.databaseId=t,this.useProto3Json=n}));function Hw(e,t){return e.useProto3Json||og(t)?t:{value:t}}function Qw(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Yw(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function $w(e,t){return Qw(e,t.toTimestamp())}function Jw(e){return cy(!!e),Cy.fromTimestamp(function(e){var t=Jg(e);return new Ty(t.seconds,t.nanos)}(e))}function Xw(e,t){return function(e){return new Ay(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Zw(e){var t=Ay.fromString(e);return cy(xx(t)),t}function ex(e,t){return Xw(e.databaseId,t.path)}function tx(e,t){var n=Zw(t);if(n.get(1)!==e.databaseId.projectId)throw new hy(fy.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new hy(fy.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ry(ax(n))}function nx(e,t){return Xw(e.databaseId,t)}function rx(e){var t=Zw(e);return 4===t.length?Ay.emptyPath():ax(t)}function ix(e){return new Ay(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ax(e){return cy(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ox(e,t,n){return{name:ex(e,t),fields:n.value.mapValue.fields}}function ux(e,t,n){var r=tx(e,t.name),i=Jw(t.updateTime),a=t.createTime?Jw(t.createTime):Cy.min(),o=new Sk({mapValue:{fields:t.fields}}),u=Ck.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function sx(e,t){return"found"in t?function(e,t){cy(!!t.found),t.found.name,t.found.updateTime;var n=tx(e,t.found.name),r=Jw(t.found.updateTime),i=t.found.createTime?Jw(t.found.createTime):Cy.min(),a=new Sk({mapValue:{fields:t.found.fields}});return Ck.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){cy(!!t.missing),cy(!!t.readTime);var n=tx(e,t.missing),r=Jw(t.readTime);return Ck.newNoDocument(n,r)}(e,t):sy()}function cx(e,t){var n;if(t instanceof fw)n={update:ox(e,t.key,t.value)};else if(t instanceof gw)n={delete:ex(e,t.key)};else if(t instanceof hw)n={update:ox(e,t.key,t.data),updateMask:wx(t.fieldMask)};else{if(!(t instanceof kw))return sy();n={verify:ex(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Hb)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Qb)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof $b)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Xb)return{fieldPath:t.field.canonicalString(),increment:n.Ee};throw sy()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:$w(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:sy()}(e,t.precondition)),n}function lx(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?rw.updateTime(Jw(e.updateTime)):void 0!==e.exists?rw.exists(e.exists):rw.none()}(t.currentDocument):rw.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)cy("REQUEST_TIME"===t.setToServerValue),n=new Hb;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Qb(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new $b(i)}else"increment"in t?n=new Xb(e,t.increment):sy();var a=Oy.fromServerFormat(t.fieldPath);return new tw(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=tx(e,t.update.name),a=new Sk({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Hg(t.map((function(e){return Oy.fromServerFormat(e)})))}(t.updateMask);return new hw(i,a,o,n,r)}return new fw(i,a,n,r)}if(t.delete){var u=tx(e,t.delete);return new gw(u,n)}if(t.verify){var s=tx(e,t.verify);return new kw(s,n)}return sy()}function fx(e,t){return{documents:[nx(e,t.path)]}}function hx(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=nx(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=nx(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return bx(Mk.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:gx(e.field),direction:vx(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=Hw(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function dx(e){var t=rx(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){cy(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=px(e);return t instanceof Mk&&Uk(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=function(e){return e.map((function(e){return function(e){return new Ok(kx(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var s=null;n.limit&&(s=function(e){var t;return og(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Nk(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Nk(n,t)}(n.endAt)),sb(t,i,u,o,s,"F",c,l)}function px(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=kx(e.unaryFilter.field);return Lk.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=kx(e.unaryFilter.field);return Lk.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=kx(e.unaryFilter.field);return Lk.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=kx(e.unaryFilter.field);return Lk.create(i,"!=",{nullValue:"NULL_VALUE"});default:return sy()}}(e):void 0!==e.fieldFilter?function(e){return Lk.create(kx(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return sy()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Mk.create(e.compositeFilter.filters.map((function(e){return px(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return sy()}}(e.compositeFilter.op))}(e):sy()}function vx(e){return qw[e]}function mx(e){return Kw[e]}function yx(e){return Ww[e]}function gx(e){return{fieldPath:e.canonicalString()}}function kx(e){return Oy.fromServerFormat(e.fieldPath)}function bx(e){return e instanceof Lk?function(e){if("=="===e.op){if(gk(e.value))return{unaryFilter:{field:gx(e.field),op:"IS_NAN"}};if(yk(e.value))return{unaryFilter:{field:gx(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(gk(e.value))return{unaryFilter:{field:gx(e.field),op:"IS_NOT_NAN"}};if(yk(e.value))return{unaryFilter:{field:gx(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gx(e.field),op:mx(e.op),value:e.value}}}(e):e instanceof Mk?function(e){var t=e.getFilters().map((function(e){return bx(e)}));return 1===t.length?t[0]:{compositeFilter:{op:yx(e.op),filters:t}}}(e):sy()}function wx(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function xx(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var _x=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Cy.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Cy.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Yg.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;On(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return Dn(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),Ex=Dn((function e(t){On(this,e),this.lt=t}));function Ix(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Sx(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:ex(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Qw(e,t.version.toTimestamp()),createTime:Qw(e,t.createTime.toTimestamp())}}(e.lt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Tx(t.version)};else{if(!t.isUnknownDocument())return sy();r.unknownDocument={path:n.path.toArray(),version:Tx(t.version)}}return r}function Sx(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Tx(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Cx(e){var t=new Ty(e.seconds,e.nanoseconds);return Cy.fromTimestamp(t)}function Nx(e,t){for(var n=(t.baseMutations||[]).map((function(t){return lx(e.lt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return lx(e.lt,t)})),u=Ty.fromMillis(t.localWriteTimeMs);return new bw(t.batchId,u,n,o)}function Ax(e){var t,n=Cx(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?Cx(e.lastLimboFreeSnapshotVersion):Cy.min();return t=function(e){return void 0!==e.documents}(e.query)?function(e){return cy(1===e.documents.length),vb(cb(rx(e.documents[0])))}(e.query):function(e){return vb(dx(e))}(e.query),new _x(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,n,r,Yg.fromBase64String(e.resumeToken))}function Px(e,t){var n,r=Tx(t.snapshotVersion),i=Tx(t.lastLimboFreeSnapshotVersion);n=rb(t.target)?fx(e.lt,t.target):hx(e.lt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:tb(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Ox(e){var t=dx({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?gb(t,t.limit,"L"):t}function Rx(e,t){return new xw(t.largestBatchId,lx(e.lt,t.overlayMutation))}function Dx(e,t){var n=t.path.lastSegment();return[e,cg(t.path.popLast()),n]}function Lx(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Tx(r.readTime),documentKey:cg(r.documentKey.path),largestBatchId:r.largestBatchId}}var Mx=function(){function e(){On(this,e)}return Dn(e,[{key:"getBundleMetadata",value:function(e,t){return Fx(e).get(t).next((function(e){if(e)return function(e){return{id:e.bundleId,createTime:Cx(e.createTime),version:e.version}}(e)}))}},{key:"saveBundleMetadata",value:function(e,t){return Fx(e).put(function(e){return{bundleId:e.id,createTime:Tx(Jw(e.createTime)),version:e.version}}(t))}},{key:"getNamedQuery",value:function(e,t){return jx(e).get(t).next((function(e){if(e)return function(e){return{name:e.name,query:Ox(e.bundledQuery),readTime:Cx(e.readTime)}}(e)}))}},{key:"saveNamedQuery",value:function(e,t){return jx(e).put(function(e){return{name:e.name,readTime:Tx(Jw(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Fx(e){return Fg(e,"bundles")}function jx(e){return Fg(e,"namedQueries")}var Ux=function(){function e(t,n){On(this,e),this.serializer=t,this.userId=n}return Dn(e,[{key:"getOverlay",value:function(e,t){var n=this;return Vx(e).get(Dx(this.userId,t)).next((function(e){return e?Rx(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Ob();return Hy.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new xw(t,a);i.push(r.Pt(e,o))})),Hy.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(cg(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Vx(e).J("collectionPathOverlayIndex",i))})),Hy.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Ob(),a=cg(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Vx(e).G("collectionPathOverlayIndex",o).next((function(e){var t,n=Ln(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Rx(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Ob(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Vx(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Rx(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Pt",value:function(e,t){return Vx(e).put(function(e,t,n){var r=d(Dx(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:cx(e.lt,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"ht",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Vx(e){return Fg(e,"documentOverlays")}var zx=function(){function e(){On(this,e)}return Dn(e,[{key:"It",value:function(e,t){this.Tt(e,t),t.Et()}},{key:"Tt",value:function(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Xg(e.integerValue));else if("doubleValue"in e){var n=Xg(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),ug(n)?t.At(0):t.At(n))}else if("timestampValue"in e){var r=e.timestampValue;this.dt(t,20),"string"==typeof r?t.Rt(r):(t.Rt("".concat(r.seconds||"")),t.At(r.nanos||0))}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Zg(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?wk(e)?this.dt(t,Number.MAX_SAFE_INTEGER):(this.wt(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.St(e.arrayValue,t),this.ft(t)):sy()}},{key:"Vt",value:function(e,t){this.dt(t,25),this.bt(e,t)}},{key:"bt",value:function(e,t){t.Rt(e)}},{key:"wt",value:function(e,t){var n=e.fields||{};this.dt(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Vt(a,t),this.Tt(n[a],t)}}},{key:"St",value:function(e,t){var n=e.values||[];this.dt(t,50);var r,i=Ln(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.Tt(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"yt",value:function(e,t){var n=this;this.dt(t,37),Ry.fromName(e).path.forEach((function(e){n.dt(t,60),n.bt(e,t)}))}},{key:"dt",value:function(e,t){e.At(t)}},{key:"ft",value:function(e){e.At(2)}}]),e}();function Bx(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function qx(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Bx(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}zx.Dt=new zx;var Kx=function(){function e(){On(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Dn(e,[{key:"vt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ct(n.value),n=t.next();this.Ft()}},{key:"Mt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.xt(n.value),n=t.next();this.Ot()}},{key:"Nt",value:function(e){var t,n=Ln(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{var a=r.codePointAt(0);this.Ct(240|a>>>18),this.Ct(128|63&a>>>12),this.Ct(128|63&a>>>6),this.Ct(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ft()}},{key:"Bt",value:function(e){var t,n=Ln(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.xt(i);else if(i<2048)this.xt(960|i>>>6),this.xt(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.xt(480|i>>>12),this.xt(128|63&i>>>6),this.xt(128|63&i);else{var a=r.codePointAt(0);this.xt(240|a>>>18),this.xt(128|63&a>>>12),this.xt(128|63&a>>>6),this.xt(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ot()}},{key:"Lt",value:function(e){var t=this.kt(e),n=qx(t);this.qt(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Qt",value:function(e){var t=this.kt(e),n=qx(t);this.qt(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Kt",value:function(){this.$t(255),this.$t(255)}},{key:"Ut",value:function(){this.Wt(255),this.Wt(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Gt",value:function(){return this.buffer.slice(0,this.position)}},{key:"kt",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ct",value:function(e){var t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(t)}},{key:"xt",value:function(e){var t=255&e;0===t?(this.Wt(0),this.Wt(255)):255===t?(this.Wt(255),this.Wt(0)):this.Wt(e)}},{key:"Ft",value:function(){this.$t(0),this.$t(1)}},{key:"Ot",value:function(){this.Wt(0),this.Wt(1)}},{key:"$t",value:function(e){this.qt(1),this.buffer[this.position++]=e}},{key:"Wt",value:function(e){this.qt(1),this.buffer[this.position++]=~e}},{key:"qt",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Wx=function(){function e(t){On(this,e),this.zt=t}return Dn(e,[{key:"gt",value:function(e){this.zt.vt(e)}},{key:"Rt",value:function(e){this.zt.Nt(e)}},{key:"At",value:function(e){this.zt.Lt(e)}},{key:"Et",value:function(){this.zt.Kt()}}]),e}(),Gx=function(){function e(t){On(this,e),this.zt=t}return Dn(e,[{key:"gt",value:function(e){this.zt.Mt(e)}},{key:"Rt",value:function(e){this.zt.Bt(e)}},{key:"At",value:function(e){this.zt.Qt(e)}},{key:"Et",value:function(){this.zt.Ut()}}]),e}(),Hx=function(){function e(){On(this,e),this.zt=new Kx,this.jt=new Wx(this.zt),this.Ht=new Gx(this.zt)}return Dn(e,[{key:"seed",value:function(e){this.zt.seed(e)}},{key:"Jt",value:function(e){return 0===e?this.jt:this.Ht}},{key:"Gt",value:function(){return this.zt.Gt()}},{key:"reset",value:function(){this.zt.reset()}}]),e}(),Qx=function(){function e(t,n,r,i){On(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Dn(e,[{key:"Yt",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Yx(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=$x(e.arrayValue,t.arrayValue))?n:0!==(n=$x(e.directionalValue,t.directionalValue))?n:Ry.comparator(e.documentKey,t.documentKey)}function $x(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Jx=function(){function e(t){On(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Zt=t.orderBy,this.Xt=[];var n,r=Ln(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.en=i:this.Xt.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Dn(e,[{key:"tn",value:function(e){cy(e.collectionGroup===this.collectionId);var t=Ly(e);if(void 0!==t&&!this.nn(t))return!1;for(var n=My(e),r=new Set,i=0,a=0;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.en){if(!r.has(this.en.field.canonicalString())){var o=n[i];if(!this.rn(this.en,o)||!this.sn(this.Zt[a++],o))return!1}++i}for(;i<n.length;++i){var u=n[i];if(a>=this.Zt.length||!this.sn(this.Zt[a++],u))return!1}return!0}},{key:"nn",value:function(e){var t,n=Ln(this.Xt);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.rn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"rn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Xx(e){var t,n;if(cy(e instanceof Lk||e instanceof Mk),e instanceof Lk){if(e instanceof $k){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Lk.create(e.field,"==",t)})))||[];return Mk.create(r,"or")}return e}var i=e.filters.map((function(e){return Xx(e)}));return Mk.create(i,e.op)}function Zx(e){if(0===e.getFilters().length)return[];var t=r_(Xx(e));return cy(n_(t)),e_(t)||t_(t)?[t]:t.getFilters()}function e_(e){return e instanceof Lk}function t_(e){return e instanceof Mk&&Uk(e)}function n_(e){return e_(e)||t_(e)||function(e){if(e instanceof Mk&&jk(e)){var t,n=Ln(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!e_(r)&&!t_(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function r_(e){if(cy(e instanceof Lk||e instanceof Mk),e instanceof Lk)return e;if(1===e.filters.length)return r_(e.filters[0]);var t=e.filters.map((function(e){return r_(e)})),n=Mk.create(t,e.op);return n_(n=o_(n))?n:(cy(n instanceof Mk),cy(Fk(n)),cy(n.filters.length>1),n.filters.reduce((function(e,t){return i_(e,t)})))}function i_(e,t){var n;return cy(e instanceof Lk||e instanceof Mk),cy(t instanceof Lk||t instanceof Mk),n=e instanceof Lk?t instanceof Lk?function(e,t){return Mk.create([e,t],"and")}(e,t):a_(e,t):t instanceof Lk?a_(t,e):function(e,t){if(cy(e.filters.length>0&&t.filters.length>0),Fk(e)&&Fk(t))return qk(e,t.getFilters());var n=jk(e)?e:t,r=jk(e)?t:e,i=n.filters.map((function(e){return i_(e,r)}));return Mk.create(i,"or")}(e,t),o_(n)}function a_(e,t){if(Fk(t))return qk(t,e.getFilters());var n=t.filters.map((function(t){return i_(e,t)}));return Mk.create(n,"or")}function o_(e){if(cy(e instanceof Lk||e instanceof Mk),e instanceof Lk)return e;var t=e.getFilters();if(1===t.length)return o_(t[0]);if(Vk(e))return e;var n=t.map((function(e){return o_(e)})),r=[];return n.forEach((function(t){t instanceof Lk?r.push(t):t instanceof Mk&&(t.op===e.op?r.push.apply(r,br(t.filters)):r.push(t))})),1===r.length?r[0]:Mk.create(r,e.op)}var u_=function(){function e(){On(this,e),this.on=new s_}return Dn(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.on.add(t),Hy.resolve()}},{key:"getCollectionParents",value:function(e,t){return Hy.resolve(this.on.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Hy.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Hy.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Hy.resolve(null)}},{key:"getIndexType",value:function(e,t){return Hy.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Hy.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Hy.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Hy.resolve(zy.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Hy.resolve(zy.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Hy.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Hy.resolve()}}]),e}(),s_=function(){function e(){On(this,e),this.index={}}return Dn(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Kg(Ay.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Kg(Ay.comparator)).toArray()}}]),e}(),c_=new Uint8Array(0),l_=function(){function e(t,n){On(this,e),this.user=t,this.databaseId=n,this._n=new s_,this.an=new Sb((function(e){return tb(e)}),(function(e,t){return nb(e,t)})),this.uid=t.uid||""}return Dn(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this._n.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n._n.add(t)}));var a={collectionId:r,parent:cg(i)};return f_(e).put(a)}return Hy.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Sy(t),""],!1,!0);return f_(e).G(r).next((function(e){var r,i=Ln(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(hg(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=d_(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=p_(e);return a.next((function(e){o.put(Lx(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=d_(e),r=p_(e),i=h_(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=h_(e),i=!0,a=new Map;return Hy.forEach(this.un(t),(function(t){return n.cn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Fb(),o=[];return Hy.forEach(a,(function(i,a){iy("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(","))}(i)," to execute ").concat(tb(t)));var u=function(e,t){var n=Ly(t);if(void 0===n)return null;var r,i=Ln(ib(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),s=function(e,t){var n,r=new Map,i=Ln(My(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Ln(ib(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=[],i=!0,a=Ln(My(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ab(e,o.fieldPath,e.startAt):ob(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Nk(r,i)}(a,i),l=function(e,t){var n,r=[],i=!0,a=Ln(My(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ob(e,o.fieldPath,e.endAt):ab(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Nk(r,i)}(a,i),f=n.ln(i,a,c),h=n.ln(i,a,l),d=n.hn(i,a,s),p=n.Pn(i.indexId,u,f,c.inclusive,h,l.inclusive,d);return Hy.forEach(p,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Ry.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Hy.resolve(null)}))}},{key:"un",value:function(e){var t=this.an.get(e);return t||(t=0===e.filters.length?[e]:Zx(Mk.create(e.filters,"and")).map((function(t){return eb(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.an.set(e,t),t)}},{key:"Pn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.In(t[h/c]):c_,f=u.Tn(e,s,n[h%c],r),d=u.En(e,s,i[h%c],a),p=o.map((function(t){return u.Tn(e,s,t,!0)}));l.push.apply(l,br(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"Tn",value:function(e,t,n,r){var i=new Qx(e,Ry.empty(),t,n);return r?i:i.Yt()}},{key:"En",value:function(e,t,n,r){var i=new Qx(e,Ry.empty(),t,n);return r?i.Yt():i}},{key:"cn",value:function(e,t){var n=new Jx(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Ln(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.un(t);return Hy.forEach(i,(function(t){return n.cn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Kg(Oy.comparator),r=!1,i=Ln(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=Ln(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=Ln(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"dn",value:function(e,t){var n,r=new Hx,i=Ln(My(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Jt(a.kind);zx.Dt.It(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Gt()}},{key:"In",value:function(e){var t=new Hx;return zx.Dt.It(e,t.Jt(0)),t.Gt()}},{key:"An",value:function(e,t){var n=new Hx;return zx.Dt.It(pk(this.databaseId,t),n.Jt(function(e){var t=My(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Gt()}},{key:"hn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Hx);var i,a=0,o=Ln(My(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=Ln(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.Rn(t,s.fieldPath)&&mk(c))r=this.Vn(r,s,c);else{var h=f.Jt(s.kind);zx.Dt.It(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.mn(r)}},{key:"ln",value:function(e,t,n){return this.hn(e,t,n.position)}},{key:"mn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Gt();return t}},{key:"Vn",value:function(e,t,n){var r,i=br(e),a=[],o=Ln(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=Ln(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Hx;f.seed(l.Gt()),zx.Dt.It(s,f.Jt(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"Rn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Lk&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=d_(e),i=p_(e);return(t?r.G("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.G()).next((function(e){var t=[];return Hy.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new jy(t.sequenceNumber,new zy(Cx(t.readTime),new Ry(hg(t.documentKey)),t.largestBatchId)):jy.empty(),r=e.fields.map((function(e){var t=d(e,2),n=t[0],r=t[1];return new Fy(Oy.fromServerFormat(n),r)}));return new Dy(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Ey(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=d_(e),a=p_(e);return this.fn(e).next((function(e){return i.G("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Hy.forEach(t,(function(t){return a.put(Lx(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Hy.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Hy.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Hy.forEach(a,(function(r){return n.gn(e,t,r).next((function(t){var a=n.pn(i,r);return t.isEqual(a)?Hy.resolve():n.yn(e,i,r,t,a)}))}))}))}))}},{key:"wn",value:function(e,t,n,r){return h_(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Sn",value:function(e,t,n,r){return h_(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(n,t.key),t.key.path.toArray()])}},{key:"gn",value:function(e,t,n){var r=h_(e),i=new Kg(Yx);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.An(n,t)])},(function(e,r){i=i.add(new Qx(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"pn",value:function(e,t){var n=new Kg(Yx),r=this.dn(t,e);if(null==r)return n;var i=Ly(t);if(null!=i){var a=e.data.field(i.fieldPath);if(mk(a)){var o,u=Ln(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Qx(t.indexId,e.key,this.In(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Qx(t.indexId,e.key,c_,r));return n}},{key:"yn",value:function(e,t,n,r,i){var a=this;iy("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Gg(a),s=Gg(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Gg(o)):l?(i(u),u=Gg(a)):(u=Gg(a),s=Gg(o))}}(r,i,Yx,(function(r){o.push(a.wn(e,t,n,r))}),(function(r){o.push(a.Sn(e,t,n,r))})),Hy.waitFor(o)}},{key:"fn",value:function(e){var t=1;return p_(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Yx(e,t)})).filter((function(e,t,n){return!t||0!==Yx(e,n[t-1])}));var r=[];r.push(e);var i,a=Ln(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Yx(o,e),s=Yx(o,t);if(0===u)r[0]=e.Yt();else if(u>0&&s<0)r.push(o),r.push(o.Yt());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,c_,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,c_,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"bn",value:function(e,t){return Yx(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(v_)}},{key:"getMinOffset",value:function(e,t){var n=this;return Hy.mapArray(this.un(t),(function(t){return n.cn(e,t).next((function(e){return e||sy()}))})).next(v_)}}]),e}();function f_(e){return Fg(e,"collectionParents")}function h_(e){return Fg(e,"indexEntries")}function d_(e){return Fg(e,"indexConfiguration")}function p_(e){return Fg(e,"indexState")}function v_(e){cy(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;By(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new zy(t.readTime,t.documentKey,n)}var m_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},y_=function(){function e(t,n,r){On(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Dn(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function g_(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){cy(1===u)})));var c,l=[],f=Ln(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=vg(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Hy.waitFor(a).next((function(){return l}))}function k_(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw sy();t=e.noDocument}return JSON.stringify(t).length}y_.DEFAULT_COLLECTION_PERCENTILE=10,y_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,y_.DEFAULT=new y_(41943040,y_.DEFAULT_COLLECTION_PERCENTILE,y_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),y_.DISABLED=new y_(-1,0,0);var b_=function(){function e(t,n,r,i){On(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}return Dn(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return x_(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=__(e),o=x_(e);return o.add({}).next((function(u){cy("number"==typeof u);var s,c=new bw(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return cx(e.lt,t)})),i=n.mutations.map((function(t){return cx(e.lt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Kg((function(e,t){return Ey(e.canonicalString(),t.canonicalString())})),d=Ln(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=vg(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,mg))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Dn[u]=c.keys()})),Hy.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return x_(e).get(t).next((function(e){return e?(cy(e.userId===n.userId),Nx(n.serializer,e)):null}))}},{key:"vn",value:function(e,t){var n=this;return this.Dn[t]?Hy.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Dn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return x_(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(cy(t.batchId>=r),a=Nx(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return x_(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return x_(e).G("userMutationsIndex",n).next((function(e){return e.map((function(e){return Nx(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=pg(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return __(e).Z({range:i},(function(r,i,o){var u=d(r,3),s=u[0],c=u[1],l=u[2],f=hg(c);if(s===n.userId&&t.path.isEqual(f))return x_(e).get(l).next((function(e){if(!e)throw sy();cy(e.userId===n.userId),a.push(Nx(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Kg(Ey),i=[];return t.forEach((function(t){var a=pg(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=__(e).Z({range:o},(function(e,i,a){var o=d(e,3),u=o[0],s=o[1],c=o[2],l=hg(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Hy.waitFor(i).next((function(){return n.Cn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=pg(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Kg(Ey);return __(e).Z({range:o},(function(e,t,a){var o=d(e,3),s=o[0],c=o[1],l=o[2],f=hg(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.Cn(e,u)}))}},{key:"Cn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(x_(e).get(t).next((function(e){if(null===e)throw sy();cy(e.userId===n.userId),r.push(Nx(n.serializer,e))})))})),Hy.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return g_(e.ue,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Fn(t.batchId)})),Hy.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Fn",value:function(e){delete this.Dn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Hy.resolve();var r=IDBKeyRange.lowerBound(function(e){return[e]}(t.userId)),i=[];return __(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=hg(e[1]);i.push(a)}else r.done()})).next((function(){cy(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return w_(e,this.userId,t)}},{key:"Mn",value:function(e){var t=this;return E_(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"ht",value:function(t,n,r,i){return cy(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function w_(e,t,n){var r=pg(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return __(e).Z({range:a,Y:!0},(function(e,n,r){var a=d(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function x_(e){return Fg(e,"mutations")}function __(e){return Fg(e,"documentMutations")}function E_(e){return Fg(e,"mutationQueues")}var I_=function(){function e(t){On(this,e),this.xn=t}return Dn(e,[{key:"next",value:function(){return this.xn+=2,this.xn}}],[{key:"On",value:function(){return new e(0)}},{key:"Nn",value:function(){return new e(-1)}}]),e}(),S_=function(){function e(t,n){On(this,e),this.referenceDelegate=t,this.serializer=n}return Dn(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Bn(e).next((function(n){var r=new I_(n.highestTargetId);return n.highestTargetId=r.next(),t.Ln(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Bn(e).next((function(e){return Cy.fromTimestamp(new Ty(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Bn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Bn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Ln(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.kn(e,t).next((function(){return n.Bn(e).next((function(r){return r.targetCount+=1,n.qn(t,r),n.Ln(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.kn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return T_(e).delete(t.targetId)})).next((function(){return n.Bn(e)})).next((function(t){return cy(t.targetCount>0),t.targetCount-=1,n.Ln(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return T_(e).Z((function(o,u){var s=Ax(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Hy.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return T_(e).Z((function(e,n){var r=Ax(n);t(r)}))}},{key:"Bn",value:function(e){return C_(e).get("targetGlobalKey").next((function(e){return cy(null!==e),e}))}},{key:"Ln",value:function(e,t){return C_(e).put("targetGlobalKey",t)}},{key:"kn",value:function(e,t){return T_(e).put(Px(this.serializer,t))}},{key:"qn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Bn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=tb(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return T_(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Ax(n);nb(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=N_(e);return t.forEach((function(t){var o=cg(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Hy.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=N_(e);return Hy.forEach(t,(function(t){var a=cg(t.path);return Hy.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=N_(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=N_(e),i=Fb();return r.Z({range:n,Y:!0},(function(e,t,n){var r=hg(e[1]),a=new Ry(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=cg(t.path),r=IDBKeyRange.bound([n],[Sy(n)],!1,!0),i=0;return N_(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=d(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ct",value:function(e,t){return T_(e).get(t).next((function(e){return e?Ax(e):null}))}}]),e}();function T_(e){return Fg(e,"targets")}function C_(e){return Fg(e,"targetGlobal")}function N_(e){return Fg(e,"targetDocuments")}function A_(e,t){var n=d(e,2),r=n[0],i=n[1],a=d(t,2),o=a[0],u=a[1],s=Ey(r,o);return 0===s?Ey(i,u):s}var P_=function(){function e(t){On(this,e),this.Qn=t,this.buffer=new Kg(A_),this.Kn=0}return Dn(e,[{key:"$n",value:function(){return++this.Kn}},{key:"Un",value:function(e){var t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();A_(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),O_=function(){function e(t,n,r){On(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Wn=null}return Dn(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}},{key:"stop",value:function(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}},{key:"started",get:function(){return null!==this.Wn}},{key:"Gn",value:function(e){var t=this;iy("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Wn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Xy(e.t0)){e.next=12;break}iy("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Wy(e.t0);case 14:return e.next=16,t.Gn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),R_=function(){function e(t,n){On(this,e),this.zn=t,this.params=n}return Dn(e,[{key:"calculateTargetCount",value:function(e,t){return this.zn.jn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Hy.resolve(ag.ae);var r=new P_(t);return this.zn.forEachTarget(e,(function(e){return r.Un(e.sequenceNumber)})).next((function(){return n.zn.Hn(e,(function(e){return r.Un(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.zn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.zn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(iy("LruGarbageCollector","Garbage collection skipped; disabled"),Hy.resolve(m_)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(iy("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),m_):n.Jn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.zn.getCacheSize(e)}},{key:"Jn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(iy("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),ry()<=Ir.DEBUG&&iy("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Hy.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function D_(e,t){return new R_(e,t)}var L_=function(){function e(t,n){On(this,e),this.db=t,this.garbageCollector=D_(this,n)}return Dn(e,[{key:"jn",value:function(e){var t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Yn",value:function(e){var t=0;return this.Hn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Hn",value:function(e,t){return this.Zn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return M_(e,n)}},{key:"removeReference",value:function(e,t,n){return M_(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return M_(e,t)}},{key:"Xn",value:function(e,t){return function(e,t){var n=!1;return E_(e).X((function(r){return w_(e,r,t).next((function(e){return e&&(n=!0),Hy.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Zn(e,(function(o,u){if(u<=t){var s=n.Xn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Cy.min()),N_(e).delete(function(e){return[0,cg(e.path)]}(o))}))}));i.push(s)}})).next((function(){return Hy.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return M_(e,t)}},{key:"Zn",value:function(e,t){var n,r=N_(e),i=ag.ae;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=d(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==ag.ae&&t(new Ry(hg(n)),i),i=s,n=u):i=ag.ae})).next((function(){i!==ag.ae&&t(new Ry(hg(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function M_(e,t){return N_(e).put(function(e,t){return{targetId:0,path:cg(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var F_=function(){function e(){On(this,e),this.changes=new Sb((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Dn(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Ck.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Hy.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),j_=function(){function e(t){On(this,e),this.serializer=t}return Dn(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return B_(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return B_(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Sx(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.er(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Ck.newInvalidDocument(t);return B_(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(q_(t))},(function(e,i){r=n.tr(t,i)})).next((function(){return r}))}},{key:"nr",value:function(e,t){var n=this,r={size:0,document:Ck.newInvalidDocument(t)};return B_(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(q_(t))},(function(e,i){r={document:n.tr(t,i),size:k_(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Cb();return this.rr(e,t,(function(e,t){var i=n.tr(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ir",value:function(e,t){var n=this,r=Cb(),i=new zg(Ry.comparator);return this.rr(e,t,(function(e,t){var a=n.tr(e,t);r=r.insert(e,a),i=i.insert(e,k_(t))})).next((function(){return{documents:r,sr:i}}))}},{key:"rr",value:function(e,t,n){if(t.isEmpty())return Hy.resolve();var r=new Kg(W_);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(q_(r.first()),q_(r.last())),a=r.getIterator(),o=a.getNext();return B_(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Ry.fromSegments([].concat(br(t.prefixPath),[t.collectionGroup,t.documentId]));o&&W_(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.W(q_(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Sx(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return B_(e).G(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=Cb(),o=Ln(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.tr(Ry.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(xb(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Cb(),o=K_(t,n),u=K_(t,zy.max());return B_(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.tr(Ry.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new V_(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return z_(e).get("remoteDocumentGlobalKey").next((function(e){return cy(!!e),e}))}},{key:"er",value:function(e,t){return z_(e).put("remoteDocumentGlobalKey",t)}},{key:"tr",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=ux(e.lt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Ry.fromSegments(t.noDocument.path),i=Cx(t.noDocument.readTime);n=Ck.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return sy();var a=Ry.fromSegments(t.unknownDocument.path),o=Cx(t.unknownDocument.version);n=Ck.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Ty(e[0],e[1]);return Cy.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Cy.min()))return n}return Ck.newInvalidDocument(e)}}]),e}();function U_(e){return new j_(e)}var V_=function(e){Fn(n,e);var t=Vn(n);function n(e,r){var i;return On(this,n),(i=t.call(this))._r=e,i.trackRemovals=r,i.ar=new Sb((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Dn(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Kg((function(e,t){return Ey(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.ar.get(a);if(n.push(t._r.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Ix(t._r.serializer,o);i=i.add(a.path.popLast());var c=k_(s);r+=c-u.size,n.push(t._r.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Ix(t._r.serializer,o.convertToNoDocument(Cy.min()));n.push(t._r.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t._r.indexManager.addToCollectionParentIndex(e,r))})),n.push(this._r.updateMetadata(e,r)),Hy.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this._r.nr(e,t).next((function(e){return n.ar.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this._r.ir(e,t).next((function(e){var t=e.documents;return e.sr.forEach((function(e,r){n.ar.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(F_);function z_(e){return Fg(e,"remoteDocumentGlobal")}function B_(e){return Fg(e,"remoteDocumentsV14")}function q_(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function K_(e,t){var n=t.documentKey.path.toArray();return[e,Sx(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function W_(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Ey(n[a],r[a]))return i;return(i=Ey(n.length,r.length))||((i=Ey(n[n.length-2],r[r.length-2]))||Ey(n[n.length-1],r[r.length-1]))}var G_=Dn((function e(t,n){On(this,e),this.overlayedDocument=t,this.mutatedFields=n})),H_=function(){function e(t,n,r,i){On(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return Dn(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&sw(r.mutation,e,Hg.empty(),Ty.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Fb()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fb(),i=Ob();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Ab();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Ob();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Fb())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Cb(),a=Db(),o=Db();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof hw)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),sw(o.mutation,t,o.mutation.getFieldMask(),Ty.now())):a.set(t.key,Hg.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new G_(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Db(),i=new zg((function(e,t){return e-t})),a=Fb();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Ln(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Hg.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Fb()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Rb();c.forEach((function(e){if(!a.has(e)){var n=ow(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Hy.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Ry.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):db(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Hy.resolve(Ob()),u=-1,s=a;return o.next((function(t){return Hy.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Hy.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Fb())})).next((function(e){return{batchId:u,changes:Pb(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Ry(t)).next((function(e){var t=Ab();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Ab();return this.indexManager.getCollectionParents(e,i).next((function(o){return Hy.forEach(o,(function(o){var u=function(e,t){return new ub(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Ck.newInvalidDocument(r)))}));var n=Ab();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&sw(a.mutation,i,Hg.empty(),Ty.now()),xb(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),Q_=function(){function e(t){On(this,e),this.serializer=t,this.ur=new Map,this.cr=new Map}return Dn(e,[{key:"getBundleMetadata",value:function(e,t){return Hy.resolve(this.ur.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Jw(e.createTime)}}(t)),Hy.resolve()}},{key:"getNamedQuery",value:function(e,t){return Hy.resolve(this.cr.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:Ox(e.bundledQuery),readTime:Jw(e.readTime)}}(t)),Hy.resolve()}}]),e}(),Y_=function(){function e(){On(this,e),this.overlays=new zg(Ry.comparator),this.lr=new Map}return Dn(e,[{key:"getOverlay",value:function(e,t){return Hy.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Ob();return Hy.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Pt(e,t,i)})),Hy.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.lr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.lr.delete(n)),Hy.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Ob(),i=t.length+1,a=new Ry(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Hy.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new zg((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Ob(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Ob(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Hy.resolve(s)}},{key:"Pt",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new xw(t,n));var a=this.lr.get(t);void 0===a&&(a=Fb(),this.lr.set(t,a)),this.lr.set(t,a.add(n.key))}}]),e}(),$_=function(){function e(){On(this,e),this.hr=new Kg(J_.Pr),this.Ir=new Kg(J_.Tr)}return Dn(e,[{key:"isEmpty",value:function(){return this.hr.isEmpty()}},{key:"addReference",value:function(e,t){var n=new J_(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}},{key:"Er",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.dr(new J_(e,t))}},{key:"Ar",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Rr",value:function(e){var t=this,n=new Ry(new Ay([])),r=new J_(n,e),i=new J_(n,e+1),a=[];return this.Ir.forEachInRange([r,i],(function(e){t.dr(e),a.push(e.key)})),a}},{key:"Vr",value:function(){var e=this;this.hr.forEach((function(t){return e.dr(t)}))}},{key:"dr",value:function(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}},{key:"mr",value:function(e){var t=new Ry(new Ay([])),n=new J_(t,e),r=new J_(t,e+1),i=Fb();return this.Ir.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new J_(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),J_=function(){function e(t,n){On(this,e),this.key=t,this.gr=n}return Dn(e,null,[{key:"Pr",value:function(e,t){return Ry.comparator(e.key,t.key)||Ey(e.gr,t.gr)}},{key:"Tr",value:function(e,t){return Ey(e.gr,t.gr)||Ry.comparator(e.key,t.key)}}]),e}(),X_=function(){function e(t,n){On(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Kg(J_.Pr)}return Dn(e,[{key:"checkEmpty",value:function(e){return Hy.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new bw(i,t,n,r);this.mutationQueue.push(a);var o,u=Ln(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.yr=this.yr.add(new J_(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Hy.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Hy.resolve(this.wr(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Sr(n),i=r<0?0:r;return Hy.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Hy.resolve(0===this.mutationQueue.length?-1:this.pr-1)}},{key:"getAllMutationBatches",value:function(e){return Hy.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new J_(t,0),i=new J_(t,Number.POSITIVE_INFINITY),a=[];return this.yr.forEachInRange([r,i],(function(e){var t=n.wr(e.gr);a.push(t)})),Hy.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Kg(Ey);return t.forEach((function(e){var t=new J_(e,0),i=new J_(e,Number.POSITIVE_INFINITY);n.yr.forEachInRange([t,i],(function(e){r=r.add(e.gr)}))})),Hy.resolve(this.br(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Ry.isDocumentKey(i)||(i=i.child(""));var a=new J_(new Ry(i),0),o=new Kg(Ey);return this.yr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gr)),!0)}),a),Hy.resolve(this.br(o))}},{key:"br",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.wr(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;cy(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();var r=this.yr;return Hy.forEach(t.mutations,(function(i){var a=new J_(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.yr=r}))}},{key:"Fn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new J_(t,0),r=this.yr.firstAfterOrEqual(n);return Hy.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Hy.resolve()}},{key:"Dr",value:function(e,t){return this.Sr(e)}},{key:"Sr",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"wr",value:function(e){var t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Z_=function(){function e(t){On(this,e),this.vr=t,this.docs=new zg(Ry.comparator),this.size=0}return Dn(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Hy.resolve(n?n.document.mutableCopy():Ck.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Cb();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Ck.newInvalidDocument(e))})),Hy.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Cb(),a=t.path,o=new Ry(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||By(Vy(l),n)<=0||(r.has(l.key)||xb(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Hy.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){sy()}},{key:"Cr",value:function(e,t){return Hy.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new eE(this)}},{key:"getSize",value:function(e){return Hy.resolve(this.size)}}]),e}(),eE=function(e){Fn(n,e);var t=Vn(n);function n(e){var r;return On(this,n),(r=t.call(this))._r=e,r}return Dn(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t._r.addEntry(e,i)):t._r.removeEntry(r)})),Hy.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this._r.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this._r.getEntries(e,t)}}]),n}(F_),tE=function(){function e(t){On(this,e),this.persistence=t,this.Fr=new Sb((function(e){return tb(e)}),nb),this.lastRemoteSnapshotVersion=Cy.min(),this.highestTargetId=0,this.Mr=0,this.Or=new $_,this.targetCount=0,this.Nr=I_.On()}return Dn(e,[{key:"forEachTarget",value:function(e,t){return this.Fr.forEach((function(e,n){return t(n)})),Hy.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Hy.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Hy.resolve(this.Mr)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Nr.next(),Hy.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),Hy.resolve()}},{key:"kn",value:function(e){this.Fr.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Nr=new I_(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.kn(t),this.targetCount+=1,Hy.resolve()}},{key:"updateTargetData",value:function(e,t){return this.kn(t),Hy.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,Hy.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Fr.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Fr.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Hy.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Hy.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Fr.get(t)||null;return Hy.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Or.Er(t,n),Hy.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Or.Ar(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Hy.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Or.Rr(t),Hy.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Or.mr(t);return Hy.resolve(n)}},{key:"containsKey",value:function(e,t){return Hy.resolve(this.Or.containsKey(t))}}]),e}(),nE=function(){function e(t,n){var r=this;On(this,e),this.Br={},this.overlays={},this.Lr=new ag(0),this.kr=!1,this.kr=!0,this.referenceDelegate=t(this),this.qr=new tE(this),this.indexManager=new u_,this.remoteDocumentCache=function(e){return new Z_(e)}((function(e){return r.referenceDelegate.Qr(e)})),this.serializer=new Ex(n),this.Kr=new Q_(this.serializer)}return Dn(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.kr=!1,Promise.resolve()}},{key:"started",get:function(){return this.kr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Y_,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Br[e.toKey()];return n||(n=new X_(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.qr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Kr}},{key:"runTransaction",value:function(e,t,n){var r=this;iy("MemoryPersistence","Starting transaction:",e);var i=new rE(this.Lr.next());return this.referenceDelegate.$r(),n(i).next((function(e){return r.referenceDelegate.Ur(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Wr",value:function(e,t){return Hy.or(Object.values(this.Br).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),rE=function(e){Fn(n,e);var t=Vn(n);function n(e){var r;return On(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Dn(n)}(Ky),iE=function(){function e(t){On(this,e),this.persistence=t,this.Gr=new $_,this.zr=null}return Dn(e,[{key:"Hr",get:function(){if(this.zr)return this.zr;throw sy()}},{key:"addReference",value:function(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),Hy.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),Hy.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Hr.add(t.toString()),Hy.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Gr.Rr(t.targetId).forEach((function(e){return n.Hr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Hr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"$r",value:function(){this.zr=new Set}},{key:"Ur",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Hy.forEach(this.Hr,(function(r){var i=Ry.fromPath(r);return t.Jr(e,i).next((function(e){e||n.removeEntry(i,Cy.min())}))})).next((function(){return t.zr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Jr(e,t).next((function(e){e?n.Hr.delete(t.toString()):n.Hr.add(t.toString())}))}},{key:"Qr",value:function(e){return 0}},{key:"Jr",value:function(e,t){var n=this;return Hy.or([function(){return Hy.resolve(n.Gr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Wr(e,t)}])}}],[{key:"jr",value:function(t){return new e(t)}}]),e}(),aE=function(){function e(t){On(this,e),this.serializer=t}return Dn(e,[{key:"B",value:function(e,t,n,r){var i=this,a=new Qy("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dg,{unique:!0}),e.createObjectStore("documentMutations")}(e),oE(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Hy.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),oE(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Cy.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").G().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dg,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Hy.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Zr(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Xr(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.ei(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ti(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ni(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Cg});t.createIndex("collectionPathOverlayIndex",Ng,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Ag,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:yg});t.createIndex("documentKeyIndex",gg),t.createIndex("collectionGroupIndex",kg)}(e)})).next((function(){return i.ri(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.ii(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Eg}).createIndex("sequenceNumberIndex",Ig,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Sg}).createIndex("documentKeyIndex",Tg,{unique:!1})}(e)}))),o}},{key:"Xr",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=k_(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Zr",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.G().next((function(n){return Hy.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",i).next((function(r){return Hy.forEach(r,(function(r){cy(r.userId===n.userId);var i=Nx(t.serializer,r);return g_(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"ei",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new Ay(n),o=function(e){return[0,cg(e)]}(a);r.push(t.get(o).next((function(n){return n?Hy.resolve():function(n){return t.put({targetId:0,path:cg(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Hy.waitFor(r)}))}))}},{key:"ti",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:_g});var n=t.store("collectionParents"),r=new s_,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:cg(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new Ay(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=d(e,3),r=(n[0],n[1]),a=(n[2],hg(r));return i(a.popLast())}))}))}},{key:"ni",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=Ax(r),a=Px(t.serializer,i);return n.put(a)}))}},{key:"ri",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i=t.store("remoteDocumentsV14"),a=function(e){return e.document?new Ry(Ay.fromString(e.document.name).popFirst(5)):e.noDocument?Ry.fromSegments(e.noDocument.path):e.unknownDocument?Ry.fromSegments(e.unknownDocument.path):sy()}(n).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((function(){return Hy.waitFor(r)}))}},{key:"ii",value:function(e,t){var n=this,r=t.store("mutations"),i=U_(this.serializer),a=new nE(iE.jr,this.serializer.lt);return r.G().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Fb();Nx(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Hy.forEach(r,(function(e,r){var o=new ey(r),u=Ux.ht(n.serializer,o),s=a.getIndexManager(o),c=b_.ht(o,n.serializer,s,a.referenceDelegate);return new H_(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Mg(t,ag.ae),e).next()}))}))}}]),e}();function oE(e){e.createObjectStore("targetDocuments",{keyPath:wg}).createIndex("documentTargetsIndex",xg,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bg,{unique:!0}),e.createObjectStore("targetGlobal")}var uE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sE=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(On(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.si=a,this.window=o,this.document=u,this.oi=c,this._i=l,this.ai=f,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=function(e){return Promise.resolve()},!e.v())throw new hy(fy.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new L_(this,i),this.Ii=n+"main",this.serializer=new Ex(s),this.Ti=new Yy(this.Ii,this.ai,new aE(this.serializer)),this.qr=new S_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=U_(this.serializer),this.Kr=new Mx,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===l&&ay("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Dn(e,[{key:"start",value:function(){var e=this;return this.di().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new hy(fy.FAILED_PRECONDITION,uE);return e.Ai(),e.Ri(),e.Vi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.qr.getHighestSequenceNumber(t)}))})).then((function(t){e.Lr=new ag(t,e.oi)})).then((function(){e.kr=!0})).catch((function(t){return e.Ti&&e.Ti.close(),Promise.reject(t)}))}},{key:"mi",value:function(e){var t=this;return this.Pi=function(){var n=s(o().mark((function n(r){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ti.k(function(){var t=s(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.di();case 4:case"end":return e.stop()}}),e)})))))}},{key:"di",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return lE(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.si.enqueueRetryable((function(){return e.Pi(!1)})))}))})).next((function(){return e.gi(t)})).next((function(n){return e.isPrimary&&!n?e.pi(t).next((function(){return!1})):!!n&&e.yi(t).next((function(){return!0}))}))})).catch((function(t){if(Xy(t))return iy("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return iy("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.si.enqueueRetryable((function(){return e.Pi(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return cE(e).get("owner").next((function(e){return Hy.resolve(t.wi(e))}))}},{key:"Si",value:function(e){return lE(e).delete(this.clientId)}},{key:"bi",value:function(){var e=s(o().mark((function e(){var t,n,r,i,a=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Di(this.hi,18e5)){e.next=6;break}return this.hi=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Fg(e,"clientMetadata");return t.G().next((function(e){var n=a.vi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Hy.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Ei){n=Ln(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Ei.removeItem(this.Ci(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vi",value:function(){var e=this;this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.di().then((function(){return e.bi()})).then((function(){return e.Vi()}))}))}},{key:"wi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"gi",value:function(e){var t=this;return this._i?Hy.resolve(!0):cE(e).get("owner").next((function(n){if(null!==n&&t.Di(n.leaseTimestampMs,5e3)&&!t.Fi(n.ownerId)){if(t.wi(n)&&t.networkEnabled)return!0;if(!t.wi(n)){if(!n.allowTabSynchronization)throw new hy(fy.FAILED_PRECONDITION,uE);return!1}}return!(!t.networkEnabled||!t.inForeground)||lE(e).G().next((function(e){return void 0===t.vi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&iy("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=s(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),e.next=7,this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Mg(e,ag.ae);return t.pi(n).next((function(){return t.Si(n)}))}));case 7:this.Ti.close(),this.Ni();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vi",value:function(e,t){var n=this;return e.filter((function(e){return n.Di(e.updateTimeMs,t)&&!n.Fi(e.clientId)}))}},{key:"Bi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return lE(t).G().next((function(t){return e.vi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.kr}},{key:"getMutationQueue",value:function(e,t){return b_.ht(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.qr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new l_(e,this.serializer.lt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Ux.ht(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.Kr}},{key:"runTransaction",value:function(e,t,n){var r=this;iy("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite",o=function(e){return 15===e?Lg:14===e?Dg:13===e?Rg:12===e?Og:11===e?Pg:void sy()}(this.ai);return this.Ti.runTransaction(e,a,o,(function(a){return i=new Mg(a,r.Lr?r.Lr.next():ag.ae),"readwrite-primary"===t?r.fi(i).next((function(e){return!!e||r.gi(i)})).next((function(t){if(!t)throw ay("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.si.enqueueRetryable((function(){return r.Pi(!1)})),new hy(fy.FAILED_PRECONDITION,qy);return n(i)})).next((function(e){return r.yi(i).next((function(){return e}))})):r.Li(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Li",value:function(e){var t=this;return cE(e).get("owner").next((function(e){if(null!==e&&t.Di(e.leaseTimestampMs,5e3)&&!t.Fi(e.ownerId)&&!t.wi(e)&&!(t._i||t.allowTabSynchronization&&e.allowTabSynchronization))throw new hy(fy.FAILED_PRECONDITION,uE)}))}},{key:"yi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cE(e).put("owner",t)}},{key:"pi",value:function(e){var t=this,n=cE(e);return n.get("owner").next((function(e){return t.wi(e)?(iy("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Hy.resolve()}))}},{key:"Di",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(ay("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"Ai",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=function(){e.si.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.di()}))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}},{key:"xi",value:function(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}},{key:"Ri",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=function(){t.Mi();var e=/(?:Version|Mobile)\/1[456]/;!er()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.si.enterRestrictedMode(!0),t.si.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ui))}},{key:"Oi",value:function(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}},{key:"Fi",value:function(e){var t;try{var n=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.Ci(e)));return iy("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ay("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Mi",value:function(){if(this.Ei)try{this.Ei.setItem(this.Ci(this.clientId),String(Date.now()))}catch(KM){ay("Failed to set zombie client id.",KM)}}},{key:"Ni",value:function(){if(this.Ei)try{this.Ei.removeItem(this.Ci(this.clientId))}catch(KM){}}},{key:"Ci",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"v",value:function(){return Yy.v()}}]),e}();function cE(e){return Fg(e,"owner")}function lE(e){return Fg(e,"clientMetadata")}function fE(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var hE=function(){function e(t,n,r,i){On(this,e),this.targetId=t,this.fromCache=n,this.ki=r,this.qi=i}return Dn(e,null,[{key:"Qi",value:function(t,n){var r,i=Fb(),a=Fb(),o=Ln(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),dE=function(){function e(){On(this,e),this.Ki=!1}return Dn(e,[{key:"initialize",value:function(e,t){this.$i=e,this.indexManager=t,this.Ki=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ui(e,t).next((function(a){return a||i.Wi(e,t,r,n)})).next((function(n){return n||i.Gi(e,t)}))}},{key:"Ui",value:function(e,t){var n=this;if(lb(t))return Hy.resolve(null);var r=vb(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=gb(t,null,"F"),r=vb(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Fb.apply(void 0,br(i));return n.$i.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.zi(t,i);return n.ji(t,o,a,r.readTime)?n.Ui(e,gb(t,null,"F")):n.Hi(e,o,t,r)}))}))})))}))}},{key:"Wi",value:function(e,t,n,r){var i=this;return lb(t)||r.isEqual(Cy.min())?this.Gi(e,t):this.$i.getDocuments(e,n).next((function(a){var o=i.zi(t,a);return i.ji(t,o,n,r)?i.Gi(e,t):(ry()<=Ir.DEBUG&&iy("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),wb(t)),i.Hi(e,o,t,Uy(r,-1)))}))}},{key:"zi",value:function(e,t){var n=new Kg(Eb(e));return t.forEach((function(t,r){xb(e,r)&&(n=n.add(r))})),n}},{key:"ji",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Gi",value:function(e,t){return ry()<=Ir.DEBUG&&iy("QueryEngine","Using full collection scan to execute query:",wb(t)),this.$i.getDocumentsMatchingQuery(e,t,zy.min())}},{key:"Hi",value:function(e,t,n,r){return this.$i.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),pE=function(){function e(t,n,r,i){On(this,e),this.persistence=t,this.Ji=n,this.serializer=i,this.Yi=new zg(Ey),this.Zi=new Sb((function(e){return tb(e)}),nb),this.Xi=new Map,this.es=t.getRemoteDocumentCache(),this.qr=t.getTargetCache(),this.Kr=t.getBundleCache(),this.ts(r)}return Dn(e,[{key:"ts",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new H_(this.es,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.es.setIndexManager(this.indexManager),this.Ji.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Yi)}))}}]),e}();function vE(e,t,n,r){return new pE(e,t,n,r)}function mE(e,t){return yE.apply(this,arguments)}function yE(){return yE=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ly(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.ts(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Fb(),s=Ln(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=Ln(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Ln(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=Ln(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ns:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),yE.apply(this,arguments)}function gE(e,t){var n=ly(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.es.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Hy.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);cy(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Fb(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function kE(e){var t=ly(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.qr.getLastRemoteSnapshotVersion(e)}))}function bE(e,t){var n=ly(e),r=t.snapshotVersion,i=n.Yi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.es.newChangeBuffer({trackRemovals:!0});i=n.Yi;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.qr.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.qr.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(Yg.EMPTY_BYTE_STRING,Cy.min()).withLastLimboFreeSnapshotVersion(Cy.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.qr.updateTargetData(e,c))}}));var u=Cb(),s=Fb();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(wE(e,a,t.documentUpdates).next((function(e){u=e.rs,s=e.ss}))),!r.isEqual(Cy.min())){var c=n.qr.getLastRemoteSnapshotVersion(e).next((function(t){return n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Hy.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Yi=i,e}))}function wE(e,t,n){var r=Fb(),i=Fb();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Cb();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Cy.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):iy("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{rs:r,ss:i}}))}function xE(e,t){var n=ly(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function _E(e,t){var n=ly(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.qr.getTargetData(e,t).next((function(i){return i?(r=i,Hy.resolve(r)):n.qr.allocateTargetId(e).next((function(i){return r=new _x(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Yi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Yi=n.Yi.insert(e.targetId,e),n.Zi.set(t,e.targetId)),e}))}function EE(e,t,n){return IE.apply(this,arguments)}function IE(){return IE=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ly(t),a=i.Yi.get(n),u=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",u,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Xy(e.t1)){e.next=12;break}throw e.t1;case 12:iy("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Yi=i.Yi.remove(n),i.Zi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),IE.apply(this,arguments)}function SE(e,t,n){var r=ly(e),i=Cy.min(),a=Fb();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=ly(e),i=r.Zi.get(n);return void 0!==i?Hy.resolve(r.Yi.get(i)):r.qr.getTargetData(t,n)}(r,e,vb(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Ji.getDocumentsMatchingQuery(e,t,n?i:Cy.min(),n?a:Fb())})).next((function(e){return NE(r,_b(t),e),{documents:e,os:a}}))}))}function TE(e,t){var n=ly(e),r=ly(n.qr),i=n.Yi.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ct(e,t).next((function(e){return e?e.target:null}))}))}function CE(e,t){var n=ly(e),r=n.Xi.get(t)||Cy.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.es.getAllFromCollectionGroup(e,t,Uy(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return NE(n,t,e),e}))}function NE(e,t,n){var r=e.Xi.get(t)||Cy.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}function AE(e,t,n,r){return PE.apply(this,arguments)}function PE(){return PE=s(o().mark((function e(t,n,r,i){var a,u,s,c,l,f,h,d,p,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=ly(t),u=Fb(),s=Cb(),c=Ln(r);try{for(c.s();!(l=c.n()).done;)f=l.value,h=n._s(f.metadata.name),f.document&&(u=u.add(h)),(d=n.us(f)).setReadTime(n.cs(f.metadata.readTime)),s=s.insert(h,d)}catch(o){c.e(o)}finally{c.f()}return p=a.es.newChangeBuffer({trackRemovals:!0}),e.next=7,_E(a,function(e){return vb(cb(Ay.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return wE(e,p,s).next((function(t){return p.apply(e),t})).next((function(t){return a.qr.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.qr.addMatchingKeys(e,u,v.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.rs,t.ss)})).next((function(){return t.rs}))}))})));case 9:case"end":return e.stop()}}),e)}))),PE.apply(this,arguments)}function OE(e,t){return RE.apply(this,arguments)}function RE(){return RE=s(o().mark((function e(t,n){var r,i,a,u=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:Fb(),e.next=3,_E(t,vb(Ox(n.bundledQuery)));case 3:return i=e.sent,a=ly(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Jw(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Kr.saveNamedQuery(e,n);var o=i.withResumeToken(Yg.EMPTY_BYTE_STRING,t);return a.Yi=a.Yi.insert(o.targetId,o),a.qr.updateTargetData(e,o).next((function(){return a.qr.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.qr.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Kr.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),RE.apply(this,arguments)}function DE(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function LE(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function ME(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var FE=function(){function e(t,n,r,i){On(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Dn(e,[{key:"hs",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ls",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new hy(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(ay("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),jE=function(){function e(t,n,r){On(this,e),this.targetId=t,this.state=n,this.error=r}return Dn(e,[{key:"hs",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ls",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new hy(i.error.code,i.error.message))),a?new e(t,i.state,r):(ay("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),UE=function(){function e(t,n){On(this,e),this.clientId=t,this.activeTargetIds=n}return Dn(e,null,[{key:"ls",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Ub(),o=0;i&&o<r.activeTargetIds.length;++o)i=sg(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(ay("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),VE=function(){function e(t,n){On(this,e),this.clientId=t,this.onlineState=n}return Dn(e,null,[{key:"ls",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(ay("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),zE=function(){function e(){On(this,e),this.activeTargetIds=Ub()}return Dn(e,[{key:"Ps",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Is",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hs",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),BE=function(){function e(t,n,r,i,a){On(this,e),this.window=t,this.si=n,this.persistenceKey=r,this.Ts=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Es=this.ds.bind(this),this.As=new zg(Ey),this.started=!1,this.Rs=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Vs=DE(this.persistenceKey,this.Ts),this.fs=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.As=this.As.insert(this.Ts,new zE),this.gs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.ps=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.ys=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.ws=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Ss=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Es)}return Dn(e,[{key:"start",value:function(){var e=s(o().mark((function e(){var t,n,r,i,a,u,s,c,l,f,h,d=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Bi();case 2:t=e.sent,n=Ln(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Ts){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(DE(this.persistenceKey,i)))&&(u=UE.ls(i,a))&&(this.As=this.As.insert(u.clientId,u));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.bs(),(s=this.storage.getItem(this.ws))&&(c=this.Ds(s))&&this.vs(c),l=Ln(this.Rs);try{for(l.s();!(f=l.n()).done;)h=f.value,this.ds(h)}catch(o){l.e(o)}finally{l.f()}this.Rs=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.fs,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Cs(this.As)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.As.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Fs(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Fs(e,t,n),this.Ms(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(ME(this.persistenceKey,e));if(n){var r=jE.ls(e,n);r&&(t=r.state)}}return this.xs.Ps(e),this.bs(),t}},{key:"removeLocalQueryTarget",value:function(e){this.xs.Is(e),this.bs()}},{key:"isLocalQueryTarget",value:function(e){return this.xs.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(ME(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Os(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ms(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Ns(e)}},{key:"notifyBundleLoaded",value:function(e){this.Bs(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Es),this.removeItem(this.Vs),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return iy("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){iy("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){iy("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ds",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(iy("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Vs)return void ay("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(s(o().mark((function e(){var r,i,a,u,s,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.gs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Ls(n.key),e.abrupt("return",t.ks(r,null));case 6:if(!(i=t.qs(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.ks(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.ps.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Qs(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Ks(a));case 16:e.next=41;break;case 18:if(!t.ys.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(u=t.$s(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Us(u));case 23:e.next=41;break;case 25:if(n.key!==t.ws){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.Ds(n.newValue))){e.next=30;break}return e.abrupt("return",t.vs(s));case 30:e.next=41;break;case 32:if(n.key!==t.fs){e.next=37;break}c=function(e){var t=ag.ae;if(null!=e)try{var n=JSON.parse(e);cy("number"==typeof n),t=n}catch(e){ay("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),c!==ag.ae&&t.sequenceNumberHandler(c),e.next=41;break;case 37:if(n.key!==t.Ss){e.next=41;break}return l=t.Ws(n.newValue),e.next=41,Promise.all(l.map((function(e){return t.syncEngine.Gs(e)})));case 41:e.next=44;break;case 43:t.Rs.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"xs",get:function(){return this.As.get(this.Ts)}},{key:"bs",value:function(){this.setItem(this.Vs,this.xs.hs())}},{key:"Fs",value:function(e,t,n){var r=new FE(this.currentUser,e,t,n),i=LE(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hs())}},{key:"Ms",value:function(e){var t=LE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Ns",value:function(e){var t={clientId:this.Ts,onlineState:e};this.storage.setItem(this.ws,JSON.stringify(t))}},{key:"Os",value:function(e,t,n){var r=ME(this.persistenceKey,e),i=new jE(e,t,n);this.setItem(r,i.hs())}},{key:"Bs",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Ss,t)}},{key:"Ls",value:function(e){var t=this.gs.exec(e);return t?t[1]:null}},{key:"qs",value:function(e,t){var n=this.Ls(e);return UE.ls(n,t)}},{key:"Qs",value:function(e,t){var n=this.ps.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return FE.ls(new ey(i),r,t)}},{key:"$s",value:function(e,t){var n=this.ys.exec(e),r=Number(n[1]);return jE.ls(r,t)}},{key:"Ds",value:function(e){return VE.ls(e)}},{key:"Ws",value:function(e){return JSON.parse(e)}},{key:"Ks",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.zs(t.batchId,t.state,t.error));case 2:iy("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Us",value:function(e){return this.syncEngine.js(e.targetId,e.state,e.error)}},{key:"ks",value:function(e,t){var n=this,r=t?this.As.insert(e,t):this.As.remove(e),i=this.Cs(this.As),a=this.Cs(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Hs(o,u).then((function(){n.As=r}))}},{key:"vs",value:function(e){this.As.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Cs",value:function(e){var t=Ub();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"v",value:function(e){return!(!e||!e.localStorage)}}]),e}(),qE=function(){function e(){On(this,e),this.Js=new zE,this.Ys={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Dn(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Js.Ps(e),this.Ys[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ys[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Js.Is(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Js.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ys[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Js.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Js.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Js=new zE,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),KE=function(){function e(){On(this,e)}return Dn(e,[{key:"Zs",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),WE=function(){function e(){var t=this;On(this,e),this.Xs=function(){return t.eo()},this.no=function(){return t.ro()},this.io=[],this.so()}return Dn(e,[{key:"Zs",value:function(e){this.io.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xs),window.removeEventListener("offline",this.no)}},{key:"so",value:function(){window.addEventListener("online",this.Xs),window.addEventListener("offline",this.no)}},{key:"eo",value:function(){iy("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Ln(this.io);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"ro",value:function(){iy("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Ln(this.io);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"v",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),GE=null;function HE(){return null===GE?GE=268435456+Math.round(2147483648*Math.random()):GE++,"0x"+GE.toString(16)}var QE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},YE=function(){function e(t){On(this,e),this.oo=t.oo,this._o=t._o}return Dn(e,[{key:"ao",value:function(e){this.uo=e}},{key:"co",value:function(e){this.lo=e}},{key:"onMessage",value:function(e){this.ho=e}},{key:"close",value:function(){this._o()}},{key:"send",value:function(e){this.oo(e)}},{key:"Po",value:function(){this.uo()}},{key:"Io",value:function(e){this.lo(e)}},{key:"To",value:function(e){this.ho(e)}}]),e}(),$E="WebChannelConnection",JE=function(e){Fn(n,e);var t=Vn(n);function n(e){var r;return On(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return Dn(n,[{key:"yo",value:function(e,t,n,r){var i=HE();return new Promise((function(a,o){var u=new $m;u.setWithCredentials(!0),u.listenOnce(Wm.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Km.NO_ERROR:var t=u.getResponseJson();iy($E,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Km.TIMEOUT:iy($E,"RPC '".concat(e,"' ").concat(i," timed out")),o(new hy(fy.DEADLINE_EXCEEDED,"Request time out"));break;case Km.HTTP_ERROR:var n=u.getStatus();if(iy($E,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(fy).indexOf(t)>=0?t:fy.UNKNOWN}(s.status);o(new hy(c,s.message))}else o(new hy(fy.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new hy(fy.UNAVAILABLE,"Connection failed."));break;default:sy()}}finally{iy($E,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);iy($E,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"So",value:function(e,t,n){var r=HE(),i=[this.Eo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Bm(),o=qm(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.xmlHttpFactory=new Qm({})),this.po(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");iy($E,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new YE({oo:function(t){h?iy($E,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(iy($E,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),iy($E,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},_o:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,Ym.EventType.OPEN,(function(){h||iy($E,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Ym.EventType.CLOSE,(function(){h||(h=!0,iy($E,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.Io())})),p(l,Ym.EventType.ERROR,(function(t){h||(h=!0,oy($E,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.Io(new hy(fy.UNAVAILABLE,"The operation could not be completed")))})),p(l,Ym.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];cy(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){iy($E,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=mw[e];if(void 0!==t)return Iw(t)}(u),c=o.message;void 0===s&&(s=fy.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.Io(new hy(s,c)),l.close()}else iy($E,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.To(i)}})),p(o,Gm.STAT_EVENT,(function(t){t.stat===Hm.PROXY?iy($E,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Hm.NOPROXY&&iy($E,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.Po()}),0),d}}]),n}(function(){function e(t){On(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Eo=n+"://"+t.host,this.Ao="projects/".concat(r,"/databases/").concat(i),this.Ro="(default)"===this.databaseId.database?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}return Dn(e,[{key:"Vo",get:function(){return!1}},{key:"mo",value:function(e,t,n,r,i){var a=HE(),o=this.fo(e,t);iy("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={"google-cloud-resource-prefix":this.Ao,"x-goog-request-params":this.Ro};return this.po(u,r,i),this.yo(e,o,u,n).then((function(t){return iy("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw oy("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"wo",value:function(e,t,n,r,i,a){return this.mo(e,t,n,r,i)}},{key:"po",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ty,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"fo",value:function(e,t){var n=QE[e];return"".concat(this.Eo,"/v1/").concat(t,":").concat(n)}}]),e}());function XE(){return"undefined"!=typeof window?window:null}function ZE(){return"undefined"!=typeof document?document:null}function eI(e){return new Gw(e,!0)}var tI=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;On(this,e),this.si=t,this.timerId=n,this.bo=r,this.Do=i,this.vo=a,this.Co=0,this.Fo=null,this.Mo=Date.now(),this.reset()}return Dn(e,[{key:"reset",value:function(){this.Co=0}},{key:"xo",value:function(){this.Co=this.vo}},{key:"Oo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Co+this.No()),r=Math.max(0,Date.now()-this.Mo),i=Math.max(0,n-r);i>0&&iy("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Co," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Fo=this.si.enqueueAfterDelay(this.timerId,i,(function(){return t.Mo=Date.now(),e()})),this.Co*=this.Do,this.Co<this.bo&&(this.Co=this.bo),this.Co>this.vo&&(this.Co=this.vo)}},{key:"Bo",value:function(){null!==this.Fo&&(this.Fo.skipDelay(),this.Fo=null)}},{key:"cancel",value:function(){null!==this.Fo&&(this.Fo.cancel(),this.Fo=null)}},{key:"No",value:function(){return(Math.random()-.5)*this.Co}}]),e}(),nI=function(){function e(t,n,r,i,a,o,u,s){On(this,e),this.si=t,this.Lo=r,this.ko=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.qo=0,this.Qo=null,this.Ko=null,this.stream=null,this.$o=new tI(t,n)}return Dn(e,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Wo()}},{key:"Wo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Uo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"zo",value:function(){this.state=0,this.$o.reset()}},{key:"jo",value:function(){var e=this;this.Wo()&&null===this.Qo&&(this.Qo=this.si.enqueueAfterDelay(this.Lo,6e4,(function(){return e.Ho()})))}},{key:"Jo",value:function(e){this.Yo(),this.stream.send(e)}},{key:"Ho",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Wo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){this.Qo&&(this.Qo.cancel(),this.Qo=null)}},{key:"Zo",value:function(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}},{key:"close",value:function(){var e=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Yo(),this.Zo(),this.$o.cancel(),this.qo++,4!==t?this.$o.reset():n&&n.code===fy.RESOURCE_EXHAUSTED?(ay(n.toString()),ay("Using maximum backoff delay to prevent overloading the backend."),this.$o.xo()):n&&n.code===fy.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Xo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.co(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Xo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.e_(this.qo),n=this.qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=d(t,2),i=r[0],a=r[1];e.qo===n&&e.t_(i,a)}),(function(n){t((function(){var t=new hy(fy.UNKNOWN,"Fetching auth token failed: "+n.message);return e.n_(t)}))}))}},{key:"t_",value:function(e,t){var n=this,r=this.e_(this.qo);this.stream=this.r_(e,t),this.stream.ao((function(){r((function(){return n.state=2,n.Ko=n.si.enqueueAfterDelay(n.ko,1e4,(function(){return n.Wo()&&(n.state=3),Promise.resolve()})),n.listener.ao()}))})),this.stream.co((function(e){r((function(){return n.n_(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Go",value:function(){var e=this;this.state=5,this.$o.Oo(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"n_",value:function(e){return iy("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"e_",value:function(e){var t=this;return function(n){t.si.enqueueAndForget((function(){return t.qo===e?n():(iy("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),rI=function(e){Fn(n,e);var t=Vn(n);function n(e,r,i,a,o,u){var s;return On(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return Dn(n,[{key:"r_",value:function(e,t){return this.connection.So("Listen",e,t)}},{key:"onMessage",value:function(e){this.$o.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:sy()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(cy(void 0===t||"string"==typeof t),Yg.fromBase64String(t||"")):(cy(void 0===t||t instanceof Uint8Array),Yg.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?fy.UNKNOWN:Iw(e.code);return new hy(t,e.message||"")}(o);n=new jw(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=tx(e,s.document.name),l=Jw(s.document.updateTime),f=s.document.createTime?Jw(s.document.createTime):Cy.min(),h=new Sk({mapValue:{fields:s.document.fields}}),d=Ck.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new Mw(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=tx(e,m.document),g=m.readTime?Jw(m.readTime):Cy.min(),k=Ck.newNoDocument(y,g),b=m.removedTargetIds||[];n=new Mw([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=tx(e,w.document),_=w.removedTargetIds||[];n=new Mw([],_,x,null)}else{if(!("filter"in t))return sy();t.filter;var E=t.filter;E.targetId;var I=E.count,S=void 0===I?0:I,T=E.unchangedNames,C=new _w(S,T),N=E.targetId;n=new Fw(N,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Cy.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Cy.min():t.readTime?Jw(t.readTime):Cy.min()}(e);return this.listener.i_(t,n)}},{key:"s_",value:function(e){var t={};t.database=ix(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=rb(r)?{documents:fx(e,r)}:{query:hx(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Yw(e,t.resumeToken);var i=Hw(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Cy.min())>0){n.readTime=Qw(e,t.snapshotVersion.toTimestamp());var a=Hw(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return sy()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Jo(t)}},{key:"o_",value:function(e){var t={};t.database=ix(this.serializer),t.removeTarget=e,this.Jo(t)}}]),n}(nI),iI=function(e){Fn(n,e);var t=Vn(n);function n(e,r,i,a,o,u){var s;return On(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.__=!1,s}return Dn(n,[{key:"a_",get:function(){return this.__}},{key:"start",value:function(){this.__=!1,this.lastStreamToken=void 0,Yi(jn(n.prototype),"start",this).call(this)}},{key:"Xo",value:function(){this.__&&this.u_([])}},{key:"r_",value:function(e,t){return this.connection.So("Write",e,t)}},{key:"onMessage",value:function(e){if(cy(!!e.streamToken),this.lastStreamToken=e.streamToken,this.__){this.$o.reset();var t=function(e,t){return e&&e.length>0?(cy(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Jw(e.updateTime):Jw(t);return n.isEqual(Cy.min())&&(n=Jw(t)),new nw(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Jw(e.commitTime);return this.listener.c_(n,t)}return cy(!e.writeResults||0===e.writeResults.length),this.__=!0,this.listener.l_()}},{key:"h_",value:function(){var e={};e.database=ix(this.serializer),this.Jo(e)}},{key:"u_",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return cx(t.serializer,e)}))};this.Jo(n)}}]),n}(nI),aI=function(e){Fn(n,e);var t=Vn(n);function n(e,r,i,a){var o;return On(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.P_=!1,o}return Dn(n,[{key:"I_",value:function(){if(this.P_)throw new hy(fy.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"mo",value:function(e,t,n){var r=this;return this.I_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=d(i,2),o=a[0],u=a[1];return r.connection.mo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===fy.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new hy(fy.UNKNOWN,e.toString())}))}},{key:"wo",value:function(e,t,n,r){var i=this;return this.I_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=d(a,2),u=o[0],s=o[1];return i.connection.wo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===fy.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new hy(fy.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.P_=!0}}]),n}(Dn((function e(){On(this,e)})));var oI=function(){function e(t,n){On(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.E_=0,this.d_=null,this.A_=!0}return Dn(e,[{key:"R_",value:function(){var e=this;0===this.E_&&(this.V_("Unknown"),this.d_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.d_=null,e.m_("Backend didn't respond within 10 seconds."),e.V_("Offline"),Promise.resolve()})))}},{key:"f_",value:function(e){"Online"===this.state?this.V_("Unknown"):(this.E_++,this.E_>=1&&(this.g_(),this.m_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.V_("Offline")))}},{key:"set",value:function(e){this.g_(),this.E_=0,"Online"===e&&(this.A_=!1),this.V_(e)}},{key:"V_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"m_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.A_?(ay(t),this.A_=!1):iy("OnlineStateTracker",t)}},{key:"g_",value:function(){null!==this.d_&&(this.d_.cancel(),this.d_=null)}}]),e}(),uI=Dn((function e(t,n,r,i,a){var u=this;On(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.p_=[],this.y_=new Map,this.w_=new Set,this.S_=[],this.b_=a,this.b_.Zs((function(e){r.enqueueAndForget(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=gI(u),!e.t0){e.next=5;break}return iy("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=ly(t)).w_.add(4),e.next=4,lI(n);case 4:return n.D_.set("Unknown"),n.w_.delete(4),e.next=8,sI(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(u);case 5:case"end":return e.stop()}}),e)}))))})),this.D_=new oI(r,i)}));function sI(e){return cI.apply(this,arguments)}function cI(){return(cI=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!gI(t)){e.next=18;break}n=Ln(t.S_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function lI(e){return fI.apply(this,arguments)}function fI(){return(fI=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ln(t.S_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function hI(e,t){var n=ly(e);n.y_.has(t.targetId)||(n.y_.set(t.targetId,t),yI(n)?mI(n):HI(n).Wo()&&pI(n,t))}function dI(e,t){var n=ly(e),r=HI(n);n.y_.delete(t),r.Wo()&&vI(n,t),0===n.y_.size&&(r.Wo()?r.jo():gI(n)&&n.D_.set("Unknown"))}function pI(e,t){if(e.v_.Le(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Cy.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}HI(e).s_(t)}function vI(e,t){e.v_.Le(t),HI(e).o_(t)}function mI(e){e.v_=new Vw({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ct:function(t){return e.y_.get(t)||null},it:function(){return e.datastore.serializer.databaseId}}),HI(e).start(),e.D_.R_()}function yI(e){return gI(e)&&!HI(e).Uo()&&e.y_.size>0}function gI(e){return 0===ly(e).w_.size}function kI(e){e.v_=void 0}function bI(e){return wI.apply(this,arguments)}function wI(){return(wI=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.y_.forEach((function(e,n){pI(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xI(e,t){return _I.apply(this,arguments)}function _I(){return(_I=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:kI(t),yI(t)?(t.D_.f_(n),mI(t)):t.D_.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function EI(e,t,n){return II.apply(this,arguments)}function II(){return II=s(o().mark((function e(t,n,r){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.D_.set("Online"),!(n instanceof jw&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Ln(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(u=a.value,e.t0=t.y_.has(u),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(u,r);case 10:t.y_.delete(u),t.v_.removeTarget(u);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),iy("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,SI(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Mw?t.v_.Ge(n):n instanceof Fw?t.v_.Xe(n):t.v_.He(n),r.isEqual(Cy.min())){e.next=29;break}return e.prev=14,e.next=17,kE(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.v_.ot(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.y_.get(r);i&&e.y_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.y_.get(t);if(r){e.y_.set(t,r.withResumeToken(Yg.EMPTY_BYTE_STRING,r.snapshotVersion)),vI(e,t);var i=new _x(r.target,t,n,r.sequenceNumber);pI(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),iy("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,SI(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),II.apply(this,arguments)}function SI(e,t,n){return TI.apply(this,arguments)}function TI(){return(TI=s(o().mark((function e(t,n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Xy(n)){e.next=2;break}throw n;case 2:return t.w_.add(1),e.next=5,lI(t);case 5:t.D_.set("Offline"),r||(r=function(){return kE(t.localStore)}),t.asyncQueue.enqueueRetryable(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return iy("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.w_.delete(1),e.next=6,sI(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function CI(e,t){return t().catch((function(n){return SI(e,n,t)}))}function NI(e){return AI.apply(this,arguments)}function AI(){return AI=s(o().mark((function e(t){var n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ly(t),r=QI(n),i=n.p_.length>0?n.p_[n.p_.length-1].batchId:-1;case 2:if(!PI(n)){e.next=19;break}return e.prev=3,e.next=6,xE(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.p_.length&&r.jo(),e.abrupt("break",19);case 10:i=a.batchId,OI(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,SI(n,e.t0);case 17:e.next=2;break;case 19:RI(n)&&DI(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),AI.apply(this,arguments)}function PI(e){return gI(e)&&e.p_.length<10}function OI(e,t){e.p_.push(t);var n=QI(e);n.Wo()&&n.a_&&n.u_(t.mutations)}function RI(e){return gI(e)&&!QI(e).Uo()&&e.p_.length>0}function DI(e){QI(e).start()}function LI(e){return MI.apply(this,arguments)}function MI(){return(MI=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:QI(t).h_();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function FI(e){return jI.apply(this,arguments)}function jI(){return(jI=s(o().mark((function e(t){var n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=QI(t),r=Ln(t.p_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.u_(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function UI(e,t,n){return VI.apply(this,arguments)}function VI(){return VI=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.p_.shift(),a=ww.from(i,n,r),e.next=3,CI(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,NI(t);case 5:case"end":return e.stop()}}),e)}))),VI.apply(this,arguments)}function zI(e,t){return BI.apply(this,arguments)}function BI(){return BI=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&QI(t).a_,!e.t0){e.next=4;break}return e.next=4,function(){var e=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return Ew(e)&&e!==fy.ABORTED}(n.code)){e.next=7;break}return r=t.p_.shift(),QI(t).zo(),e.next=5,CI(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,NI(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:RI(t)&&DI(t);case 5:case"end":return e.stop()}}),e)}))),BI.apply(this,arguments)}function qI(e,t){return KI.apply(this,arguments)}function KI(){return KI=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=ly(t)).asyncQueue.verifyOperationInProgress(),iy("RemoteStore","RemoteStore received new credentials"),i=gI(r),r.w_.add(3),e.next=6,lI(r);case 6:return i&&r.D_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.w_.delete(3),e.next=12,sI(r);case 12:case"end":return e.stop()}}),e)}))),KI.apply(this,arguments)}function WI(e,t){return GI.apply(this,arguments)}function GI(){return(GI=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ly(t),!n){e.next=7;break}return r.w_.delete(2),e.next=5,sI(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.w_.add(2),e.next=12,lI(r);case 12:r.D_.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HI(e){return e.C_||(e.C_=function(e,t,n){var r=ly(e);return r.I_(),new rI(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ao:bI.bind(null,e),co:xI.bind(null,e),i_:EI.bind(null,e)}),e.S_.push(function(){var t=s(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.C_.zo(),yI(e)?mI(e):e.D_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.C_.stop();case 6:kI(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.C_}function QI(e){return e.F_||(e.F_=function(e,t,n){var r=ly(e);return r.I_(),new iI(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ao:LI.bind(null,e),co:zI.bind(null,e),l_:FI.bind(null,e),c_:UI.bind(null,e)}),e.S_.push(function(){var t=s(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.F_.zo(),t.next=4,NI(e);case 4:t.next=9;break;case 6:return t.next=8,e.F_.stop();case 8:e.p_.length>0&&(iy("RemoteStore","Stopping write stream with ".concat(e.p_.length," pending writes")),e.p_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.F_}var YI=function(){function e(t,n,r,i,a){On(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new dy,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Dn(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new hy(fy.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function $I(e,t){if(ay("AsyncQueue","".concat(t,": ").concat(e)),Xy(e))return new hy(fy.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var JI=function(){function e(t){On(this,e),this.comparator=t?function(e,n){return t(e,n)||Ry.comparator(e.key,n.key)}:function(e,t){return Ry.comparator(e.key,t.key)},this.keyedMap=Ab(),this.sortedSet=new zg(this.comparator)}return Dn(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),XI=function(){function e(){On(this,e),this.M_=new zg(Ry.comparator)}return Dn(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.M_.get(t);n?0!==e.type&&3===n.type?this.M_=this.M_.insert(t,e):3===e.type&&1!==n.type?this.M_=this.M_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.M_=this.M_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.M_=this.M_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.M_=this.M_.remove(t):1===e.type&&2===n.type?this.M_=this.M_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.M_=this.M_.insert(t,{type:2,doc:e.doc}):sy():this.M_=this.M_.insert(t,e)}},{key:"x_",value:function(){var e=[];return this.M_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),ZI=function(){function e(t,n,r,i,a,o,u,s,c){On(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return Dn(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,JI.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),eS=Dn((function e(){On(this,e),this.O_=void 0,this.listeners=[]})),tS=Dn((function e(){On(this,e),this.queries=new Sb((function(e){return bb(e)}),kb),this.onlineState="Unknown",this.N_=new Set}));function nS(e,t){return rS.apply(this,arguments)}function rS(){return rS=s(o().mark((function e(t,n){var r,i,a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ly(t),i=n.query,a=!1,(u=r.queries.get(i))||(a=!0,u=new eS),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:u.O_=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=$I(e.t0,"Initialization of query '".concat(wb(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,u),u.listeners.push(n),n.B_(r.onlineState),u.O_&&n.L_(u.O_)&&sS(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),rS.apply(this,arguments)}function iS(e,t){return aS.apply(this,arguments)}function aS(){return aS=s(o().mark((function e(t,n){var r,i,a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ly(t),i=n.query,a=!1,(u=r.queries.get(i))&&(s=u.listeners.indexOf(n))>=0&&(u.listeners.splice(s,1),a=0===u.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),aS.apply(this,arguments)}function oS(e,t){var n,r=ly(e),i=!1,a=Ln(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Ln(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.L_(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.O_=o}}}catch(f){a.e(f)}finally{a.f()}i&&sS(r)}function uS(e,t,n){var r=ly(e),i=r.queries.get(t);if(i){var a,o=Ln(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function sS(e){e.N_.forEach((function(e){e.next()}))}var cS=function(){function e(t,n,r){On(this,e),this.query=t,this.k_=n,this.q_=!1,this.Q_=null,this.onlineState="Unknown",this.options=r||{}}return Dn(e,[{key:"L_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Ln(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new ZI(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.q_?this.K_(e)&&(this.k_.next(e),a=!0):this.U_(e,this.onlineState)&&(this.W_(e),a=!0),this.Q_=e,a}},{key:"onError",value:function(e){this.k_.error(e)}},{key:"B_",value:function(e){this.onlineState=e;var t=!1;return this.Q_&&!this.q_&&this.U_(this.Q_,e)&&(this.W_(this.Q_),t=!0),t}},{key:"U_",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.G_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"K_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Q_&&this.Q_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"W_",value:function(e){e=ZI.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.q_=!0,this.k_.next(e)}}]),e}(),lS=function(){function e(t,n){On(this,e),this.z_=t,this.byteLength=n}return Dn(e,[{key:"j_",value:function(){return"metadata"in this.z_}}]),e}(),fS=function(){function e(t){On(this,e),this.serializer=t}return Dn(e,[{key:"_s",value:function(e){return tx(this.serializer,e)}},{key:"us",value:function(e){return e.metadata.exists?ux(this.serializer,e.document,!1):Ck.newNoDocument(this._s(e.metadata.name),this.cs(e.metadata.readTime))}},{key:"cs",value:function(e){return Jw(e)}}]),e}(),hS=function(){function e(t,n,r){On(this,e),this.H_=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=dS(t)}return Dn(e,[{key:"J_",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.z_.namedQuery)this.queries.push(e.z_.namedQuery);else if(e.z_.documentMetadata){this.documents.push({metadata:e.z_.documentMetadata}),e.z_.documentMetadata.exists||++t;var n=Ay.fromString(e.z_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.z_.document&&(this.documents[this.documents.length-1].document=e.z_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Y_",value:function(e){var t,n=new Map,r=new fS(this.serializer),i=Ln(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r._s(a.metadata.name),s=Ln(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Fb()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=s(o().mark((function e(){var t,n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,AE(this.localStore,new fS(this.serializer),this.documents,this.H_.id);case 2:t=e.sent,n=this.Y_(this.documents),r=Ln(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,OE(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Z_:this.collectionGroups,X_:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function dS(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var pS=Dn((function e(t){On(this,e),this.key=t})),vS=Dn((function e(t){On(this,e),this.key=t})),mS=function(){function e(t,n){On(this,e),this.query=t,this.ea=n,this.ta=null,this.hasCachedResults=!1,this.current=!1,this.na=Fb(),this.mutatedKeys=Fb(),this.ra=Eb(t),this.ia=new JI(this.ra)}return Dn(e,[{key:"sa",get:function(){return this.ea}},{key:"oa",value:function(e,t){var n=this,r=t?t._a:new XI,i=t?t.ia:this.ia,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=xb(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.aa(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.ra(f,s)>0||c&&n.ra(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ia:o,_a:r,ji:u,mutatedKeys:a}}},{key:"aa",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ia;this.ia=e.ia,this.mutatedKeys=e.mutatedKeys;var a=e._a.x_();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return sy()}};return n(e)-n(t)}(e.type,t.type)||r.ra(e.doc,t.doc)})),this.ua(n);var o=t?this.ca():[],u=0===this.na.size&&this.current?1:0,s=u!==this.ta;return this.ta=u,0!==a.length||s?{snapshot:new ZI(this.query,e.ia,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),la:o}:{la:o}}},{key:"B_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ia:this.ia,_a:new XI,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{la:[]}}},{key:"ha",value:function(e){return!this.ea.has(e)&&!!this.ia.has(e)&&!this.ia.get(e).hasLocalMutations}},{key:"ua",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.ea=t.ea.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.ea=t.ea.delete(e)})),this.current=e.current)}},{key:"ca",value:function(){var e=this;if(!this.current)return[];var t=this.na;this.na=Fb(),this.ia.forEach((function(t){e.ha(t.key)&&(e.na=e.na.add(t.key))}));var n=[];return t.forEach((function(t){e.na.has(t)||n.push(new vS(t))})),this.na.forEach((function(e){t.has(e)||n.push(new pS(e))})),n}},{key:"Pa",value:function(e){this.ea=e.os,this.na=Fb();var t=this.oa(e.documents);return this.applyChanges(t,!0)}},{key:"Ia",value:function(){return ZI.fromInitialDocuments(this.query,this.ia,this.mutatedKeys,0===this.ta,this.hasCachedResults)}}]),e}(),yS=Dn((function e(t,n,r){On(this,e),this.query=t,this.targetId=n,this.view=r})),gS=Dn((function e(t){On(this,e),this.key=t,this.Ta=!1})),kS=function(){function e(t,n,r,i,a,o){On(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ea={},this.da=new Sb((function(e){return bb(e)}),kb),this.Aa=new Map,this.Ra=new Set,this.Va=new zg(Ry.comparator),this.ma=new Map,this.fa=new $_,this.ga={},this.pa=new Map,this.ya=I_.Nn(),this.onlineState="Unknown",this.wa=void 0}return Dn(e,[{key:"isPrimaryClient",get:function(){return!0===this.wa}}]),e}();function bS(e,t){return wS.apply(this,arguments)}function wS(){return wS=s(o().mark((function e(t,n){var r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=dT(t),!(u=r.da.get(n))){e.next=6;break}i=u.targetId,r.sharedClientState.addLocalQueryTarget(i),a=u.view.Ia(),e.next=15;break;case 6:return e.next=8,_E(r.localStore,vb(n));case 8:return s=e.sent,c=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,xS(r,n,i,"current"===c,s.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&hI(r.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),wS.apply(this,arguments)}function xS(e,t,n,r,i){return _S.apply(this,arguments)}function _S(){return _S=s(o().mark((function e(t,n,r,i,a){var u,c,l,f,h,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Sa=function(e,n,r){return function(){var e=s(o().mark((function e(t,n,r,i){var a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.oa(r),e.t0=a.ji,!e.t0){e.next=6;break}return e.next=5,SE(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.oa(t,a)}));case 5:a=e.sent;case 6:return u=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,u),e.abrupt("return",(qS(t,n.targetId,s.la),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,SE(t.localStore,n,!0);case 3:return u=e.sent,c=new mS(n,u.os),l=c.oa(u.documents),f=Lw.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),h=c.applyChanges(l,t.isPrimaryClient,f),qS(t,r,h.la),d=new yS(n,r,c),e.abrupt("return",(t.da.set(n,d),t.Aa.has(r)?t.Aa.get(r).push(n):t.Aa.set(r,[n]),h.snapshot));case 11:case"end":return e.stop()}}),e)}))),_S.apply(this,arguments)}function ES(e,t){return IS.apply(this,arguments)}function IS(){return IS=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ly(t),i=r.da.get(n),!((a=r.Aa.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Aa.set(i.targetId,a.filter((function(e){return!kb(e,n)}))),void r.da.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,EE(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),dI(r.remoteStore,i.targetId),zS(r,i.targetId)})).catch(Wy);case 9:e.next=14;break;case 11:return zS(r,i.targetId),e.next=14,EE(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),IS.apply(this,arguments)}function SS(e,t,n){return TS.apply(this,arguments)}function TS(){return TS=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pT(t),e.prev=1,e.next=4,function(e,t){var n,r,i=ly(e),a=Ty.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Fb());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Cb(),s=Fb();return i.es.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=Ln(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=cw(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new hw(c.key,l,Tk(l.value.mapValue),rw.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Pb(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ga[e.currentUser.toKey()];r||(r=new zg(Ey)),r=r.insert(t,n),e.ga[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,GS(i,a.changes);case 9:return e.next=11,NI(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),u=$I(e.t0,"Failed to persist write"),r.reject(u);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),TS.apply(this,arguments)}function CS(e,t){return NS.apply(this,arguments)}function NS(){return NS=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ly(t),e.prev=1,e.next=4,bE(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ma.get(t);n&&(cy(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Ta=!0:e.modifiedDocuments.size>0?cy(n.Ta):e.removedDocuments.size>0&&(cy(n.Ta),n.Ta=!1))})),e.next=8,GS(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Wy(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),NS.apply(this,arguments)}function AS(e,t,n){var r=ly(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.da.forEach((function(e,n){var r=n.view.B_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=ly(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Ln(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.B_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&sS(n)}(r.eventManager,t),i.length&&r.Ea.i_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function PS(e,t,n){return OS.apply(this,arguments)}function OS(){return OS=s(o().mark((function e(t,n,r){var i,a,u,s,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=ly(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ma.get(n),!(u=a&&a.key)){e.next=14;break}return s=(s=new zg(Ry.comparator)).insert(u,Ck.newNoDocument(u,Cy.min())),c=Fb().add(u),l=new Dw(Cy.min(),new Map,new zg(Ey),s,c),e.next=9,CS(i,l);case 9:i.Va=i.Va.remove(u),i.ma.delete(n),WS(i),e.next=16;break;case 14:return e.next=16,EE(i.localStore,n,!1).then((function(){return zS(i,n,r)})).catch(Wy);case 16:case"end":return e.stop()}}),e)}))),OS.apply(this,arguments)}function RS(e,t){return DS.apply(this,arguments)}function DS(){return DS=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ly(t),i=n.batch.batchId,e.prev=1,e.next=4,gE(r.localStore,n);case 4:return a=e.sent,VS(r,i,null),US(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,GS(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Wy(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),DS.apply(this,arguments)}function LS(e,t,n){return MS.apply(this,arguments)}function MS(){return MS=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ly(t),e.prev=1,e.next=4,function(e,t){var n=ly(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return cy(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,VS(i,n,r),US(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,GS(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Wy(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),MS.apply(this,arguments)}function FS(e,t){return jS.apply(this,arguments)}function jS(){return jS=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gI((r=ly(t)).remoteStore)||iy("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=ly(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.pa.get(i)||[]).push(n),r.pa.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),u=$I(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(u);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),jS.apply(this,arguments)}function US(e,t){(e.pa.get(t)||[]).forEach((function(e){e.resolve()})),e.pa.delete(t)}function VS(e,t,n){var r=ly(e),i=r.ga[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ga[r.currentUser.toKey()]=i}}function zS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Ln(e.Aa.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.da.delete(a),n&&e.Ea.ba(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Aa.delete(t),e.isPrimaryClient&&e.fa.Rr(t).forEach((function(t){e.fa.containsKey(t)||BS(e,t)}))}function BS(e,t){e.Ra.delete(t.path.canonicalString());var n=e.Va.get(t);null!==n&&(dI(e.remoteStore,n),e.Va=e.Va.remove(t),e.ma.delete(n),WS(e))}function qS(e,t,n){var r,i=Ln(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof pS?(e.fa.addReference(a.key,t),KS(e,a)):a instanceof vS?(iy("SyncEngine","Document no longer in limbo: "+a.key),e.fa.removeReference(a.key,t),e.fa.containsKey(a.key)||BS(e,a.key)):sy()}}catch(o){i.e(o)}finally{i.f()}}function KS(e,t){var n=t.key,r=n.path.canonicalString();e.Va.get(n)||e.Ra.has(r)||(iy("SyncEngine","New document in limbo: "+n),e.Ra.add(r),WS(e))}function WS(e){for(;e.Ra.size>0&&e.Va.size<e.maxConcurrentLimboResolutions;){var t=e.Ra.values().next().value;e.Ra.delete(t);var n=new Ry(Ay.fromString(t)),r=e.ya.next();e.ma.set(r,new gS(n)),e.Va=e.Va.insert(n,r),hI(e.remoteStore,new _x(vb(cb(n.path)),r,"TargetPurposeLimboResolution",ag.ae))}}function GS(e,t,n){return HS.apply(this,arguments)}function HS(){return HS=s(o().mark((function e(t,n,r){var i,a,u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ly(t),a=[],u=[],c=[],e.t0=i.da.isEmpty(),e.t0){e.next=9;break}return i.da.forEach((function(e,t){c.push(i.Sa(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=hE.Qi(t.targetId,e);u.push(n)}})))})),e.next=6,Promise.all(c);case 6:return i.Ea.i_(a),e.next=9,function(){var e=s(o().mark((function e(t,n){var r,i,a,u,s,c,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ly(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Hy.forEach(n,(function(t){return Hy.forEach(t.ki,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Hy.forEach(t.qi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Xy(e.t0)){e.next=10;break}throw e.t0;case 10:iy("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Ln(n);try{for(i.s();!(a=i.n()).done;)u=a.value,s=u.targetId,u.fromCache||(c=r.Yi.get(s),l=c.snapshotVersion,f=c.withLastLimboFreeSnapshotVersion(l),r.Yi=r.Yi.insert(s,f))}catch(o){i.e(o)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,u);case 9:case"end":return e.stop()}}),e)}))),HS.apply(this,arguments)}function QS(e,t){return YS.apply(this,arguments)}function YS(){return(YS=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=ly(t)).currentUser.isEqual(n)){e.next=11;break}return iy("SyncEngine","User change. New user:",n.toKey()),e.next=5,mE(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.pa.forEach((function(e){e.forEach((function(e){e.reject(new hy(fy.CANCELLED,t))}))})),e.pa.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,GS(r,i.ns);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $S(e,t){var n=ly(e),r=n.ma.get(t);if(r&&r.Ta)return Fb().add(r.key);var i=Fb(),a=n.Aa.get(t);if(!a)return i;var o,u=Ln(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.da.get(s);i=i.unionWith(c.view.sa)}}catch(l){u.e(l)}finally{u.f()}return i}function JS(e,t){return XS.apply(this,arguments)}function XS(){return XS=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ly(t),e.next=3,SE(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Pa(i),e.abrupt("return",(r.isPrimaryClient&&qS(r,n.targetId,a.la),a));case 6:case"end":return e.stop()}}),e)}))),XS.apply(this,arguments)}function ZS(e,t){return eT.apply(this,arguments)}function eT(){return(eT=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ly(t),e.abrupt("return",CE(r.localStore,n).then((function(e){return GS(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tT(e,t,n,r){return nT.apply(this,arguments)}function nT(){return nT=s(o().mark((function e(t,n,r,i){var a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ly(t),e.next=3,function(e,t){var n=ly(e),r=ly(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.vn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Hy.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(u=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,NI(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(VS(a,n,i||null),US(a,n),function(e,t){ly(ly(e).mutationQueue).Fn(t)}(a.localStore,n)):sy();case 11:return e.next=13,GS(a,u);case 13:e.next=16;break;case 15:iy("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),nT.apply(this,arguments)}function rT(e,t){return iT.apply(this,arguments)}function iT(){return(iT=s(o().mark((function e(t,n){var r,i,a,u,s,c,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dT(r=ly(t)),pT(r),!0!==n||!0===r.wa){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,aT(r,i.toArray());case 5:return a=e.sent,r.wa=!0,e.next=9,WI(r.remoteStore,!0);case 9:u=Ln(a);try{for(u.s();!(s=u.n()).done;)c=s.value,hI(r.remoteStore,c)}catch(o){u.e(o)}finally{u.f()}e.next=25;break;case 13:if(!1!==n||!1===r.wa){e.next=25;break}return l=[],f=Promise.resolve(),r.Aa.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?l.push(t):f=f.then((function(){return zS(r,t),EE(r.localStore,t,!0)})),dI(r.remoteStore,t)})),e.next=19,f;case 19:return e.next=21,aT(r,l);case 21:return function(e){var t=ly(e);t.ma.forEach((function(e,n){dI(t.remoteStore,n)})),t.fa.Vr(),t.ma=new Map,t.Va=new zg(Ry.comparator)}(r),r.wa=!1,e.next=25,WI(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aT(e,t,n){return oT.apply(this,arguments)}function oT(){return oT=s(o().mark((function e(t,n,r){var i,a,u,s,c,l,f,h,d,p,v,m,y,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=ly(t),a=[],u=[],s=Ln(n),e.prev=2,s.s();case 4:if((c=s.n()).done){e.next=45;break}if(l=c.value,f=void 0,!(h=i.Aa.get(l))||0===h.length){e.next=34;break}return e.next=11,_E(i.localStore,vb(h[0]));case 11:f=e.sent,d=Ln(h),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,m=i.da.get(v),e.next=20,JS(i,m);case 20:(y=e.sent).snapshot&&u.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,TE(i.localStore,l);case 36:return g=e.sent,e.next=39,_E(i.localStore,g);case 39:return f=e.sent,e.next=42,xS(i,uT(g),l,!1,f.resumeToken);case 42:a.push(f);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.Ea.i_(u),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),oT.apply(this,arguments)}function uT(e){return sb(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function sT(e){return function(e){return ly(ly(e).persistence).Bi()}(ly(e).localStore)}function cT(e,t,n,r){return lT.apply(this,arguments)}function lT(){return lT=s(o().mark((function e(t,n,r,i){var a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=ly(t)).wa){e.next=3;break}return e.abrupt("return",void iy("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((u=a.Aa.get(n))&&u.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,CE(a.localStore,_b(u[0]));case 10:return s=e.sent,c=Dw.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Yg.EMPTY_BYTE_STRING),e.next=14,GS(a,s,c);case 14:return e.abrupt("break",20);case 15:return e.next=17,EE(a.localStore,n,!0);case 17:return zS(a,n,i),e.abrupt("break",20);case 19:sy();case 20:case"end":return e.stop()}}),e)}))),lT.apply(this,arguments)}function fT(e,t,n){return hT.apply(this,arguments)}function hT(){return hT=s(o().mark((function e(t,n,r){var i,a,u,s,c,l,f,h,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=dT(t)).wa){e.next=45;break}a=Ln(n),e.prev=3,a.s();case 5:if((u=a.n()).done){e.next=21;break}if(s=u.value,!i.Aa.has(s)){e.next=10;break}return iy("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,TE(i.localStore,s);case 12:return c=e.sent,e.next=15,_E(i.localStore,c);case 15:return l=e.sent,e.next=18,xS(i,uT(c),l.targetId,!1,l.resumeToken);case 18:hI(i.remoteStore,l);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:f=Ln(r),e.prev=30,d=o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.Aa.has(t),!e.t0){e.next=5;break}return e.next=5,EE(i.localStore,t,!1).then((function(){dI(i.remoteStore,t),zS(i,t)})).catch(Wy);case 5:case"end":return e.stop()}}),e)})),f.s();case 33:if((h=f.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),f.e(e.t2);case 42:return e.prev=42,f.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),hT.apply(this,arguments)}function dT(e){var t=ly(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=CS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=$S.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=PS.bind(null,t),t.Ea.i_=oS.bind(null,t.eventManager),t.Ea.ba=uS.bind(null,t.eventManager),t}function pT(e){var t=ly(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=RS.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=LS.bind(null,t),t}function vT(e,t,n){var r=ly(e);(function(){var e=s(o().mark((function e(t,n,r){var i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=ly(e),r=Jw(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Kr.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(dS(i)),a=new hS(i,t.localStore,n.serializer),e.next=15,n.Da();case 15:u=e.sent;case 16:if(!u){e.next=26;break}return e.next=19,a.J_(u);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.Da();case 23:u=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return c=e.sent,e.next=31,GS(t,c.X_,void 0);case 31:return e.next=33,function(e,t){var n=ly(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Kr.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(c.progress),e.abrupt("return",Promise.resolve(c.Z_));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(oy("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var mT=function(){function e(){On(this,e),this.synchronizeTabs=!1}return Dn(e,[{key:"initialize",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=eI(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return vE(this.persistence,new dE,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new nE(iE.jr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new qE}},{key:"terminate",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),yT=function(e){Fn(n,e);var t=Vn(n);function n(e,r,i){var a;return On(this,n),(a=t.call(this)).va=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Dn(n,[{key:"initialize",value:function(){var e=s(o().mark((function e(t){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yi(jn(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.va.initialize(this,t);case 4:return e.next=6,pT(this.va.syncEngine);case 6:return e.next=8,NI(this.va.remoteStore);case 8:return e.next=10,this.persistence.mi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return vE(this.persistence,new dE,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new O_(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new ig(t,this.persistence);return new rg(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=fE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?y_.withCacheSize(this.cacheSizeBytes):y_.DEFAULT;return new sE(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,XE(),ZE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new qE}}]),n}(mT),gT=function(e){Fn(n,e);var t=Vn(n);function n(e,r){var i;return On(this,n),(i=t.call(this,e,r,!1)).va=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Dn(n,[{key:"initialize",value:function(){var e=s(o().mark((function e(t){var r,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yi(jn(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.va.syncEngine,e.t0=this.sharedClientState instanceof BE,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={zs:tT.bind(null,r),js:cT.bind(null,r),Hs:fT.bind(null,r),Bi:sT.bind(null,r),Gs:ZS.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.mi(function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rT(i.va.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=XE();if(!BE.v(t))throw new hy(fy.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=fE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new BE(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(yT),kT=function(){function e(){On(this,e)}return Dn(e,[{key:"initialize",value:function(){var e=s(o().mark((function e(t,n){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return AS(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=QS.bind(null,this.syncEngine),e.next=12,WI(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new tS}},{key:"createDatastore",value:function(e){var t=eI(e.databaseInfo.databaseId),n=function(e){return new JE(e)}(e.databaseInfo);return function(e,t,n,r){return new aI(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new uI(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return AS(t.syncEngine,e,0)}),WE.v()?new WE:new KE)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new kS(e,t,n,r,i,a);return o&&(u.wa=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ly(t),iy("RemoteStore","RemoteStore shutting down."),n.w_.add(5),e.next=5,lI(n);case 5:n.b_.shutdown(),n.D_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function bT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return s(o().mark((function r(){var i;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var wT=function(){function e(t){On(this,e),this.observer=t,this.muted=!1}return Dn(e,[{key:"next",value:function(e){this.observer.next&&this.Ca(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ca(this.observer.error,e):ay("Uncaught Error in snapshot listener:",e.toString())}},{key:"Fa",value:function(){this.muted=!0}},{key:"Ca",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),xT=function(){function e(t,n){var r=this;On(this,e),this.Ma=t,this.serializer=n,this.metadata=new dy,this.buffer=new Uint8Array,this.xa=new TextDecoder("utf-8"),this.Oa().then((function(e){e&&e.j_()?r.metadata.resolve(e.z_.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.z_))))}),(function(e){return r.metadata.reject(e)}))}return Dn(e,[{key:"close",value:function(){return this.Ma.cancel()}},{key:"getMetadata",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Da",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Oa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oa",value:function(){var e=s(o().mark((function e(){var t,n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Na();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.xa.decode(t),r=Number(n),isNaN(r)&&this.Ba("length string (".concat(n,") is not valid number")),e.next=9,this.La(r);case 9:return i=e.sent,e.abrupt("return",new lS(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ka",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Na",value:function(){var e=s(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.ka()<0)){e.next=7;break}return e.next=3,this.qa();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.ka())<0&&this.Ba("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"La",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.qa();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Ba("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.xa.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ba",value:function(e){throw this.Ma.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"qa",value:function(){var e=s(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ma.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),_T=function(){function e(t){On(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Dn(e,[{key:"lookup",value:function(){var e=s(o().mark((function e(t){var n,r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new hy(fy.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=s(o().mark((function e(t,n){var r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ly(t),i=ix(r.serializer)+"/documents",a={documents:n.map((function(e){return ex(r.serializer,e)}))},e.next=5,r.wo("BatchGetDocuments",i,a,n.length);case 5:return u=e.sent,s=new Map,u.forEach((function(e){var t=sx(r.serializer,e);s.set(t.key.toString(),t)})),c=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());cy(!!t),c.push(t)})),c));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new gw(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=s(o().mark((function e(){var t,n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Ry.fromPath(t);n.mutations.push(new kw(r,n.precondition(r)))})),e.next=7,function(){var e=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ly(t),i=ix(r.serializer)+"/documents",a={writes:n.map((function(e){return cx(r.serializer,e)}))},e.next=3,r.mo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw sy();t=Cy.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new hy(fy.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Cy.min())?rw.exists(!1):rw.updateTime(t):rw.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Cy.min()))throw new hy(fy.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return rw.updateTime(t)}return rw.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),ET=function(){function e(t,n,r,i,a){On(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Qa=r.maxAttempts,this.$o=new tI(this.asyncQueue,"transaction_retry")}return Dn(e,[{key:"run",value:function(){this.Qa-=1,this.Ka()}},{key:"Ka",value:function(){var e=this;this.$o.Oo(s(o().mark((function t(){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new _T(e.datastore),(r=e.$a(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ua(t)}))}))})).catch((function(t){e.Ua(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"$a",value:function(e){try{var t=this.updateFunction(e);return!og(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ua",value:function(e){var t=this;this.Qa>0&&this.Wa(e)?(this.Qa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Ka(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Wa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Ew(t)}return!1}}]),e}(),IT=function(){function e(t,n,r,i){var a=this;On(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ey.UNAUTHENTICATED,this.clientId=_y.V(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return iy("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return iy("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return Dn(e,[{key:"getConfiguration",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new hy(fy.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new dy;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(s(o().mark((function n(){var r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=$I(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function ST(e,t){return TT.apply(this,arguments)}function TT(){return TT=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),iy("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,mE(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),TT.apply(this,arguments)}function CT(e,t){return NT.apply(this,arguments)}function NT(){return NT=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,PT(t);case 3:return r=e.sent,iy("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return qI(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return qI(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),NT.apply(this,arguments)}function AT(e){return"FirebaseError"===e.name?e.code===fy.FAILED_PRECONDITION||e.code===fy.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function PT(e){return OT.apply(this,arguments)}function OT(){return(OT=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return iy("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,ST(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),AT(n=e.t0)){e.next=13;break}throw n;case 13:return oy("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,ST(t,new mT);case 16:e.next=21;break;case 18:return iy("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,ST(t,new mT);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function RT(e){return DT.apply(this,arguments)}function DT(){return(DT=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return iy("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,CT(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return iy("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,CT(t,new kT);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function LT(e){return PT(e).then((function(e){return e.persistence}))}function MT(e){return PT(e).then((function(e){return e.localStore}))}function FT(e){return RT(e).then((function(e){return e.remoteStore}))}function jT(e){return RT(e).then((function(e){return e.syncEngine}))}function UT(e){return RT(e).then((function(e){return e.datastore}))}function VT(e){return zT.apply(this,arguments)}function zT(){return(zT=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RT(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=bS.bind(null,n.syncEngine),r.onUnlisten=ES.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function BT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new dy;return e.asyncQueue.enqueueAndForget(s(o().mark((function i(){return o().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new wT({next:function(a){t.enqueueAndForget((function(){return iS(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new hy(fy.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new hy(fy.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new cS(cb(n.path),a,{includeMetadataChanges:!0,G_:!0});return nS(e,o)},i.next=3,VT(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function qT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new dy;return e.asyncQueue.enqueueAndForget(s(o().mark((function i(){return o().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new wT({next:function(n){t.enqueueAndForget((function(){return iS(e,o)})),n.fromCache&&"server"===r.source?i.reject(new hy(fy.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new cS(n,a,{includeMetadataChanges:!0,G_:!0});return nS(e,o)},i.next=3,VT(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function KT(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var WT=new Map;function GT(e,t,n){if(!n)throw new hy(fy.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function HT(e,t,n,r){if(!0===t&&!0===r)throw new hy(fy.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function QT(e){if(!Ry.isDocumentKey(e))throw new hy(fy.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function YT(e){if(Ry.isDocumentKey(e))throw new hy(fy.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function $T(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":sy()}function JT(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new hy(fy.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=$T(e);throw new hy(fy.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function XT(e,t){if(t<=0)throw new hy(fy.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var ZT=function(){function e(t){var n,r;if(On(this,e),void 0===t.host){if(void 0!==t.ssl)throw new hy(fy.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new hy(fy.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}HT("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KT(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new hy(fy.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new hy(fy.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new hy(fy.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return Dn(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),eC=function(){function e(t,n,r,i){On(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZT({}),this._settingsFrozen=!1}return Dn(e,[{key:"app",get:function(){if(!this._app)throw new hy(fy.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new hy(fy.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZT(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new vy;switch(e.type){case"firstParty":return new ky(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new hy(fy.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=WT.get(e);t&&(iy("ComponentProvider","Removing Datastore"),WT.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function tC(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=JT(e,eC))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&oy("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=ey.MOCK_USER;else{u=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Gn(JSON.stringify({alg:"none",type:"JWT"})),Gn(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new hy(fy.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new ey(c)}e._authCredentials=new my(new py(u,s))}}var nC=function(){function e(t,n,r){On(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Dn(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),rC=function(){function e(t,n,r){On(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Dn(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new iC(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),iC=function(e){Fn(n,e);var t=Vn(n);function n(e,r,i){var a;return On(this,n),(a=t.call(this,e,r,cb(i)))._path=i,a.type="collection",a}return Dn(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new rC(this.firestore,null,new Ry(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(nC);function aC(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=gr(e),GT("collection","path",t),e instanceof eC){var a=Ay.fromString.apply(Ay,[t].concat(r));return YT(a),new iC(e,null,a)}if(!(e instanceof rC||e instanceof iC))throw new hy(fy.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ay.fromString.apply(Ay,[t].concat(r)));return YT(o),new iC(e.firestore,null,o)}function oC(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=gr(e),1===arguments.length&&(t=_y.V()),GT("doc","path",t),e instanceof eC){var a=Ay.fromString.apply(Ay,[t].concat(r));return QT(a),new rC(e,null,new Ry(a))}if(!(e instanceof rC||e instanceof iC))throw new hy(fy.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ay.fromString.apply(Ay,[t].concat(r)));return QT(o),new rC(e.firestore,e instanceof iC?e.converter:null,new Ry(o))}function uC(e,t){return e=gr(e),t=gr(t),(e instanceof rC||e instanceof iC)&&(t instanceof rC||t instanceof iC)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function sC(e,t){return e=gr(e),t=gr(t),e instanceof nC&&t instanceof nC&&e.firestore===t.firestore&&kb(e._query,t._query)&&e.converter===t.converter}var cC=function(){function e(){var t=this;On(this,e),this.Ga=Promise.resolve(),this.za=[],this.ja=!1,this.Ha=[],this.Ja=null,this.Ya=!1,this.Za=!1,this.Xa=[],this.$o=new tI(this,"async_queue_retry"),this.eu=function(){var e=ZE();e&&iy("AsyncQueue","Visibility state changed to "+e.visibilityState),t.$o.Bo()};var n=ZE();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.eu)}return Dn(e,[{key:"isShuttingDown",get:function(){return this.ja}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.tu(),this.nu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.ja){this.ja=!0,this.Za=e||!1;var t=ZE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.eu)}}},{key:"enqueue",value:function(e){var t=this;if(this.tu(),this.ja)return new Promise((function(){}));var n=new dy;return this.nu((function(){return t.ja&&t.Za?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.za.push(e),t.ru()}))}},{key:"ru",value:function(){var e=s(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.za.length){e.next=14;break}return e.prev=1,e.next=4,this.za[0]();case 4:this.za.shift(),this.$o.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Xy(e.t0)){e.next=12;break}throw e.t0;case 12:iy("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.za.length>0&&this.$o.Oo((function(){return t.ru()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"nu",value:function(e){var t=this,n=this.Ga.then((function(){return t.Ya=!0,e().catch((function(e){t.Ja=e,t.Ya=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ay("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ya=!1,e}))}));return this.Ga=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.tu(),this.Xa.indexOf(e)>-1&&(t=0);var i=YI.createAndSchedule(this,e,t,n,(function(e){return r.iu(e)}));return this.Ha.push(i),i}},{key:"tu",value:function(){this.Ja&&sy()}},{key:"verifyOperationInProgress",value:function(){}},{key:"su",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Ga,e.next=3,t;case 3:if(t!==this.Ga){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ou",value:function(e){var t,n=Ln(this.Ha);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"_u",value:function(e){var t=this;return this.su().then((function(){t.Ha.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Ln(t.Ha);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.su()}))}},{key:"au",value:function(e){this.Xa.push(e)}},{key:"iu",value:function(e){var t=this.Ha.indexOf(e);this.Ha.splice(t,1)}}]),e}();function lC(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Ln(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var fC=function(){function e(){On(this,e),this._progressObserver={},this._taskCompletionResolver=new dy,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Dn(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),hC=function(e){Fn(n,e);var t=Vn(n);function n(e,r,i,a){var o;return On(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new cC,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return Dn(n,[{key:"_terminate",value:function(){return this._firestoreClient||pC(this),this._firestoreClient.terminate()}}]),n}(eC);function dC(e){return e._firestoreClient||pC(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function pC(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new rk(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,KT(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new IT(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function vC(e,t,n){var r=new dy;return e.asyncQueue.enqueue(s(o().mark((function i(){var a;return o().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,ST(e,n);case 3:return i.next=5,CT(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),AT(a=i.t0)){i.next=13;break}throw a;case 13:oy("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function mC(e){return function(e){var t=new dy;return e.asyncQueue.enqueueAndForget(s(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=FS,n.next=3,jT(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(dC(e=JT(e,hC)))}function yC(e){return function(e){return e.asyncQueue.enqueue(s(o().mark((function t(){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,LT(e);case 2:return n=t.sent,t.next=5,FT(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=ly(e);return t.w_.delete(0),sI(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(dC(e=JT(e,hC)))}function gC(e){return function(e){return e.asyncQueue.enqueue(s(o().mark((function t(){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,LT(e);case 2:return n=t.sent,t.next=5,FT(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=ly(t)).w_.add(0),e.next=4,lI(n);case 4:n.D_.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(dC(e=JT(e,hC)))}function kC(e,t){var n=dC(e=JT(e,hC)),r=new fC;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new xT(e,t)}(function(e,t){if(e instanceof Uint8Array)return bT(e,t);if(e instanceof ArrayBuffer)return bT(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?Cw().encode(e):e),t)}(n,eI(t));e.asyncQueue.enqueueAndForget(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=vT,t.next=3,jT(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function bC(e,t){return function(e,t){return e.asyncQueue.enqueue(s(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=ly(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Kr.getNamedQuery(e,t)}))},n.next=3,MT(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(dC(e=JT(e,hC)),t).then((function(t){return t?new nC(e,null,t.query):null}))}function wC(e){if(e._initialized||e._terminated)throw new hy(fy.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var xC=function(){function e(t){On(this,e),this._byteString=t}return Dn(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Yg.fromBase64String(t))}catch(t){throw new hy(fy.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Yg.fromUint8Array(t))}}]),e}(),_C=function(){function e(){On(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new hy(fy.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Oy(n)}return Dn(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var EC=Dn((function e(t){On(this,e),this._methodName=t})),IC=function(){function e(t,n){if(On(this,e),!isFinite(t)||t<-90||t>90)throw new hy(fy.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new hy(fy.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Dn(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Ey(this._lat,e._lat)||Ey(this._long,e._long)}}]),e}(),SC=/^__.*__$/,TC=function(){function e(t,n,r){On(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Dn(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new hw(e,this.data,this.fieldMask,t,this.fieldTransforms):new fw(e,this.data,t,this.fieldTransforms)}}]),e}(),CC=function(){function e(t,n,r){On(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Dn(e,[{key:"toMutation",value:function(e,t){return new hw(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function NC(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw sy()}}var AC=function(){function e(t,n,r,i,a,o){On(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.uu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Dn(e,[{key:"path",get:function(){return this.settings.path}},{key:"cu",get:function(){return this.settings.cu}},{key:"lu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"hu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.lu({path:n,Pu:!1});return r.Iu(e),r}},{key:"Tu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.lu({path:n,Pu:!1});return r.uu(),r}},{key:"Eu",value:function(e){return this.lu({path:void 0,Pu:!0})}},{key:"du",value:function(e){return $C(e,this.settings.methodName,this.settings.Au||!1,this.path,this.settings.Ru)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"uu",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Iu(this.path.get(e))}},{key:"Iu",value:function(e){if(0===e.length)throw this.du("Document fields must not be empty");if(NC(this.cu)&&SC.test(e))throw this.du('Document fields cannot begin and end with "__"')}}]),e}(),PC=function(){function e(t,n,r){On(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||eI(t)}return Dn(e,[{key:"Vu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new AC({cu:e,methodName:t,Ru:n,path:Oy.emptyPath(),Pu:!1,Au:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function OC(e){var t=e._freezeSettings(),n=eI(e._databaseId);return new PC(e._databaseId,!!t.ignoreUndefinedProperties,n)}function RC(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Vu(a.merge||a.mergeFields?2:0,t,n,i);GC("Data must be an object, but it was:",o,r);var u,s,c=KC(r,o);if(a.merge)u=new Hg(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Ln(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=HC(t,l.value,n);if(!o.contains(d))throw new hy(fy.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));JC(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new Hg(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new TC(new Sk(c),u,s)}var DC=function(e){Fn(n,e);var t=Vn(n);function n(){return On(this,n),t.apply(this,arguments)}return Dn(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.cu)throw 1===e.cu?e.du("".concat(this._methodName,"() can only appear at the top level of your update data")):e.du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(EC);function LC(e,t,n){return new AC({cu:3,Ru:t.settings.Ru,methodName:e._methodName,Pu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var MC=function(e){Fn(n,e);var t=Vn(n);function n(){return On(this,n),t.apply(this,arguments)}return Dn(n,[{key:"_toFieldTransform",value:function(e){return new tw(e.path,new Hb)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(EC),FC=function(e){Fn(n,e);var t=Vn(n);function n(e,r){var i;return On(this,n),(i=t.call(this,e)).mu=r,i}return Dn(n,[{key:"_toFieldTransform",value:function(e){var t=LC(this,e,!0),n=this.mu.map((function(e){return qC(e,t)})),r=new Qb(n);return new tw(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(EC),jC=function(e){Fn(n,e);var t=Vn(n);function n(e,r){var i;return On(this,n),(i=t.call(this,e)).mu=r,i}return Dn(n,[{key:"_toFieldTransform",value:function(e){var t=LC(this,e,!0),n=this.mu.map((function(e){return qC(e,t)})),r=new $b(n);return new tw(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(EC),UC=function(e){Fn(n,e);var t=Vn(n);function n(e,r){var i;return On(this,n),(i=t.call(this,e)).fu=r,i}return Dn(n,[{key:"_toFieldTransform",value:function(e){var t=new Xb(e.serializer,Bb(e.serializer,this.fu));return new tw(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(EC);function VC(e,t,n,r){var i=e.Vu(1,t,n);GC("Data must be an object, but it was:",i,r);var a=[],o=Sk.empty();Ug(r,(function(e,r){var u=YC(t,e,n);r=gr(r);var s=i.Tu(u);if(r instanceof DC)a.push(u);else{var c=qC(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Hg(a);return new CC(o,u,i.fieldTransforms)}function zC(e,t,n,r,i,a){var o=e.Vu(1,t,n),u=[HC(t,r,n)],s=[i];if(a.length%2!=0)throw new hy(fy.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(HC(t,a[c])),s.push(a[c+1]);for(var l=[],f=Sk.empty(),h=u.length-1;h>=0;--h)if(!JC(l,u[h])){var d=u[h],p=s[h];p=gr(p);var v=o.Tu(d);if(p instanceof DC)l.push(d);else{var m=qC(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Hg(l);return new CC(f,y,o.fieldTransforms)}function BC(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return qC(n,e.Vu(r?4:3,t))}function qC(e,t){if(WC(e=gr(e)))return GC("Unsupported field value:",t,e),KC(e,t);if(e instanceof EC)return function(e,t){if(!NC(t.cu))throw t.du("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.du("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Pu&&4!==t.cu)throw t.du("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Ln(e);try{for(a.s();!(n=a.n()).done;){var o=qC(n.value,t.Eu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=gr(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Bb(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Ty.fromDate(e);return{timestampValue:Qw(t.serializer,n)}}if(e instanceof Ty){var r=new Ty(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Qw(t.serializer,r)}}if(e instanceof IC)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof xC)return{bytesValue:Yw(t.serializer,e._byteString)};if(e instanceof rC){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.du("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Xw(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.du("Unsupported field value: ".concat($T(e)))}(e,t)}function KC(e,t){var n={};return Vg(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ug(e,(function(e,r){var i=qC(r,t.hu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function WC(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ty||e instanceof IC||e instanceof xC||e instanceof rC||e instanceof EC)}function GC(e,t,n){if(!WC(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=$T(n);throw"an object"===r?t.du(e+" a custom object"):t.du(e+" "+r)}}function HC(e,t,n){if((t=gr(t))instanceof _C)return t._internalPath;if("string"==typeof t)return YC(e,t);throw $C("Field path arguments must be of type string or ",e,!1,void 0,n)}var QC=new RegExp("[~\\*/\\[\\]]");function YC(e,t,n){if(t.search(QC)>=0)throw $C("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return zn(_C,br(t.split(".")))._internalPath}catch(Kh){throw $C("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function $C(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new hy(fy.INVALID_ARGUMENT,u+e+s)}function JC(e,t){return e.some((function(e){return e.isEqual(t)}))}var XC=function(){function e(t,n,r,i,a){On(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Dn(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new rC(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new ZC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(eN("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),ZC=function(e){Fn(n,e);var t=Vn(n);function n(){return On(this,n),t.apply(this,arguments)}return Dn(n,[{key:"data",value:function(){return Yi(jn(n.prototype),"data",this).call(this)}}]),n}(XC);function eN(e,t){return"string"==typeof t?YC(e,t):t instanceof _C?t._internalPath:t._delegate._internalPath}function tN(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new hy(fy.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var nN=Dn((function e(){On(this,e)})),rN=function(e){Fn(n,e);var t=Vn(n);function n(){return On(this,n),t.apply(this,arguments)}return Dn(n)}(nN);function iN(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof nN&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof oN})).length,n=e.filter((function(e){return e instanceof aN})).length;if(t>1||t>0&&n>0)throw new hy(fy.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=Ln(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var aN=function(e){Fn(n,e);var t=Vn(n);function n(e,r,i){var a;return On(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return Dn(n,[{key:"_apply",value:function(e){var t=this._parse(e);return gN(e._query,t),new nC(e.firestore,e.converter,yb(e._query,t))}},{key:"_parse",value:function(e){var t=OC(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new hy(fy.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){yN(o,a);var s,c=[],l=Ln(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(mN(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=mN(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||yN(o,a),u=BC(n,t,o,"in"===a||"not-in"===a);return Lk.create(i,a,u)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(rN);var oN=function(e){Fn(n,e);var t=Vn(n);function n(e,r){var i;return On(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return Dn(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Mk.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=Ln(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;gN(r,a),r=yb(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new nC(e.firestore,e.converter,yb(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(nN);var uN=function(e){Fn(n,e);var t=Vn(n);function n(e,r){var i;return On(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return Dn(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new hy(fy.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new hy(fy.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ok(t,n);return function(e,t){if(null===fb(e)){var n=hb(e);null!==n&&kN(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new nC(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new ub(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(rN);var sN=function(e){Fn(n,e);var t=Vn(n);function n(e,r,i){var a;return On(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return Dn(n,[{key:"_apply",value:function(e){return new nC(e.firestore,e.converter,gb(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(rN);var cN=function(e){Fn(n,e);var t=Vn(n);function n(e,r,i){var a;return On(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return Dn(n,[{key:"_apply",value:function(e){var t=vN(e,this.type,this._docOrFields,this._inclusive);return new nC(e.firestore,e.converter,function(e,t){return new ub(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(rN);function lN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cN._create("startAt",t,!0)}function fN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cN._create("startAfter",t,!1)}var hN=function(e){Fn(n,e);var t=Vn(n);function n(e,r,i){var a;return On(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return Dn(n,[{key:"_apply",value:function(e){var t=vN(e,this.type,this._docOrFields,this._inclusive);return new nC(e.firestore,e.converter,function(e,t){return new ub(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(rN);function dN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return hN._create("endBefore",t,!1)}function pN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return hN._create("endAt",t,!0)}function vN(e,t,n,r){if(n[0]=gr(n[0]),n[0]instanceof XC)return function(e,t,n,r,i){if(!r)throw new hy(fy.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Ln(pb(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(pk(t,r.key));else{var c=r.data.field(s.field);if(ek(c))throw new hy(fy.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new hy(fy.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Nk(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=OC(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new hy(fy.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new hy(fy.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!db(e)&&-1!==c.indexOf("/"))throw new hy(fy.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Ay.fromString(c));if(!Ry.isDocumentKey(l))throw new hy(fy.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Ry(l);u.push(pk(t,f))}else{var h=BC(n,r,c);u.push(h)}}return new Nk(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function mN(e,t,n){if("string"==typeof(n=gr(n))){if(""===n)throw new hy(fy.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!db(t)&&-1!==n.indexOf("/"))throw new hy(fy.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Ay.fromString(n));if(!Ry.isDocumentKey(r))throw new hy(fy.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return pk(e,new Ry(r))}if(n instanceof rC)return pk(e,n._key);throw new hy(fy.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat($T(n),"."))}function yN(e,t){if(!Array.isArray(e)||0===e.length)throw new hy(fy.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function gN(e,t){if(t.isInequality()){var n=hb(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new hy(fy.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=fb(e);null!==i&&kN(e,r,i)}var a=function(e,t){var n,r=Ln(e);try{for(r.s();!(n=r.n()).done;){var i,a=Ln(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new hy(fy.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new hy(fy.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function kN(e,t,n){if(!n.isEqual(t))throw new hy(fy.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var bN=function(){function e(){On(this,e)}return Dn(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(uk(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xg(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw sy()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Ug(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new IC(Xg(e.latitude),Xg(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=tk(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(nk(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Jg(e);return new Ty(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Ay.fromString(e);cy(xx(n));var r=new ik(n.get(1),n.get(3)),i=new Ry(n.popFirst(5));return r.isEqual(t)||ay("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function wN(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var xN=function(e){Fn(n,e);var t=Vn(n);function n(e){var r;return On(this,n),(r=t.call(this)).firestore=e,r}return Dn(n,[{key:"convertBytes",value:function(e){return new xC(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new rC(this.firestore,null,t)}}]),n}(bN);var _N=function(){function e(t,n){On(this,e),this.hasPendingWrites=t,this.fromCache=n}return Dn(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),EN=function(e){Fn(n,e);var t=Vn(n);function n(e,r,i,a,o,u){var s;return On(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Dn(n,[{key:"exists",value:function(){return Yi(jn(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new IN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(eN("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(XC),IN=function(e){Fn(n,e);var t=Vn(n);function n(){return On(this,n),t.apply(this,arguments)}return Dn(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Yi(jn(n.prototype),"data",this).call(this,e)}}]),n}(EN),SN=function(){function e(t,n,r,i){On(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new _N(i.hasPendingWrites,i.fromCache),this.query=r}return Dn(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new IN(n._firestore,n._userDataWriter,r.key,r,new _N(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new hy(fy.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new IN(e._firestore,e._userDataWriter,t.doc.key,t.doc,new _N(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new IN(e._firestore,e._userDataWriter,t.doc.key,t.doc,new _N(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:TN(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function TN(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return sy()}}function CN(e,t){return e instanceof EN&&t instanceof EN?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof SN&&t instanceof SN&&e._firestore===t._firestore&&sC(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var NN=function(e){Fn(n,e);var t=Vn(n);function n(e){var r;return On(this,n),(r=t.call(this)).firestore=e,r}return Dn(n,[{key:"convertBytes",value:function(e){return new xC(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new rC(this.firestore,null,t)}}]),n}(bN);function AN(e){e=JT(e,rC);var t=JT(e.firestore,hC),n=dC(t),r=new NN(t);return function(e,t){var n=new dy;return e.asyncQueue.enqueueAndForget(s(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=ly(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new hy(fy.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=$I(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,MT(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new EN(t,r,e._key,n,new _N(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function PN(e){e=JT(e,nC);var t=JT(e.firestore,hC),n=dC(t),r=new NN(t);return tN(e._query),qT(n,e._query).then((function(n){return new SN(t,r,e,n)}))}function ON(e){e=JT(e,nC);var t=JT(e.firestore,hC),n=dC(t),r=new NN(t);return function(e,t){var n=new dy;return e.asyncQueue.enqueueAndForget(s(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=s(o().mark((function e(t,n,r){var i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,SE(t,n,!0);case 3:i=e.sent,a=new mS(n,i.os),u=a.oa(i.documents),s=a.applyChanges(u,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),c=$I(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(c);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,MT(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new SN(t,r,e,n)}))}function RN(e){e=JT(e,nC);var t=JT(e.firestore,hC),n=dC(t),r=new NN(t);return qT(n,e._query,{source:"server"}).then((function(n){return new SN(t,r,e,n)}))}function DN(e,t,n){e=JT(e,rC);var r=JT(e.firestore,hC),i=wN(e.converter,t,n);return jN(r,[RC(OC(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,rw.none())])}function LN(e,t,n){e=JT(e,rC);for(var r=JT(e.firestore,hC),i=OC(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return jN(r,[("string"==typeof(t=gr(t))||t instanceof _C?zC(i,"updateDoc",e._key,t,n,o):VC(i,"updateDoc",e._key,t)).toMutation(e._key,rw.exists(!0))])}function MN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,u;e=gr(e);var c={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||lC(n[l])||(c=n[l],l++);var f,h,d,p={includeMetadataChanges:c.includeMetadataChanges};if(lC(n[l])){var v=n[l];n[l]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[l+1]=null===(a=v.error)||void 0===a?void 0:a.bind(v),n[l+2]=null===(u=v.complete)||void 0===u?void 0:u.bind(v)}if(e instanceof rC)h=JT(e.firestore,hC),d=cb(e._key.path),f={next:function(t){n[l]&&n[l](UN(h,e,t))},error:n[l+1],complete:n[l+2]};else{var m=JT(e,nC);h=JT(m.firestore,hC),d=m._query;var y=new NN(h);f={next:function(e){n[l]&&n[l](new SN(h,y,m,e))},error:n[l+1],complete:n[l+2]},tN(e._query)}return function(e,t,n,r){var i=new wT(r),a=new cS(t,i,n);return e.asyncQueue.enqueueAndForget(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=nS,t.next=3,VT(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Fa(),e.asyncQueue.enqueueAndForget(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=iS,t.next=3,VT(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(dC(h),d,p,f)}function FN(e,t){return function(e,t){var n=new wT(t);return e.asyncQueue.enqueueAndForget(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){ly(e).N_.add(t),t.next()},t.next=3,VT(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Fa(),e.asyncQueue.enqueueAndForget(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){ly(e).N_.delete(t)},t.next=3,VT(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(dC(e=JT(e,hC)),lC(t)?t:{next:t})}function jN(e,t){return function(e,t){var n=new dy;return e.asyncQueue.enqueueAndForget(s(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=SS,r.next=3,jT(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(dC(e),t)}function UN(e,t,n){var r=n.docs.get(t._key),i=new NN(e);return new EN(e,i,t._key,r,new _N(n.hasPendingWrites,n.fromCache),t.converter)}var VN={maxAttempts:5},zN=function(){function e(t,n){On(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=OC(t)}return Dn(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=BN(e,this._firestore),i=wN(r.converter,t,n),a=RC(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,rw.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=BN(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=gr(t))||t instanceof _C?zC(this._dataReader,"WriteBatch.update",i._key,t,n,o):VC(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,rw.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=BN(e,this._firestore);return this._mutations=this._mutations.concat(new gw(t._key,rw.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new hy(fy.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function BN(e,t){if((e=gr(e)).firestore!==t)throw new hy(fy.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var qN=function(e){Fn(n,e);var t=Vn(n);function n(e,r){var i;return On(this,n),(i=t.call(this,e,r))._firestore=e,i}return Dn(n,[{key:"get",value:function(e){var t=this,r=BN(e,this._firestore),i=new NN(this._firestore);return Yi(jn(n.prototype),"get",this).call(this,e).then((function(e){return new EN(t._firestore,i,r._key,e._document,new _N(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){On(this,e),this._firestore=t,this._transaction=n,this._dataReader=OC(t)}return Dn(e,[{key:"get",value:function(e){var t=this,n=BN(e,this._firestore),r=new xN(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return sy();var i=e[0];if(i.isFoundDocument())return new XC(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new XC(t._firestore,r,n._key,null,n.converter);throw sy()}))}},{key:"set",value:function(e,t,n){var r=BN(e,this._firestore),i=wN(r.converter,t,n),a=RC(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=BN(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=gr(t))||t instanceof _C?zC(this._dataReader,"Transaction.update",i._key,t,n,o):VC(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=BN(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function KN(e,t,n){e=JT(e,hC);var r=Object.assign(Object.assign({},VN),n);return function(e){if(e.maxAttempts<1)throw new hy(fy.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new dy;return e.asyncQueue.enqueueAndForget(s(o().mark((function i(){var a;return o().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,UT(e);case 2:a=i.sent,new ET(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(dC(e),(function(n){return t(new qN(e,n))}),r)}function WN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new FC("arrayUnion",t)}function GN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new jC("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ty=e}(vi),si(new wr("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new hC(new yy(e.getProvider("auth-internal")),new wy(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new hy(fy.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ik(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),wi(Zm,"4.1.1",e),wi(Zm,"4.1.1","esm2017")}();function HN(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new hy("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function QN(){if("undefined"===typeof Uint8Array)throw new hy("unimplemented","Uint8Arrays are not available in this environment.")}function YN(){if("undefined"==typeof atob)throw new hy("unimplemented","Blobs are unavailable in Firestore in this environment.")}var $N=function(){function e(t){On(this,e),this._delegate=t}return Dn(e,[{key:"toBase64",value:function(){return YN(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return QN(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return YN(),new e(xC.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return QN(),new e(xC.fromUint8Array(t))}}]),e}();function JN(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Ln(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var XN=function(){function e(){On(this,e)}return Dn(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){wC(e=JT(e,hC));var n=dC(e);if(n._uninitializedComponentsProvider)throw new hy(fy.FAILED_PRECONDITION,"SDK cache is already specified.");oy("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new kT;return vC(n,i,new yT(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){wC(e=JT(e,hC));var t=dC(e);if(t._uninitializedComponentsProvider)throw new hy(fy.FAILED_PRECONDITION,"SDK cache is already specified.");oy("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new kT;return vC(t,r,new gT(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new hy(fy.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new dy;return e._queue.enqueueAndForgetEvenWhileRestricted(s(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Yy.v()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Yy.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(fE(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),ZN=function(){function e(t,n,r){var i=this;On(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof ik||(this._appCompat=t)}return Dn(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||oy("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};tC(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return yC(this._delegate)}},{key:"disableNetwork",value:function(){return gC(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&HT("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return mC(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return FN(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new hy("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new dA(this,aC(this._delegate,e))}catch(KM){throw aA(KM,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new iA(this,oC(this._delegate,e))}catch(KM){throw aA(KM,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new lA(this,function(e,t){if(e=JT(e,eC),GT("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new hy(fy.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new nC(e,null,function(e){return new ub(Ay.emptyPath(),e)}(t))}(this._delegate,e))}catch(KM){throw aA(KM,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return KN(this._delegate,(function(n){return e(new tA(t,n))}))}},{key:"batch",value:function(){var e=this;return dC(this._delegate),new nA(new zN(this._delegate,(function(t){return jN(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return kC(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return bC(this._delegate,e).then((function(e){return e?new lA(t,e):null}))}}]),e}(),eA=function(e){Fn(n,e);var t=Vn(n);function n(e){var r;return On(this,n),(r=t.call(this)).firestore=e,r}return Dn(n,[{key:"convertBytes",value:function(e){return new $N(new xC(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return iA.forKey(t,this.firestore,null)}}]),n}(bN);var tA=function(){function e(t,n){On(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new eA(t)}return Dn(e,[{key:"get",value:function(e){var t=this,n=pA(e);return this._delegate.get(n).then((function(e){return new sA(t._firestore,new EN(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=pA(e);return n?(HN("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=pA(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=pA(e);return this._delegate.delete(t),this}}]),e}(),nA=function(){function e(t){On(this,e),this._delegate=t}return Dn(e,[{key:"set",value:function(e,t,n){var r=pA(e);return n?(HN("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=pA(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=pA(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),rA=function(){function e(t,n,r){On(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Dn(e,[{key:"fromFirestore",value:function(e,t){var n=new IN(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new cA(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new eA(t),n),i.set(n,a)),a}}]),e}();rA.INSTANCES=new WeakMap;var iA=function(){function e(t,n){On(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new eA(t)}return Dn(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new dA(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new dA(this.firestore,aC(this._delegate,e))}catch(KM){throw aA(KM,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=gr(e))instanceof rC&&uC(this._delegate,e)}},{key:"set",value:function(e,t){t=HN("DocumentReference.set",t);try{return t?DN(this._delegate,e,t):DN(this._delegate,e)}catch(KM){throw aA(KM,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?LN(this._delegate,e):LN.apply(void 0,[this._delegate,e,t].concat(r))}catch(KM){throw aA(KM,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return jN(JT((e=this._delegate).firestore,hC),[new gw(e._key,rw.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=oA(n),a=uA(n,(function(t){return new sA(e.firestore,new EN(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return MN(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?AN(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=JT(e,rC);var t=JT(e.firestore,hC);return BT(dC(t),e._key,{source:"server"}).then((function(n){return UN(t,e,n)}))}(this._delegate):function(e){e=JT(e,rC);var t=JT(e.firestore,hC);return BT(dC(t),e._key).then((function(n){return UN(t,e,n)}))}(this._delegate)).then((function(e){return new sA(t.firestore,new EN(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(rA.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new hy("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new rC(n._delegate,r,new Ry(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new rC(n._delegate,r,t))}}]),e}();function aA(e,t,n){return e.message=e.message.replace(t,n),e}function oA(e){var t,n=Ln(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!JN(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function uA(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=JN(e[0])?e[0]:JN(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var sA=function(){function e(t,n){On(this,e),this._firestore=t,this._delegate=n}return Dn(e,[{key:"ref",get:function(){return new iA(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return CN(this._delegate,e._delegate)}}]),e}(),cA=function(e){Fn(n,e);var t=Vn(n);function n(){return On(this,n),t.apply(this,arguments)}return Dn(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||sy(),t}}]),n}(sA),lA=function(){function e(t,n){On(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new eA(t)}return Dn(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,iN(this._delegate,function(e,t,n){var r=t,i=eN("where",e);return aN._create(i,r,n)}(t,n,r)))}catch(KM){throw aA(KM,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,iN(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=eN("orderBy",e);return uN._create(n,t)}(t,n)))}catch(KM){throw aA(KM,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,iN(this._delegate,(XT("limit",n=t),sN._create("limit",n,"F"))))}catch(n){throw aA(n,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,iN(this._delegate,(XT("limitToLast",n=t),sN._create("limitToLast",n,"L"))))}catch(n){throw aA(n,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,iN(this._delegate,lN.apply(void 0,arguments)))}catch(KM){throw aA(KM,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,iN(this._delegate,fN.apply(void 0,arguments)))}catch(KM){throw aA(KM,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,iN(this._delegate,dN.apply(void 0,arguments)))}catch(KM){throw aA(KM,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,iN(this._delegate,pN.apply(void 0,arguments)))}catch(KM){throw aA(KM,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return sC(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?ON(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?RN(this._delegate):PN(this._delegate)).then((function(e){return new hA(t.firestore,new SN(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=oA(n),a=uA(n,(function(t){return new hA(e.firestore,new SN(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return MN(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(rA.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),fA=function(){function e(t,n){On(this,e),this._firestore=t,this._delegate=n}return Dn(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new cA(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),hA=function(){function e(t,n){On(this,e),this._firestore=t,this._delegate=n}return Dn(e,[{key:"query",get:function(){return new lA(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new cA(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new fA(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new cA(n._firestore,r))}))}},{key:"isEqual",value:function(e){return CN(this._delegate,e._delegate)}}]),e}(),dA=function(e){Fn(n,e);var t=Vn(n);function n(e,r){var i;return On(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Dn(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new iA(this.firestore,e):null}},{key:"doc",value:function(e){try{return new iA(this.firestore,void 0===e?oC(this._delegate):oC(this._delegate,e))}catch(KM){throw aA(KM,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=JT(e.firestore,hC),r=oC(e),i=wN(e.converter,t);return jN(n,[RC(OC(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,rw.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new iA(t.firestore,e)}))}},{key:"isEqual",value:function(e){return uC(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(rA.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(lA);function pA(e){return JT(e,rC)}var vA=function(){function e(){On(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=zn(_C,n)}return Dn(e,[{key:"isEqual",value:function(e){return(e=gr(e))instanceof _C&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Oy.keyField().canonicalString())}}]),e}(),mA=function(){function e(t){On(this,e),this._delegate=t}return Dn(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new MC("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new DC("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=WN.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=GN.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new UC("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),yA={Firestore:ZN,GeoPoint:IC,Timestamp:Ty,Blob:$N,Transaction:tA,WriteBatch:nA,DocumentReference:iA,DocumentSnapshot:sA,Query:lA,QueryDocumentSnapshot:cA,QuerySnapshot:hA,CollectionReference:dA,FieldPath:vA,FieldValue:mA,setLogLevel:function(e){var t;t=e,ny.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new wr("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},yA)))}(e,(function(e,t){return new ZN(e,t,new XN)})),e.registerVersion("@firebase/firestore-compat","0.3.15")}(Hi);var gA,kA=Hi.initializeApp({apiKey:"AIzaSyCYKdCOGyJlFox9USViM1j-DZhl2WBAw5I",authDomain:"keymate-827d7.firebaseapp.com",databaseURL:"https://keymate-827d7-default-rtdb.europe-west1.firebasedatabase.app",projectId:"keymate-827d7",storageBucket:"keymate-827d7.appspot.com",messagingSenderId:"258275383022",appId:"1:258275383022:web:3e032ec110250fdec385ff"}),bA=kA.auth(),wA=kA.firestore(),xA=t.createContext();function _A(){return(0,t.useContext)(xA)}function EA(e){var n=e.children,r=d((0,t.useState)(),2),i=r[0],a=r[1],o=d((0,t.useState)(!0),2),u=o[0],s=o[1];(0,t.useEffect)((function(){return bA.onAuthStateChanged((function(e){a(e),s(!1)}))}),[]);var c={currentUser:i,userID:i?i.uid:null,login:function(e,t){return bA.signInWithEmailAndPassword(e,t)},signup:function(e,t){return bA.createUserWithEmailAndPassword(e,t)},logout:function(){return bA.signOut()},resetpassword:function(e){return bA.sendPasswordResetEmail(e)},updateEmail:function(e){return i.updateEmail(e)},updatePassword:function(e){return i.updatePassword(e)}};return(0,D.jsx)(xA.Provider,{value:c,children:!u&&n})}function IA(){return IA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IA.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(gA||(gA={}));var SA,TA="popstate";function CA(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function NA(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(KM){}}}function AA(e,t){return{usr:e.state,key:e.key,idx:t}}function PA(e,t,n,r){return void 0===n&&(n=null),IA({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?RA(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function OA(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function RA(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function DA(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,u=i.v5Compat,s=void 0!==u&&u,c=o.history,l=gA.Pop,f=null,h=d();function d(){return(c.state||{idx:null}).idx}function p(){l=gA.Pop;var e=d(),t=null==e?null:e-h;h=e,f&&f({action:l,location:m.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:OA(e);return CA(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,c.replaceState(IA({},c.state,{idx:h}),""));var m={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(TA,p),f=e,function(){o.removeEventListener(TA,p),f=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=gA.Push;var r=PA(m.location,e,t);n&&n(r,e);var i=AA(r,h=d()+1),a=m.createHref(r);try{c.pushState(i,"",a)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;o.location.assign(a)}s&&f&&f({action:l,location:m.location,delta:1})},replace:function(e,t){l=gA.Replace;var r=PA(m.location,e,t);n&&n(r,e);var i=AA(r,h=d()),a=m.createHref(r);c.replaceState(i,"",a),s&&f&&f({action:l,location:m.location,delta:0})},go:function(e){return c.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(SA||(SA={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function LA(e,t,n){void 0===n&&(n="/");var r=YA(("string"===typeof t?RA(t):t).pathname||"/",n);if(null==r)return null;var i=MA(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=GA(i[o],QA(r));return a}function MA(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(CA(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=ZA([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(CA(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),MA(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:WA(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=Ln(FA(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function FA(e){var t=e.split("/");if(0===t.length)return[];var n=Qi(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var u=FA(i.join("/")),s=[];return s.push.apply(s,br(u.map((function(e){return""===e?o:[o,e].join("/")})))),a&&s.push.apply(s,br(u)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var jA=/^:\w+$/,UA=3,VA=2,zA=1,BA=10,qA=-2,KA=function(e){return"*"===e};function WA(e,t){var n=e.split("/"),r=n.length;return n.some(KA)&&(r+=qA),t&&(r+=VA),n.filter((function(e){return!KA(e)})).reduce((function(e,t){return e+(jA.test(t)?UA:""===t?zA:BA)}),r)}function GA(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=HA({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:ZA([i,l.pathname]),pathnameBase:eP(ZA([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=ZA([i,l.pathnameBase]))}return a}function HA(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);NA("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=d(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return NA(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function QA(e){try{return decodeURI(e)}catch(t){return NA(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function YA(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function $A(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function JA(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function XA(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=RA(e):(CA(!(i=IA({},e)).pathname||!i.pathname.includes("?"),$A("?","pathname","search",i)),CA(!i.pathname||!i.pathname.includes("#"),$A("#","pathname","hash",i)),CA(!i.search||!i.search.includes("#"),$A("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?RA(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:tP(a),hash:nP(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var ZA=function(e){return e.join("/").replace(/\/\/+/g,"/")},eP=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},tP=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},nP=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},rP=function(e){Fn(n,e);var t=Vn(n);function n(){return On(this,n),t.apply(this,arguments)}return Dn(n)}(Bn(Error));function iP(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var aP=["post","put","patch","delete"],oP=(new Set(aP),["get"].concat(aP));new Set(oP),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function uP(){return uP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uP.apply(this,arguments)}var sP=t.createContext(null);var cP=t.createContext(null);var lP=t.createContext(null);var fP=t.createContext(null);var hP=t.createContext(null);var dP=t.createContext({outlet:null,matches:[],isDataRoute:!1});var pP=t.createContext(null);function vP(){return null!=t.useContext(hP)}function mP(){return vP()||CA(!1),t.useContext(hP).location}function yP(e){t.useContext(fP).static||t.useLayoutEffect(e)}function gP(){return t.useContext(dP).isDataRoute?function(){var e=CP(SP.UseNavigateStable).router,n=AP(TP.UseNavigateStable),r=t.useRef(!1);yP((function(){r.current=!0}));var i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,uP({fromRouteId:n},i)))}),[e,n]);return i}():function(){vP()||CA(!1);var e=t.useContext(sP),n=t.useContext(fP),r=n.basename,i=n.navigator,a=t.useContext(dP).matches,o=mP().pathname,u=JSON.stringify(JA(a).map((function(e){return e.pathnameBase}))),s=t.useRef(!1);yP((function(){s.current=!0}));var c=t.useCallback((function(t,n){if(void 0===n&&(n={}),s.current)if("number"!==typeof t){var a=XA(t,JSON.parse(u),o,"path"===n.relative);null==e&&"/"!==r&&(a.pathname="/"===a.pathname?r:ZA([r,a.pathname])),(n.replace?i.replace:i.push)(a,n.state,n)}else i.go(t)}),[r,i,u,o,e]);return c}()}function kP(e,n){var r=(void 0===n?{}:n).relative,i=t.useContext(dP).matches,a=mP().pathname,o=JSON.stringify(JA(i).map((function(e){return e.pathnameBase})));return t.useMemo((function(){return XA(e,JSON.parse(o),a,"path"===r)}),[e,o,a,r])}function bP(e,n,r){vP()||CA(!1);var i,a=t.useContext(fP).navigator,o=t.useContext(dP).matches,u=o[o.length-1],s=u?u.params:{},c=(u&&u.pathname,u?u.pathnameBase:"/"),l=(u&&u.route,mP());if(n){var f,h="string"===typeof n?RA(n):n;"/"===c||(null==(f=h.pathname)?void 0:f.startsWith(c))||CA(!1),i=h}else i=l;var d=i.pathname||"/",p=LA(e,{pathname:"/"===c?d:d.slice(c.length)||"/"});var v=IP(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:ZA([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:ZA([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,r);return n&&v?t.createElement(hP.Provider,{value:{location:uP({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:gA.Pop}},v):v}function wP(){var e=function(){var e,n=t.useContext(pP),r=NP(TP.UseRouteError),i=AP(TP.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=iP(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}var xP=t.createElement(wP,null),_P=function(e){Fn(r,e);var n=Vn(r);function r(e){var t;return On(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return Dn(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(dP.Provider,{value:this.props.routeContext},t.createElement(pP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(t.Component);function EP(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(sP);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(dP.Provider,{value:n},i)}function IP(e,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==e){var a;if(null==(a=r)||!a.errors)return null;e=r.matches}var o=e,u=null==(i=r)?void 0:i.errors;if(null!=u){var s=o.findIndex((function(e){return e.route.id&&(null==u?void 0:u[e.route.id])}));s>=0||CA(!1),o=o.slice(0,Math.min(o.length,s+1))}return o.reduceRight((function(e,i,a){var s=i.route.id?null==u?void 0:u[i.route.id]:null,c=null;r&&(c=i.route.errorElement||xP);var l=n.concat(o.slice(0,a+1)),f=function(){var n;return n=s?c:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(EP,{match:i,routeContext:{outlet:e,matches:l,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?t.createElement(_P,{location:r.location,revalidation:r.revalidation,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):f()}),null)}var SP=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(SP||{}),TP=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(TP||{});function CP(e){var n=t.useContext(sP);return n||CA(!1),n}function NP(e){var n=t.useContext(cP);return n||CA(!1),n}function AP(e){var n=function(e){var n=t.useContext(dP);return n||CA(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||CA(!1),r.route.id}r.startTransition;function PP(e){var n=e.to,r=e.replace,i=e.state,a=e.relative;vP()||CA(!1);var o=t.useContext(dP).matches,u=mP().pathname,s=gP(),c=XA(n,JA(o).map((function(e){return e.pathnameBase})),u,"path"===a),l=JSON.stringify(c);return t.useEffect((function(){return s(JSON.parse(l),{replace:r,state:i,relative:a})}),[s,l,a,r,i]),null}function OP(e){CA(!1)}function RP(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?gA.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;vP()&&CA(!1);var h=r.replace(/^\/*/,"/"),d=t.useMemo((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=RA(o));var p=o,v=p.pathname,m=void 0===v?"/":v,y=p.search,g=void 0===y?"":y,k=p.hash,b=void 0===k?"":k,w=p.state,x=void 0===w?null:w,_=p.key,E=void 0===_?"default":_,I=t.useMemo((function(){var e=YA(m,h);return null==e?null:{location:{pathname:e,search:g,hash:b,state:x,key:E},navigationType:s}}),[h,m,g,b,x,E,s]);return null==I?null:t.createElement(fP.Provider,{value:d},t.createElement(hP.Provider,{children:a,value:I}))}function DP(e){var t=e.children,n=e.location;return bP(FP(t),n)}var LP=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(LP||{}),MP=new Promise((function(){}));t.Component;function FP(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e)){var a=[].concat(br(n),[i]);if(e.type!==t.Fragment){e.type!==OP&&CA(!1),e.props.index&&e.props.children&&CA(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=FP(e.props.children,a)),r.push(o)}else r.push.apply(r,FP(e.props.children,a))}})),r}function jP(){return jP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jP.apply(this,arguments)}function UP(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var VP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];var zP=r.startTransition;function BP(e){var n=e.basename,r=e.children,i=e.future,a=e.window,o=t.useRef();null==o.current&&(o.current=function(e){return void 0===e&&(e={}),DA((function(e,t){var n=e.location;return PA("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:OA(t)}),null,e)}({window:a,v5Compat:!0}));var u=o.current,s=d(t.useState({action:u.action,location:u.location}),2),c=s[0],l=s[1],f=(i||{}).v7_startTransition,h=t.useCallback((function(e){f&&zP?zP((function(){return l(e)})):l(e)}),[l,f]);return t.useLayoutEffect((function(){return u.listen(h)}),[u,h]),t.createElement(RP,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:u})}var qP="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,KP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,WP=t.forwardRef((function(e,n){var r,i=e.onClick,a=e.relative,o=e.reloadDocument,u=e.replace,s=e.state,c=e.target,l=e.to,f=e.preventScrollReset,h=UP(e,VP),d=t.useContext(fP).basename,p=!1;if("string"===typeof l&&KP.test(l)&&(r=l,qP))try{var v=new URL(window.location.href),m=l.startsWith("//")?new URL(v.protocol+l):new URL(l),y=YA(m.pathname,d);m.origin===v.origin&&null!=y?l=y+m.search+m.hash:p=!0}catch(KM){}var g=function(e,n){var r=(void 0===n?{}:n).relative;vP()||CA(!1);var i=t.useContext(fP),a=i.basename,o=i.navigator,u=kP(e,{relative:r}),s=u.hash,c=u.pathname,l=u.search,f=c;return"/"!==a&&(f="/"===c?a:ZA([a,c])),o.createHref({pathname:f,search:l,hash:s})}(l,{relative:a}),k=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,u=r.preventScrollReset,s=r.relative,c=gP(),l=mP(),f=kP(e,{relative:s});return t.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:OA(l)===OA(f);c(e,{replace:n,state:o,preventScrollReset:u,relative:s})}}),[l,c,f,a,o,i,e,u,s])}(l,{replace:u,state:s,target:c,preventScrollReset:f,relative:a});return t.createElement("a",jP({},h,{href:r||g,onClick:p||o?i:function(e){i&&i(e),e.defaultPrevented||k(e)},ref:n,target:c}))}));var GP,HP;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(GP||(GP={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(HP||(HP={}));var QP;function YP(){var e=(0,t.useRef)(),n=(0,t.useRef)(),r=(0,t.useRef)(),i=_A().signup,a=d((0,t.useState)(""),2),u=a[0],c=a[1],l=d((0,t.useState)(!1),2),f=l[0],h=l[1],p=gP();function v(){return(v=s(o().mark((function t(a){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n.current.value===r.current.value){t.next=3;break}return t.abrupt("return",c("Passwords do not match"));case 3:return t.prev=3,c(""),h(!0),t.next=8,i(e.current.value,n.current.value);case 8:p("/"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),c("Failed to create an account");case 14:h(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})))).apply(this,arguments)}var m=d((0,t.useState)(!1),2),y=m[0],g=m[1],k=d((0,t.useState)(!1),2),b=k[0],w=k[1];return(0,D.jsx)(z,{className:"signup-container",children:(0,D.jsx)(he,{className:"signup-card",children:(0,D.jsxs)(he.Body,{children:[(0,D.jsx)(he.Title,{children:"Sign Up"}),u&&(0,D.jsx)(Ot,{variant:"danger",children:u}),(0,D.jsxs)(Cn,{onSubmit:function(e){return v.apply(this,arguments)},children:[(0,D.jsxs)(Cn.Group,{controlId:"email",children:[(0,D.jsxs)(Cn.Label,{className:"label-with-icon mt-3",children:[(0,D.jsx)(x,{})," Email"]}),(0,D.jsx)(Cn.Control,{type:"email",ref:e,placeholder:"Enter email"})]}),(0,D.jsxs)(Cn.Group,{controlId:"password",children:[(0,D.jsxs)(Cn.Label,{className:"label-with-icon mt-3",children:[(0,D.jsx)(I,{})," Password"]}),(0,D.jsxs)("div",{className:"password-input-group",children:[(0,D.jsx)(Cn.Control,{ref:n,type:y?"text":"password",placeholder:"Password"}),(0,D.jsx)("span",{className:"password-toggle-icon",onClick:function(){g(!y)},children:y?(0,D.jsx)(_,{}):(0,D.jsx)(E,{})})]})]}),(0,D.jsxs)(Cn.Group,{controlId:"passwordConfirmation",children:[(0,D.jsxs)(Cn.Label,{className:"label-with-icon mt-3",children:[(0,D.jsx)(I,{})," Confirm Password"]}),(0,D.jsxs)("div",{className:"password-input-group",children:[(0,D.jsx)(Cn.Control,{ref:r,type:b?"text":"password",placeholder:"Confirm password"}),(0,D.jsx)("span",{className:"password-toggle-icon",onClick:function(){w(!b)},children:b?(0,D.jsx)(_,{}):(0,D.jsx)(E,{})})]})]}),(0,D.jsx)(Pn,{disabled:f,className:"w-100 mt-4",variant:"primary",type:"submit",children:"Sign Up"})]}),(0,D.jsxs)("div",{className:"already-account-link",children:["Already have an account? ",(0,D.jsx)(WP,{to:"/login",children:"Log in"})]})]})})})}function $P(e){return k({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"}},{tag:"path",attr:{d:"M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"}},{tag:"path",attr:{d:"M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"}}]})(e)}function JP(e){return k({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"}},{tag:"path",attr:{d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"}}]})(e)}function XP(e){return k({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"}}]})(e)}function ZP(e){if((!QP&&0!==QP||e)&&Ze){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),QP=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return QP}function eO(e){var n=function(e){var n=(0,t.useRef)(e);return n.current=e,n}(e);(0,t.useEffect)((function(){return function(){return n.current()}}),[])}function tO(e){void 0===e&&(e=Ge());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(KM){return e.body}}function nO(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}var rO="data-rr-ui-";function iO(e){return"".concat(rO).concat(e)}var aO=iO("modal-open"),oO=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.ownerDocument,r=t.handleContainerOverflow,i=void 0===r||r,a=t.isRTL,o=void 0!==a&&a;On(this,e),this.handleContainerOverflow=i,this.isRTL=o,this.modals=[],this.ownerDocument=n}return Dn(e,[{key:"getScrollbarWidth",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}},{key:"getElement",value:function(){return(this.ownerDocument||document).body}},{key:"setModalAttributes",value:function(e){}},{key:"removeModalAttributes",value:function(e){}},{key:"setContainerStyle",value:function(e){var t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style=T({overflow:r.style.overflow},n,r.style[n]),e.scrollBarWidth&&(t[n]="".concat(parseInt(Xe(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(aO,""),Xe(r,t)}},{key:"reset",value:function(){var e=this;br(this.modals).forEach((function(t){return e.remove(t)}))}},{key:"removeContainerStyle",value:function(e){var t=this.getElement();t.removeAttribute(aO),Object.assign(t.style,e.style)}},{key:"add",value:function(e){var t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}},{key:"isTopModal",value:function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}]),e}(),uO=oO,sO=(0,t.createContext)(Ze?window:void 0);sO.Provider;function cO(){return(0,t.useContext)(sO)}var lO=function(e,t){return Ze?null==e?(t||Ge()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null};var fO=function(e){var n=e.children,r=e.in,i=e.onExited,a=e.mountOnEnter,o=e.unmountOnExit,u=(0,t.useRef)(null),s=(0,t.useRef)(r),c=we(i);(0,t.useEffect)((function(){r?s.current=!0:c(u.current)}),[r,c]);var l=ht(u,n.ref),f=(0,t.cloneElement)(n,{ref:l});return r?f:o||!s.current&&a?null:f};function hO(e){var n=e.children,r=e.in,i=e.onExited,a=e.onEntered,o=e.transition,u=d((0,t.useState)(!r),2),s=u[0],c=u[1];r&&s&&c(!1);var l=function(e){var n=e.in,r=e.onTransition,i=(0,t.useRef)(null),a=(0,t.useRef)(!0),o=we(r);return Se((function(){if(i.current){var e=!1;return o({in:n,element:i.current,initial:a.current,isStale:function(){return e}}),function(){e=!0}}}),[n,o]),Se((function(){return a.current=!1,function(){a.current=!0}}),[]),i}({in:!!r,onTransition:function(e){Promise.resolve(o(e)).then((function(){e.isStale()||(e.in?null==a||a(e.element,e.initial):(c(!0),null==i||i(e.element)))}),(function(t){throw e.in||c(!0),t}))}}),f=ht(l,n.ref);return s&&!r?null:(0,t.cloneElement)(n,{ref:f})}function dO(e,t,n){return e?(0,D.jsx)(e,Object.assign({},n)):t?(0,D.jsx)(hO,Object.assign({},n,{transition:t})):(0,D.jsx)(fO,Object.assign({},n))}var pO,vO=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function mO(e){var n=cO(),r=e||function(e){return pO||(pO=new uO({ownerDocument:null==e?void 0:e.document})),pO}(n),i=(0,t.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:function(){return r.add(i.current)},remove:function(){return r.remove(i.current)},isTopModal:function(){return r.isTopModal(i.current)},setDialogRef:(0,t.useCallback)((function(e){i.current.dialog=e}),[]),setBackdropRef:(0,t.useCallback)((function(e){i.current.backdrop=e}),[])})}var yO=(0,t.forwardRef)((function(e,n){var r=e.show,i=void 0!==r&&r,a=e.role,o=void 0===a?"dialog":a,u=e.className,s=e.style,c=e.children,l=e.backdrop,f=void 0===l||l,h=e.keyboard,p=void 0===h||h,v=e.onBackdropClick,m=e.onEscapeKeyDown,y=e.transition,g=e.runTransition,k=e.backdropTransition,b=e.runBackdropTransition,w=e.autoFocus,x=void 0===w||w,_=e.enforceFocus,E=void 0===_||_,I=e.restoreFocus,S=void 0===I||I,T=e.restoreFocusOptions,C=e.renderDialog,N=e.renderBackdrop,A=void 0===N?function(e){return(0,D.jsx)("div",Object.assign({},e))}:N,P=e.manager,O=e.container,R=e.onShow,L=e.onHide,M=void 0===L?function(){}:L,F=e.onExit,j=e.onExited,U=e.onExiting,V=e.onEnter,z=e.onEntering,B=e.onEntered,q=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,vO),K=cO(),W=function(e,n){var r=cO(),i=d((0,t.useState)((function(){return lO(e,null==r?void 0:r.document)})),2),a=i[0],o=i[1];if(!a){var u=lO(e);u&&o(u)}return(0,t.useEffect)((function(){n&&a&&n(a)}),[n,a]),(0,t.useEffect)((function(){var t=lO(e);t!==a&&o(t)}),[e,a]),a}(O),G=mO(P),H=_e(),Q=Ee(i),Y=d((0,t.useState)(!i),2),$=Y[0],J=Y[1],X=(0,t.useRef)(null);(0,t.useImperativeHandle)(n,(function(){return G}),[G]),Ze&&!Q&&i&&(X.current=tO(null==K?void 0:K.document)),i&&$&&J(!1);var Z=we((function(){if(G.add(),ae.current=at(document,"keydown",re),ie.current=at(document,"focus",(function(){return setTimeout(te)}),!0),R&&R(),x){var e,t,n=tO(null!=(e=null==(t=G.dialog)?void 0:t.ownerDocument)?e:null==K?void 0:K.document);G.dialog&&n&&!nO(G.dialog,n)&&(X.current=n,G.dialog.focus())}})),ee=we((function(){var e;(G.remove(),null==ae.current||ae.current(),null==ie.current||ie.current(),S)&&(null==(e=X.current)||null==e.focus||e.focus(T),X.current=null)}));(0,t.useEffect)((function(){i&&W&&Z()}),[i,W,Z]),(0,t.useEffect)((function(){$&&ee()}),[$,ee]),eO((function(){ee()}));var te=we((function(){if(E&&H()&&G.isTopModal()){var e=tO(null==K?void 0:K.document);G.dialog&&e&&!nO(G.dialog,e)&&G.dialog.focus()}})),ne=we((function(e){e.target===e.currentTarget&&(null==v||v(e),!0===f&&M())})),re=we((function(e){p&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&G.isTopModal()&&(null==m||m(e),e.defaultPrevented||M())})),ie=(0,t.useRef)(),ae=(0,t.useRef)();if(!W)return null;var oe=Object.assign({role:o,ref:G.setDialogRef,"aria-modal":"dialog"===o||void 0},q,{style:s,className:u,tabIndex:-1}),ue=C?C(oe):(0,D.jsx)("div",Object.assign({},oe,{children:t.cloneElement(c,{role:"document"})}));ue=dO(y,g,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!i,onExit:F,onExiting:U,onExited:function(){J(!0),null==j||j.apply(void 0,arguments)},onEnter:V,onEntering:z,onEntered:B,children:ue});var se=null;return f&&(se=A({ref:G.setBackdropRef,onClick:ne}),se=dO(k,b,{in:!!i,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:se})),(0,D.jsx)(D.Fragment,{children:Le.createPortal((0,D.jsxs)(D.Fragment,{children:[se,ue]}),W)})}));yO.displayName="Modal";var gO=Object.assign(yO,{Manager:uO});var kO=Function.prototype.bind.call(Function.prototype.call,[].slice);function bO(e,t){return kO(e.querySelectorAll(t))}function wO(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var xO,_O=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",EO=".sticky-top",IO=".navbar-toggler",SO=function(e){Fn(n,e);var t=Vn(n);function n(){return On(this,n),t.apply(this,arguments)}return Dn(n,[{key:"adjustAndStore",value:function(e,t,n){var r=t.style[e];t.dataset[e]=r,Xe(t,T({},e,"".concat(parseFloat(Xe(t,e))+n,"px")))}},{key:"restore",value:function(e,t){var n=t.dataset[e];void 0!==n&&(delete t.dataset[e],Xe(t,T({},e,n)))}},{key:"setContainerStyle",value:function(e){var t=this;Yi(jn(n.prototype),"setContainerStyle",this).call(this,e);var r,i,a=this.getElement();if(i="modal-open",(r=a).classList?r.classList.add(i):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(r,i)||("string"===typeof r.className?r.className=r.className+" "+i:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+i)),e.scrollBarWidth){var o=this.isRTL?"paddingLeft":"paddingRight",u=this.isRTL?"marginLeft":"marginRight";bO(a,_O).forEach((function(n){return t.adjustAndStore(o,n,e.scrollBarWidth)})),bO(a,EO).forEach((function(n){return t.adjustAndStore(u,n,-e.scrollBarWidth)})),bO(a,IO).forEach((function(n){return t.adjustAndStore(u,n,e.scrollBarWidth)}))}}},{key:"removeContainerStyle",value:function(e){var t=this;Yi(jn(n.prototype),"removeContainerStyle",this).call(this,e);var r,i,a=this.getElement();i="modal-open",(r=a).classList?r.classList.remove(i):"string"===typeof r.className?r.className=wO(r.className,i):r.setAttribute("class",wO(r.className&&r.className.baseVal||"",i));var o=this.isRTL?"paddingLeft":"paddingRight",u=this.isRTL?"marginLeft":"marginRight";bO(a,_O).forEach((function(e){return t.restore(o,e)})),bO(a,EO).forEach((function(e){return t.restore(u,e)})),bO(a,IO).forEach((function(e){return t.restore(u,e)}))}}]),n}(uO);function TO(e){return xO||(xO=new SO(e)),xO}var CO=SO,NO=W("modal-body"),AO=t.createContext({onHide:function(){}}),PO=["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"],OO=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.contentClassName,a=e.centered,o=e.size,u=e.fullscreen,s=e.children,c=e.scrollable,l=P(e,PO);n=F(n,"modal");var f="".concat(n,"-dialog"),h="string"===typeof u?"".concat(n,"-fullscreen-").concat(u):"".concat(n,"-fullscreen");return(0,D.jsx)("div",N(N({},l),{},{ref:t,className:R()(f,r,o&&"".concat(n,"-").concat(o),a&&"".concat(f,"-centered"),c&&"".concat(f,"-scrollable"),u&&h),children:(0,D.jsx)("div",{className:R()("".concat(n,"-content"),i),children:s})}))}));OO.displayName="ModalDialog";var RO=OO,DO=W("modal-footer"),LO=["closeLabel","closeVariant","closeButton","onHide","children"],MO=t.forwardRef((function(e,n){var r=e.closeLabel,i=void 0===r?"Close":r,a=e.closeVariant,o=e.closeButton,u=void 0!==o&&o,s=e.onHide,c=e.children,l=P(e,LO),f=(0,t.useContext)(AO),h=we((function(){null==f||f.onHide(),null==s||s()}));return(0,D.jsxs)("div",N(N({ref:n},l),{},{children:[c,u&&(0,D.jsx)(St,{"aria-label":i,variant:a,onClick:h})]}))})),FO=MO,jO=["bsPrefix","className","closeLabel","closeButton"],UO=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.closeLabel,a=void 0===i?"Close":i,o=e.closeButton,u=void 0!==o&&o,s=P(e,jO);return n=F(n,"modal-header"),(0,D.jsx)(FO,N(N({ref:t},s),{},{className:R()(r,n),closeLabel:a,closeButton:u}))}));UO.displayName="ModalHeader";var VO=UO,zO=W("modal-title",{Component:G("h4")}),BO=["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function qO(e){return(0,D.jsx)(bt,N(N({},e),{},{timeout:null}))}function KO(e){return(0,D.jsx)(bt,N(N({},e),{},{timeout:null}))}var WO=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.style,o=e.dialogClassName,u=e.contentClassName,s=e.children,c=e.dialogAs,l=void 0===c?RO:c,f=e["aria-labelledby"],h=e["aria-describedby"],p=e["aria-label"],v=e.show,m=void 0!==v&&v,y=e.animation,g=void 0===y||y,k=e.backdrop,b=void 0===k||k,w=e.keyboard,x=void 0===w||w,_=e.onEscapeKeyDown,E=e.onShow,I=e.onHide,S=e.container,T=e.autoFocus,C=void 0===T||T,A=e.enforceFocus,O=void 0===A||A,L=e.restoreFocus,M=void 0===L||L,U=e.restoreFocusOptions,V=e.onEntered,z=e.onExit,B=e.onExiting,q=e.onEnter,K=e.onEntering,W=e.onExited,G=e.backdropClassName,H=e.manager,Q=P(e,BO),Y=d((0,t.useState)({}),2),$=Y[0],J=Y[1],X=d((0,t.useState)(!1),2),Z=X[0],ee=X[1],te=(0,t.useRef)(!1),ne=(0,t.useRef)(!1),re=(0,t.useRef)(null),ie=d(xe(),2),ae=ie[0],oe=ie[1],ue=ht(n,oe),se=we(I),ce=j();r=F(r,"modal");var le=(0,t.useMemo)((function(){return{onHide:se}}),[se]);function fe(){return H||TO({isRTL:ce})}function he(e){if(Ze){var t=fe().getScrollbarWidth()>0,n=e.scrollHeight>Ge(e).documentElement.clientHeight;J({paddingRight:t&&!n?ZP():void 0,paddingLeft:!t&&n?ZP():void 0})}}var de=we((function(){ae&&he(ae.dialog)}));eO((function(){it(window,"resize",de),null==re.current||re.current()}));var pe=function(){te.current=!0},ve=function(e){te.current&&ae&&e.target===ae.dialog&&(ne.current=!0),te.current=!1},me=function(){ee(!0),re.current=ut(ae.dialog,(function(){ee(!1)}))},ye=function(e){"static"!==b?ne.current||e.target!==e.currentTarget?ne.current=!1:null==I||I():function(e){e.target===e.currentTarget&&me()}(e)},ge=(0,t.useCallback)((function(e){return(0,D.jsx)("div",N(N({},e),{},{className:R()("".concat(r,"-backdrop"),G,!g&&"show")}))}),[g,G,r]),ke=N(N({},a),$);ke.display="block";return(0,D.jsx)(AO.Provider,{value:le,children:(0,D.jsx)(gO,{show:m,ref:ue,backdrop:b,container:S,keyboard:!0,autoFocus:C,enforceFocus:O,restoreFocus:M,restoreFocusOptions:U,onEscapeKeyDown:function(e){x?null==_||_(e):(e.preventDefault(),"static"===b&&me())},onShow:E,onHide:I,onEnter:function(e,t){e&&he(e),null==q||q(e,t)},onEntering:function(e,t){null==K||K(e,t),rt(window,"resize",de)},onEntered:V,onExit:function(e){null==re.current||re.current(),null==z||z(e)},onExiting:B,onExited:function(e){e&&(e.style.display=""),null==W||W(e),it(window,"resize",de)},manager:fe(),transition:g?qO:void 0,backdropTransition:g?KO:void 0,renderBackdrop:ge,renderDialog:function(e){return(0,D.jsx)("div",N(N({role:"dialog"},e),{},{style:ke,className:R()(i,r,Z&&"".concat(r,"-static"),!g&&"show"),onClick:b?ye:void 0,onMouseUp:ve,"aria-label":p,"aria-labelledby":f,"aria-describedby":h,children:(0,D.jsx)(l,N(N({},Q),{},{onMouseDown:pe,className:o,contentClassName:u,children:s}))}))}})})}));WO.displayName="Modal";var GO=Object.assign(WO,{Body:NO,Header:VO,Title:zO,Footer:DO,Dialog:RO,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});function HO(e){var n=e.showModal,r=e.handleCloseModal,i=e.handleTogglePassword,a=e.showPassword,u=d((0,t.useState)(""),2),c=u[0],l=u[1],f=d((0,t.useState)(""),2),h=f[0],p=f[1],v=d((0,t.useState)(""),2),m=v[0],y=v[1],g=_A().currentUser,k=function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,g){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,wA.collection("users").doc(g.uid).collection("passwords").add({website:c,username:h,password:m,postedOn:new Date});case 6:r(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Error adding entry:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return(0,D.jsxs)(GO,{show:n,onHide:r,onShow:function(){l(""),p(""),y("")},children:[(0,D.jsx)(GO.Header,{closeButton:!0,children:(0,D.jsx)(GO.Title,{children:"Add New Entry"})}),(0,D.jsx)(GO.Body,{children:(0,D.jsxs)(Cn,{onSubmit:k,children:[(0,D.jsxs)(Cn.Group,{controlId:"website",children:[(0,D.jsx)(Cn.Label,{children:"Website"}),(0,D.jsx)(Cn.Control,{type:"text",placeholder:"Enter website",value:c,onChange:function(e){return l(e.target.value)}})]}),(0,D.jsxs)(Cn.Group,{controlId:"username",children:[(0,D.jsx)(Cn.Label,{children:"Username"}),(0,D.jsx)(Cn.Control,{type:"text",placeholder:"Enter username",value:h,onChange:function(e){return p(e.target.value)}})]}),(0,D.jsxs)(Cn.Group,{controlId:"password",children:[(0,D.jsx)(Cn.Label,{children:"Password"}),(0,D.jsxs)("div",{className:"password-input",children:[(0,D.jsx)("div",{className:"password-field",children:(0,D.jsx)(Cn.Control,{type:a?"text":"password",placeholder:"Enter password",value:m,onChange:function(e){return y(e.target.value)}})}),(0,D.jsx)("span",{className:"password-toggle",onClick:i,children:a?(0,D.jsx)($P,{}):(0,D.jsx)(JP,{})})]})]})]})}),(0,D.jsxs)(GO.Footer,{children:[(0,D.jsx)(Pn,{variant:"secondary",onClick:r,children:"Cancel"}),(0,D.jsx)(Pn,{variant:"primary",onClick:k,children:"Add Entry"})]})]})}var QO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},YO=t.createContext(null),$O=["bsPrefix","className","as"],JO=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=P(e,$O);n=F(n,"navbar-brand");var o=i||(a.href?"a":"span");return(0,D.jsx)(o,N(N({},a),{},{ref:t,className:R()(r,n)}))}));JO.displayName="NavbarBrand";var XO=JO;var ZO,eR=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),null)},tR=["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","in","timeout","mountOnEnter","unmountOnExit","appear","getDimensionValue"],nR={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function rR(e,t){var n=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],r=nR[e];return n+parseInt(Xe(t,r[0]),10)+parseInt(Xe(t,r[1]),10)}var iR=(T(ZO={},Ue,"collapse"),T(ZO,Be,"collapsing"),T(ZO,Ve,"collapsing"),T(ZO,ze,"collapse show"),ZO),aR=t.forwardRef((function(e,n){var r=e.onEnter,i=e.onEntering,a=e.onEntered,o=e.onExit,u=e.onExiting,s=e.className,c=e.children,l=e.dimension,f=void 0===l?"height":l,h=e.in,d=void 0!==h&&h,p=e.timeout,v=void 0===p?300:p,m=e.mountOnEnter,y=void 0!==m&&m,g=e.unmountOnExit,k=void 0!==g&&g,b=e.appear,w=void 0!==b&&b,x=e.getDimensionValue,_=void 0===x?rR:x,E=P(e,tR),I="function"===typeof f?f():f,S=(0,t.useMemo)((function(){return eR((function(e){e.style[I]="0"}),r)}),[I,r]),T=(0,t.useMemo)((function(){return eR((function(e){var t="scroll".concat(I[0].toUpperCase()).concat(I.slice(1));e.style[I]="".concat(e[t],"px")}),i)}),[I,i]),C=(0,t.useMemo)((function(){return eR((function(e){e.style[I]=null}),a)}),[I,a]),A=(0,t.useMemo)((function(){return eR((function(e){e.style[I]="".concat(_(I,e),"px"),lt(e)}),o)}),[o,_,I]),O=(0,t.useMemo)((function(){return eR((function(e){e.style[I]=null}),u)}),[I,u]);return(0,D.jsx)(mt,N(N({ref:n,addEndListener:ct},E),{},{"aria-expanded":E.role?d:null,onEnter:S,onEntering:T,onEntered:C,onExit:A,onExiting:O,childRef:c.ref,in:d,timeout:v,mountOnEnter:y,unmountOnExit:k,appear:w,children:function(e,n){return t.cloneElement(c,N(N({},n),{},{className:R()(s,c.props.className,iR[e],"width"===I&&"collapse-horizontal")}))}}))})),oR=t.createContext(null);oR.displayName="NavbarContext";var uR=oR,sR=["children","bsPrefix"],cR=t.forwardRef((function(e,n){var r=e.children,i=e.bsPrefix,a=P(e,sR);i=F(i,"navbar-collapse");var o=(0,t.useContext)(uR);return(0,D.jsx)(aR,N(N({in:!(!o||!o.expanded)},a),{},{children:(0,D.jsx)("div",{ref:n,className:i,children:r})}))}));cR.displayName="NavbarCollapse";var lR=cR,fR=["bsPrefix","className","children","label","as","onClick"],hR=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.children,o=e.label,u=void 0===o?"Toggle navigation":o,s=e.as,c=void 0===s?"button":s,l=e.onClick,f=P(e,fR);r=F(r,"navbar-toggler");var h=(0,t.useContext)(uR)||{},d=h.onToggle,p=h.expanded,v=we((function(e){l&&l(e),d&&d()}));return"button"===c&&(f.type="button"),(0,D.jsx)(c,N(N({},f),{},{ref:n,onClick:v,"aria-label":u,className:R()(i,r,!p&&"collapsed"),children:a||(0,D.jsx)("span",{className:"".concat(r,"-icon")})}))}));hR.displayName="NavbarToggle";var dR=hR,pR=new WeakMap,vR=function(e,t){if(e&&t){var n=pR.get(t)||new Map;pR.set(t,n);var r=n.get(e);return r||((r=t.matchMedia(e)).refCount=0,n.set(r.media,r)),r}};function mR(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined"===typeof window?void 0:window,r=vR(e,n),i=d((0,t.useState)((function(){return!!r&&r.matches})),2),a=i[0],o=i[1];return Se((function(){var t=vR(e,n);if(!t)return o(!1);var r=pR.get(n),i=function(){o(t.matches)};return t.refCount++,t.addListener(i),i(),function(){t.removeListener(i),t.refCount--,t.refCount<=0&&(null==r||r.delete(t.media)),t=void 0}}),[e]),a}var yR,gR=function(e){var n=Object.keys(e);function r(e,t){return e===t?t:e?"".concat(e," and ").concat(t):t}function i(t){var r=function(e){return n[Math.min(n.indexOf(e)+1,n.length-1)]}(t),i=e[r];return i="number"===typeof i?"".concat(i-.2,"px"):"calc(".concat(i," - 0.2px)"),"(max-width: ".concat(i,")")}return function(n,a,o){var u;"object"===typeof n?(u=n,o=a,a=!0):u=T({},n,a=a||!0);var s=(0,t.useMemo)((function(){return Object.entries(u).reduce((function(t,n){var a=d(n,2),o=a[0],u=a[1];return"up"!==u&&!0!==u||(t=r(t,function(t){var n=e[t];return"number"===typeof n&&(n="".concat(n,"px")),"(min-width: ".concat(n,")")}(o))),"down"!==u&&!0!==u||(t=r(t,i(o))),t}),"")}),[JSON.stringify(u)]);return mR(s,o)}}({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),kR=gR,bR=W("offcanvas-body"),wR=["bsPrefix","className","children","in","mountOnEnter","unmountOnExit","appear"],xR=(T(yR={},Ve,"show"),T(yR,ze,"show"),yR),_R=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.children,o=e.in,u=void 0!==o&&o,s=e.mountOnEnter,c=void 0!==s&&s,l=e.unmountOnExit,f=void 0!==l&&l,h=e.appear,d=void 0!==h&&h,p=P(e,wR);return r=F(r,"offcanvas"),(0,D.jsx)(mt,N(N({ref:n,addEndListener:ct,in:u,mountOnEnter:c,unmountOnExit:f,appear:d},p),{},{childRef:a.ref,children:function(e,n){return t.cloneElement(a,N(N({},n),{},{className:R()(i,a.props.className,(e===Ve||e===Be)&&"".concat(r,"-toggling"),xR[e])}))}}))}));_R.displayName="OffcanvasToggling";var ER=_R,IR=["bsPrefix","className","closeLabel","closeButton"],SR=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.closeLabel,a=void 0===i?"Close":i,o=e.closeButton,u=void 0!==o&&o,s=P(e,IR);return n=F(n,"offcanvas-header"),(0,D.jsx)(FO,N(N({ref:t},s),{},{className:R()(r,n),closeLabel:a,closeButton:u}))}));SR.displayName="OffcanvasHeader";var TR=SR,CR=W("offcanvas-title",{Component:G("h5")}),NR=["bsPrefix","className","children","aria-labelledby","placement","responsive","show","backdrop","keyboard","scroll","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager","renderStaticNode"];function AR(e){return(0,D.jsx)(ER,N({},e))}function PR(e){return(0,D.jsx)(bt,N({},e))}var OR=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.children,o=e["aria-labelledby"],u=e.placement,s=void 0===u?"start":u,c=e.responsive,l=e.show,f=void 0!==l&&l,h=e.backdrop,p=void 0===h||h,v=e.keyboard,m=void 0===v||v,y=e.scroll,g=void 0!==y&&y,k=e.onEscapeKeyDown,b=e.onShow,w=e.onHide,x=e.container,_=e.autoFocus,E=void 0===_||_,I=e.enforceFocus,S=void 0===I||I,T=e.restoreFocus,C=void 0===T||T,A=e.restoreFocusOptions,O=e.onEntered,L=e.onExit,M=e.onExiting,j=e.onEnter,U=e.onEntering,V=e.onExited,z=e.backdropClassName,B=e.manager,q=e.renderStaticNode,K=void 0!==q&&q,W=P(e,NR),G=(0,t.useRef)();r=F(r,"offcanvas");var H=((0,t.useContext)(uR)||{}).onToggle,Q=d((0,t.useState)(!1),2),Y=Q[0],$=Q[1],J=kR(c||"xs","up");(0,t.useEffect)((function(){$(c?f&&!J:f)}),[f,c,J]);var X=we((function(){null==H||H(),null==w||w()})),Z=(0,t.useMemo)((function(){return{onHide:X}}),[X]);var ee=(0,t.useCallback)((function(e){return(0,D.jsx)("div",N(N({},e),{},{className:R()("".concat(r,"-backdrop"),z)}))}),[z,r]),te=function(e){return(0,D.jsx)("div",N(N(N({},e),W),{},{className:R()(i,c?"".concat(r,"-").concat(c):r,"".concat(r,"-").concat(s)),"aria-labelledby":o,children:a}))};return(0,D.jsxs)(D.Fragment,{children:[!Y&&(c||K)&&te({}),(0,D.jsx)(AO.Provider,{value:Z,children:(0,D.jsx)(gO,{show:Y,ref:n,backdrop:p,container:x,keyboard:m,autoFocus:E,enforceFocus:S&&!g,restoreFocus:C,restoreFocusOptions:A,onEscapeKeyDown:k,onShow:b,onHide:X,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==j||j.apply(void 0,[e].concat(n))},onEntering:U,onEntered:O,onExit:L,onExiting:M,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==V||V.apply(void 0,n)},manager:B||(g?(G.current||(G.current=new CO({handleContainerOverflow:!1})),G.current):TO()),transition:AR,backdropTransition:PR,renderBackdrop:ee,renderDialog:te})})]})}));OR.displayName="Offcanvas";var RR=Object.assign(OR,{Body:bR,Header:TR,Title:CR}),DR=t.forwardRef((function(e,n){var r=(0,t.useContext)(uR);return(0,D.jsx)(RR,N(N({ref:n,show:!(null==r||!r.expanded)},e),{},{renderStaticNode:!0}))}));DR.displayName="NavbarOffcanvas";var LR=DR,MR=["bsPrefix","expand","variant","bg","fixed","sticky","className","as","expanded","onToggle","onSelect","collapseOnSelect"],FR=W("navbar-text",{Component:"span"}),jR=t.forwardRef((function(e,n){var r=me(e,{expanded:"onToggle"}),i=r.bsPrefix,a=r.expand,o=void 0===a||a,u=r.variant,s=void 0===u?"light":u,c=r.bg,l=r.fixed,f=r.sticky,h=r.className,d=r.as,p=void 0===d?"nav":d,v=r.expanded,m=r.onToggle,y=r.onSelect,g=r.collapseOnSelect,k=void 0!==g&&g,b=P(r,MR),w=F(i,"navbar"),x=(0,t.useCallback)((function(){null==y||y.apply(void 0,arguments),k&&v&&(null==m||m(!1))}),[y,k,v,m]);void 0===b.role&&"nav"!==p&&(b.role="navigation");var _="".concat(w,"-expand");"string"===typeof o&&(_="".concat(_,"-").concat(o));var E=(0,t.useMemo)((function(){return{onToggle:function(){return null==m?void 0:m(!v)},bsPrefix:w,expanded:!!v,expand:o}}),[w,v,o,m]);return(0,D.jsx)(uR.Provider,{value:E,children:(0,D.jsx)(YO.Provider,{value:x,children:(0,D.jsx)(p,N(N({ref:n},b),{},{className:R()(h,w,o&&_,s&&"".concat(w,"-").concat(s),c&&"bg-".concat(c),f&&"sticky-".concat(f),l&&"fixed-".concat(l))}))})})}));jR.displayName="Navbar";var UR=Object.assign(jR,{Brand:XO,Collapse:lR,Offcanvas:LR,Text:FR,Toggle:dR});n(573);function VR(){return d((0,t.useReducer)((function(e){return!e}),!1),2)[1]}var zR=t.createContext(null);zR.displayName="NavContext";var BR=zR,qR=t.createContext(null),KR=["as","active","eventKey"];function WR(e){var n=e.key,r=e.onClick,i=e.active,a=e.id,o=e.role,u=e.disabled,s=(0,t.useContext)(YO),c=(0,t.useContext)(BR),l=(0,t.useContext)(qR),f=i,h={role:o};if(c){o||"tablist"!==c.role||(h.role="tab");var d=c.getControllerId(null!=n?n:null),p=c.getControlledId(null!=n?n:null);h[iO("event-key")]=n,h.id=d||a,!(f=null==i&&null!=n?c.activeKey===n:i)&&(null!=l&&l.unmountOnExit||null!=l&&l.mountOnEnter)||(h["aria-controls"]=p)}return"tab"===h.role&&(h["aria-selected"]=f,f||(h.tabIndex=-1),u&&(h.tabIndex=-1,h["aria-disabled"]=!0)),h.onClick=we((function(e){u||(null==r||r(e),null!=n&&s&&!e.isPropagationStopped()&&s(n,e))})),[h,{isActive:f}]}var GR=t.forwardRef((function(e,t){var n=e.as,r=void 0===n?Ae:n,i=e.active,a=e.eventKey,o=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,KR),u=d(WR(Object.assign({key:QO(a,o.href),active:i},o)),2),s=u[0],c=u[1];return s[iO("active")]=c.isActive,(0,D.jsx)(r,Object.assign({},o,s,{ref:t}))}));GR.displayName="NavItem";var HR=GR,QR=["as","onSelect","activeKey","role","onKeyDown"];var YR=function(){},$R=iO("event-key"),JR=t.forwardRef((function(e,n){var r,i,a=e.as,o=void 0===a?"div":a,u=e.onSelect,s=e.activeKey,c=e.role,l=e.onKeyDown,f=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,QR),h=VR(),d=(0,t.useRef)(!1),p=(0,t.useContext)(YO),v=(0,t.useContext)(qR);v&&(c=c||"tablist",s=v.activeKey,r=v.getControlledId,i=v.getControllerId);var m=(0,t.useRef)(null),y=function(e){var t=m.current;if(!t)return null;var n=bO(t,"[".concat($R,"]:not([aria-disabled=true])")),r=t.querySelector("[aria-selected=true]");if(!r||r!==document.activeElement)return null;var i=n.indexOf(r);if(-1===i)return null;var a=i+e;return a>=n.length&&(a=0),a<0&&(a=n.length-1),n[a]},g=function(e,t){null!=e&&(null==u||u(e,t),null==p||p(e,t))};(0,t.useEffect)((function(){if(m.current&&d.current){var e=m.current.querySelector("[".concat($R,"][aria-selected=true]"));null==e||e.focus()}d.current=!1}));var k=ht(n,m);return(0,D.jsx)(YO.Provider,{value:g,children:(0,D.jsx)(BR.Provider,{value:{role:c,activeKey:QO(s),getControlledId:r||YR,getControllerId:i||YR},children:(0,D.jsx)(o,Object.assign({},f,{onKeyDown:function(e){if(null==l||l(e),v){var t,n;switch(e.key){case"ArrowLeft":case"ArrowUp":t=y(-1);break;case"ArrowRight":case"ArrowDown":t=y(1);break;default:return}if(t)e.preventDefault(),g(t.dataset[(n="EventKey","".concat("rrUi").concat(n))]||null,e),d.current=!0,h()}},ref:k,role:c}))})})}));JR.displayName="Nav";var XR=Object.assign(JR,{Item:HR}),ZR=W("nav-item"),eD=["bsPrefix","className","as","active","eventKey","disabled"],tD=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?Re:i,o=e.active,u=e.eventKey,s=e.disabled,c=void 0!==s&&s,l=P(e,eD);n=F(n,"nav-link");var f=d(WR(N({key:QO(u,l.href),active:o,disabled:c},l)),2),h=f[0],p=f[1];return(0,D.jsx)(a,N(N(N({},l),h),{},{ref:t,disabled:c,className:R()(r,n,c&&"disabled",p.isActive&&"active")}))}));tD.displayName="NavLink";var nD=tD,rD=["as","bsPrefix","variant","fill","justify","navbar","navbarScroll","className","activeKey"],iD=t.forwardRef((function(e,n){var r,i,a,o=me(e,{activeKey:"onSelect"}),u=o.as,s=void 0===u?"div":u,c=o.bsPrefix,l=o.variant,f=o.fill,h=void 0!==f&&f,d=o.justify,p=void 0!==d&&d,v=o.navbar,m=o.navbarScroll,y=o.className,g=o.activeKey,k=P(o,rD),b=F(c,"nav"),w=!1,x=(0,t.useContext)(uR),_=(0,t.useContext)(J);return x?(i=x.bsPrefix,w=null==v||v):_&&(a=_.cardHeaderBsPrefix),(0,D.jsx)(XR,N({as:s,ref:n,activeKey:g,className:R()(y,(r={},T(r,b,!w),T(r,"".concat(i,"-nav"),w),T(r,"".concat(i,"-nav-scroll"),w&&m),T(r,"".concat(a,"-").concat(l),!!a),T(r,"".concat(b,"-").concat(l),!!l),T(r,"".concat(b,"-fill"),h),T(r,"".concat(b,"-justified"),p),r))},k))}));iD.displayName="Nav";var aD=Object.assign(iD,{Item:ZR,Link:nD});function oD(e,n,r){var i=(0,t.useRef)(void 0!==e),a=d((0,t.useState)(n),2),o=a[0],u=a[1],s=void 0!==e,c=i.current;return i.current=s,!s&&c&&o!==n&&u(n),[s?e:o,(0,t.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[0],a=t.slice(1),o=null==r?void 0:r.apply(void 0,[i].concat(br(a)));return u(i),o}),[r])]}var uD=t.createContext(null),sD=Object.prototype.hasOwnProperty;function cD(e,t,n){var r,i=Ln(e.keys());try{for(i.s();!(r=i.n()).done;)if(lD(n=r.value,t))return n}catch(a){i.e(a)}finally{i.f()}}function lD(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&lD(e[r],t[r]););return-1===r}if(n===Set){if(e.size!==t.size)return!1;var a,o=Ln(e);try{for(o.s();!(a=o.n()).done;){if((i=r=a.value)&&"object"===typeof i&&!(i=cD(t,i)))return!1;if(!t.has(i))return!1}}catch(c){o.e(c)}finally{o.f()}return!0}if(n===Map){if(e.size!==t.size)return!1;var u,s=Ln(e);try{for(s.s();!(u=s.n()).done;){if((i=(r=u.value)[0])&&"object"===typeof i&&!(i=cD(t,i)))return!1;if(!lD(r[1],t.get(i)))return!1}}catch(c){s.e(c)}finally{s.f()}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return-1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return-1===r}if(!n||"object"===typeof e){for(n in r=0,e){if(sD.call(e,n)&&++r&&!sD.call(t,n))return!1;if(!(n in t)||!lD(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!==e&&t!==t}var fD=function(e){var n=_e();return[e[0],(0,t.useCallback)((function(t){if(n())return e[1](t)}),[n,e[1]])]};function hD(e){return e.split("-")[0]}function dD(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function pD(e){return e instanceof dD(e).Element||e instanceof Element}function vD(e){return e instanceof dD(e).HTMLElement||e instanceof HTMLElement}function mD(e){return"undefined"!==typeof ShadowRoot&&(e instanceof dD(e).ShadowRoot||e instanceof ShadowRoot)}var yD=Math.max,gD=Math.min,kD=Math.round;function bD(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function wD(){return!/^((?!chrome|android).)*safari/i.test(bD())}function xD(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,a=1;t&&vD(e)&&(i=e.offsetWidth>0&&kD(r.width)/e.offsetWidth||1,a=e.offsetHeight>0&&kD(r.height)/e.offsetHeight||1);var o=(pD(e)?dD(e):window).visualViewport,u=!wD()&&n,s=(r.left+(u&&o?o.offsetLeft:0))/i,c=(r.top+(u&&o?o.offsetTop:0))/a,l=r.width/i,f=r.height/a;return{width:l,height:f,top:c,right:s+l,bottom:c+f,left:s,x:s,y:c}}function _D(e){var t=xD(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function ED(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&mD(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ID(e){return e?(e.nodeName||"").toLowerCase():null}function SD(e){return dD(e).getComputedStyle(e)}function TD(e){return["table","td","th"].indexOf(ID(e))>=0}function CD(e){return((pD(e)?e.ownerDocument:e.document)||window.document).documentElement}function ND(e){return"html"===ID(e)?e:e.assignedSlot||e.parentNode||(mD(e)?e.host:null)||CD(e)}function AD(e){return vD(e)&&"fixed"!==SD(e).position?e.offsetParent:null}function PD(e){for(var t=dD(e),n=AD(e);n&&TD(n)&&"static"===SD(n).position;)n=AD(n);return n&&("html"===ID(n)||"body"===ID(n)&&"static"===SD(n).position)?t:n||function(e){var t=/firefox/i.test(bD());if(/Trident/i.test(bD())&&vD(e)&&"fixed"===SD(e).position)return null;var n=ND(e);for(mD(n)&&(n=n.host);vD(n)&&["html","body"].indexOf(ID(n))<0;){var r=SD(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function OD(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function RD(e,t,n){return yD(e,gD(t,n))}function DD(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function LD(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}var MD="top",FD="bottom",jD="right",UD="left",VD="auto",zD=[MD,FD,jD,UD],BD="start",qD="end",KD="clippingParents",WD="viewport",GD="popper",HD="reference",QD=zD.reduce((function(e,t){return e.concat([t+"-"+BD,t+"-"+qD])}),[]),YD=[].concat(zD,[VD]).reduce((function(e,t){return e.concat([t,t+"-"+BD,t+"-"+qD])}),[]),$D=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];var JD={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,a=n.elements.arrow,o=n.modifiersData.popperOffsets,u=hD(n.placement),s=OD(u),c=[UD,jD].indexOf(u)>=0?"height":"width";if(a&&o){var l=function(e,t){return DD("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:LD(e,zD))}(i.padding,n),f=_D(a),h="y"===s?MD:UD,d="y"===s?FD:jD,p=n.rects.reference[c]+n.rects.reference[s]-o[s]-n.rects.popper[c],v=o[s]-n.rects.reference[s],m=PD(a),y=m?"y"===s?m.clientHeight||0:m.clientWidth||0:0,g=p/2-v/2,k=l[h],b=y-f[c]-l[d],w=y/2-f[c]/2+g,x=RD(k,w,b),_=s;n.modifiersData[r]=((t={})[_]=x,t.centerOffset=x-w,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&ED(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function XD(e){return e.split("-")[1]}var ZD={top:"auto",right:"auto",bottom:"auto",left:"auto"};function eL(e){var t,n=e.popper,r=e.popperRect,i=e.placement,a=e.variation,o=e.offsets,u=e.position,s=e.gpuAcceleration,c=e.adaptive,l=e.roundOffsets,f=e.isFixed,h=o.x,d=void 0===h?0:h,p=o.y,v=void 0===p?0:p,m="function"===typeof l?l({x:d,y:v}):{x:d,y:v};d=m.x,v=m.y;var y=o.hasOwnProperty("x"),g=o.hasOwnProperty("y"),k=UD,b=MD,w=window;if(c){var x=PD(n),_="clientHeight",E="clientWidth";if(x===dD(n)&&"static"!==SD(x=CD(n)).position&&"absolute"===u&&(_="scrollHeight",E="scrollWidth"),i===MD||(i===UD||i===jD)&&a===qD)b=FD,v-=(f&&x===w&&w.visualViewport?w.visualViewport.height:x[_])-r.height,v*=s?1:-1;if(i===UD||(i===MD||i===FD)&&a===qD)k=jD,d-=(f&&x===w&&w.visualViewport?w.visualViewport.width:x[E])-r.width,d*=s?1:-1}var I,S=Object.assign({position:u},c&&ZD),T=!0===l?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:kD(n*i)/i||0,y:kD(r*i)/i||0}}({x:d,y:v},dD(n)):{x:d,y:v};return d=T.x,v=T.y,s?Object.assign({},S,((I={})[b]=g?"0":"",I[k]=y?"0":"",I.transform=(w.devicePixelRatio||1)<=1?"translate("+d+"px, "+v+"px)":"translate3d("+d+"px, "+v+"px, 0)",I)):Object.assign({},S,((t={})[b]=g?v+"px":"",t[k]=y?d+"px":"",t.transform="",t))}var tL={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,a=n.adaptive,o=void 0===a||a,u=n.roundOffsets,s=void 0===u||u,c={placement:hD(t.placement),variation:XD(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,eL(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:s})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,eL(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:s})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},nL={passive:!0};var rL={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,a=void 0===i||i,o=r.resize,u=void 0===o||o,s=dD(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach((function(e){e.addEventListener("scroll",n.update,nL)})),u&&s.addEventListener("resize",n.update,nL),function(){a&&c.forEach((function(e){e.removeEventListener("scroll",n.update,nL)})),u&&s.removeEventListener("resize",n.update,nL)}},data:{}},iL={left:"right",right:"left",bottom:"top",top:"bottom"};function aL(e){return e.replace(/left|right|bottom|top/g,(function(e){return iL[e]}))}var oL={start:"end",end:"start"};function uL(e){return e.replace(/start|end/g,(function(e){return oL[e]}))}function sL(e){var t=dD(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function cL(e){return xD(CD(e)).left+sL(e).scrollLeft}function lL(e){var t=SD(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function fL(e){return["html","body","#document"].indexOf(ID(e))>=0?e.ownerDocument.body:vD(e)&&lL(e)?e:fL(ND(e))}function hL(e,t){var n;void 0===t&&(t=[]);var r=fL(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),a=dD(r),o=i?[a].concat(a.visualViewport||[],lL(r)?r:[]):r,u=t.concat(o);return i?u:u.concat(hL(ND(o)))}function dL(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function pL(e,t,n){return t===WD?dL(function(e,t){var n=dD(e),r=CD(e),i=n.visualViewport,a=r.clientWidth,o=r.clientHeight,u=0,s=0;if(i){a=i.width,o=i.height;var c=wD();(c||!c&&"fixed"===t)&&(u=i.offsetLeft,s=i.offsetTop)}return{width:a,height:o,x:u+cL(e),y:s}}(e,n)):pD(t)?function(e,t){var n=xD(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):dL(function(e){var t,n=CD(e),r=sL(e),i=null==(t=e.ownerDocument)?void 0:t.body,a=yD(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=yD(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),u=-r.scrollLeft+cL(e),s=-r.scrollTop;return"rtl"===SD(i||n).direction&&(u+=yD(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:o,x:u,y:s}}(CD(e)))}function vL(e,t,n,r){var i="clippingParents"===t?function(e){var t=hL(ND(e)),n=["absolute","fixed"].indexOf(SD(e).position)>=0&&vD(e)?PD(e):e;return pD(n)?t.filter((function(e){return pD(e)&&ED(e,n)&&"body"!==ID(e)})):[]}(e):[].concat(t),a=[].concat(i,[n]),o=a[0],u=a.reduce((function(t,n){var i=pL(e,n,r);return t.top=yD(i.top,t.top),t.right=gD(i.right,t.right),t.bottom=gD(i.bottom,t.bottom),t.left=yD(i.left,t.left),t}),pL(e,o,r));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function mL(e){var t,n=e.reference,r=e.element,i=e.placement,a=i?hD(i):null,o=i?XD(i):null,u=n.x+n.width/2-r.width/2,s=n.y+n.height/2-r.height/2;switch(a){case MD:t={x:u,y:n.y-r.height};break;case FD:t={x:u,y:n.y+n.height};break;case jD:t={x:n.x+n.width,y:s};break;case UD:t={x:n.x-r.width,y:s};break;default:t={x:n.x,y:n.y}}var c=a?OD(a):null;if(null!=c){var l="y"===c?"height":"width";switch(o){case BD:t[c]=t[c]-(n[l]/2-r[l]/2);break;case qD:t[c]=t[c]+(n[l]/2-r[l]/2)}}return t}function yL(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,a=n.strategy,o=void 0===a?e.strategy:a,u=n.boundary,s=void 0===u?KD:u,c=n.rootBoundary,l=void 0===c?WD:c,f=n.elementContext,h=void 0===f?GD:f,d=n.altBoundary,p=void 0!==d&&d,v=n.padding,m=void 0===v?0:v,y=DD("number"!==typeof m?m:LD(m,zD)),g=h===GD?HD:GD,k=e.rects.popper,b=e.elements[p?g:h],w=vL(pD(b)?b:b.contextElement||CD(e.elements.popper),s,l,o),x=xD(e.elements.reference),_=mL({reference:x,element:k,strategy:"absolute",placement:i}),E=dL(Object.assign({},k,_)),I=h===GD?E:x,S={top:w.top-I.top+y.top,bottom:I.bottom-w.bottom+y.bottom,left:w.left-I.left+y.left,right:I.right-w.right+y.right},T=e.modifiersData.offset;if(h===GD&&T){var C=T[i];Object.keys(S).forEach((function(e){var t=[jD,FD].indexOf(e)>=0?1:-1,n=[MD,FD].indexOf(e)>=0?"y":"x";S[e]+=C[n]*t}))}return S}var gL={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,a=void 0===i||i,o=n.altAxis,u=void 0===o||o,s=n.fallbackPlacements,c=n.padding,l=n.boundary,f=n.rootBoundary,h=n.altBoundary,d=n.flipVariations,p=void 0===d||d,v=n.allowedAutoPlacements,m=t.options.placement,y=hD(m),g=s||(y===m||!p?[aL(m)]:function(e){if(hD(e)===VD)return[];var t=aL(e);return[uL(e),t,uL(t)]}(m)),k=[m].concat(g).reduce((function(e,n){return e.concat(hD(n)===VD?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,a=n.rootBoundary,o=n.padding,u=n.flipVariations,s=n.allowedAutoPlacements,c=void 0===s?YD:s,l=XD(r),f=l?u?QD:QD.filter((function(e){return XD(e)===l})):zD,h=f.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=f);var d=h.reduce((function(t,n){return t[n]=yL(e,{placement:n,boundary:i,rootBoundary:a,padding:o})[hD(n)],t}),{});return Object.keys(d).sort((function(e,t){return d[e]-d[t]}))}(t,{placement:n,boundary:l,rootBoundary:f,padding:c,flipVariations:p,allowedAutoPlacements:v}):n)}),[]),b=t.rects.reference,w=t.rects.popper,x=new Map,_=!0,E=k[0],I=0;I<k.length;I++){var S=k[I],T=hD(S),C=XD(S)===BD,N=[MD,FD].indexOf(T)>=0,A=N?"width":"height",P=yL(t,{placement:S,boundary:l,rootBoundary:f,altBoundary:h,padding:c}),O=N?C?jD:UD:C?FD:MD;b[A]>w[A]&&(O=aL(O));var R=aL(O),D=[];if(a&&D.push(P[T]<=0),u&&D.push(P[O]<=0,P[R]<=0),D.every((function(e){return e}))){E=S,_=!1;break}x.set(S,D)}if(_)for(var L=function(e){var t=k.find((function(t){var n=x.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return E=t,"break"},M=p?3:1;M>0;M--){if("break"===L(M))break}t.placement!==E&&(t.modifiersData[r]._skip=!0,t.placement=E,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function kL(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function bL(e){return[MD,jD,FD,UD].some((function(t){return e[t]>=0}))}var wL={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,a=void 0===i?[0,0]:i,o=YD.reduce((function(e,n){return e[n]=function(e,t,n){var r=hD(e),i=[UD,MD].indexOf(r)>=0?-1:1,a="function"===typeof n?n(Object.assign({},t,{placement:e})):n,o=a[0],u=a[1];return o=o||0,u=(u||0)*i,[UD,jD].indexOf(r)>=0?{x:u,y:o}:{x:o,y:u}}(n,t.rects,a),e}),{}),u=o[t.placement],s=u.x,c=u.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=s,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=o}};var xL={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,a=void 0===i||i,o=n.altAxis,u=void 0!==o&&o,s=n.boundary,c=n.rootBoundary,l=n.altBoundary,f=n.padding,h=n.tether,d=void 0===h||h,p=n.tetherOffset,v=void 0===p?0:p,m=yL(t,{boundary:s,rootBoundary:c,padding:f,altBoundary:l}),y=hD(t.placement),g=XD(t.placement),k=!g,b=OD(y),w="x"===b?"y":"x",x=t.modifiersData.popperOffsets,_=t.rects.reference,E=t.rects.popper,I="function"===typeof v?v(Object.assign({},t.rects,{placement:t.placement})):v,S="number"===typeof I?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,C={x:0,y:0};if(x){if(a){var N,A="y"===b?MD:UD,P="y"===b?FD:jD,O="y"===b?"height":"width",R=x[b],D=R+m[A],L=R-m[P],M=d?-E[O]/2:0,F=g===BD?_[O]:E[O],j=g===BD?-E[O]:-_[O],U=t.elements.arrow,V=d&&U?_D(U):{width:0,height:0},z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},B=z[A],q=z[P],K=RD(0,_[O],V[O]),W=k?_[O]/2-M-K-B-S.mainAxis:F-K-B-S.mainAxis,G=k?-_[O]/2+M+K+q+S.mainAxis:j+K+q+S.mainAxis,H=t.elements.arrow&&PD(t.elements.arrow),Q=H?"y"===b?H.clientTop||0:H.clientLeft||0:0,Y=null!=(N=null==T?void 0:T[b])?N:0,$=R+G-Y,J=RD(d?gD(D,R+W-Y-Q):D,R,d?yD(L,$):L);x[b]=J,C[b]=J-R}if(u){var X,Z="x"===b?MD:UD,ee="x"===b?FD:jD,te=x[w],ne="y"===w?"height":"width",re=te+m[Z],ie=te-m[ee],ae=-1!==[MD,UD].indexOf(y),oe=null!=(X=null==T?void 0:T[w])?X:0,ue=ae?re:te-_[ne]-E[ne]-oe+S.altAxis,se=ae?te+_[ne]+E[ne]-oe-S.altAxis:ie,ce=d&&ae?function(e,t,n){var r=RD(e,t,n);return r>n?n:r}(ue,te,se):RD(d?ue:re,te,d?se:ie);x[w]=ce,C[w]=ce-te}t.modifiersData[r]=C}},requiresIfExists:["offset"]};function _L(e,t,n){void 0===n&&(n=!1);var r=vD(t),i=vD(t)&&function(e){var t=e.getBoundingClientRect(),n=kD(t.width)/e.offsetWidth||1,r=kD(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),a=CD(t),o=xD(e,i,n),u={scrollLeft:0,scrollTop:0},s={x:0,y:0};return(r||!r&&!n)&&(("body"!==ID(t)||lL(a))&&(u=function(e){return e!==dD(e)&&vD(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:sL(e);var t}(t)),vD(t)?((s=xD(t,!0)).x+=t.clientLeft,s.y+=t.clientTop):a&&(s.x=cL(a))),{x:o.left+u.scrollLeft-s.x,y:o.top+u.scrollTop-s.y,width:o.width,height:o.height}}function EL(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function IL(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var SL={placement:"bottom",modifiers:[],strategy:"absolute"};function TL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function CL(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,a=void 0===i?SL:i;return function(e,t,n){void 0===n&&(n=a);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},SL,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},o=[],u=!1,s={state:i,setOptions:function(n){var u="function"===typeof n?n(i.options):n;c(),i.options=Object.assign({},a,i.options,u),i.scrollParents={reference:pD(e)?hL(e):e.contextElement?hL(e.contextElement):[],popper:hL(t)};var l=function(e){var t=EL(e);return $D.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=l.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,a=e.effect;if("function"===typeof a){var u=a({state:i,name:t,instance:s,options:r}),c=function(){};o.push(u||c)}})),s.update()},forceUpdate:function(){if(!u){var e=i.elements,t=e.reference,n=e.popper;if(TL(t,n)){i.rects={reference:_L(t,PD(n),"fixed"===i.options.strategy),popper:_D(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var a=i.orderedModifiers[r],o=a.fn,c=a.options,l=void 0===c?{}:c,f=a.name;"function"===typeof o&&(i=o({state:i,options:l,name:f,instance:s})||i)}else i.reset=!1,r=-1}}},update:IL((function(){return new Promise((function(e){s.forceUpdate(),e(i)}))})),destroy:function(){c(),u=!0}};if(!TL(e,t))return s;function c(){o.forEach((function(e){return e()})),o=[]}return s.setOptions(n).then((function(e){!u&&n.onFirstUpdate&&n.onFirstUpdate(e)})),s}}var NL=CL({defaultModifiers:[{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,o=yL(t,{elementContext:"reference"}),u=yL(t,{altBoundary:!0}),s=kL(o,r),c=kL(u,i,a),l=bL(s),f=bL(c);t.modifiersData[n]={referenceClippingOffsets:s,popperEscapeOffsets:c,isReferenceHidden:l,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":f})}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=mL({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},tL,rL,wL,gL,xL,JD]}),AL=["enabled","placement","strategy","modifiers"];var PL={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:function(){}},OL={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(e){var t=e.state;return function(){var e=t.elements,n=e.reference,r=e.popper;if("removeAttribute"in n){var i=(n.getAttribute("aria-describedby")||"").split(",").filter((function(e){return e.trim()!==r.id}));i.length?n.setAttribute("aria-describedby",i.join(",")):n.removeAttribute("aria-describedby")}}},fn:function(e){var t,n=e.state.elements,r=n.popper,i=n.reference,a=null==(t=r.getAttribute("role"))?void 0:t.toLowerCase();if(r.id&&"tooltip"===a&&"setAttribute"in i){var o=i.getAttribute("aria-describedby");if(o&&-1!==o.split(",").indexOf(r.id))return;i.setAttribute("aria-describedby",o?"".concat(o,",").concat(r.id):r.id)}}},RL=[];var DL=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.enabled,a=void 0===i||i,o=r.placement,u=void 0===o?"bottom":o,s=r.strategy,c=void 0===s?"absolute":s,l=r.modifiers,f=void 0===l?RL:l,h=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(r,AL),p=(0,t.useRef)(f),v=(0,t.useRef)(),m=(0,t.useCallback)((function(){var e;null==(e=v.current)||e.update()}),[]),y=(0,t.useCallback)((function(){var e;null==(e=v.current)||e.forceUpdate()}),[]),g=d(fD((0,t.useState)({placement:u,update:m,forceUpdate:y,attributes:{},styles:{popper:{},arrow:{}}})),2),k=g[0],b=g[1],w=(0,t.useMemo)((function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(e){var t=e.state,n={},r={};Object.keys(t.elements).forEach((function(e){n[e]=t.styles[e],r[e]=t.attributes[e]})),b({state:t,styles:n,attributes:r,update:m,forceUpdate:y,placement:t.placement})}}}),[m,y,b]),x=(0,t.useMemo)((function(){return lD(p.current,f)||(p.current=f),p.current}),[f]);return(0,t.useEffect)((function(){v.current&&a&&v.current.setOptions({placement:u,strategy:c,modifiers:[].concat(br(x),[w,PL])})}),[c,u,w,a,x]),(0,t.useEffect)((function(){if(a&&null!=e&&null!=n)return v.current=NL(e,n,Object.assign({},h,{placement:u,strategy:c,modifiers:[].concat(br(x),[OL,w])})),function(){null!=v.current&&(v.current.destroy(),v.current=void 0,b((function(e){return Object.assign({},e,{attributes:{},styles:{popper:{}}})})))}}),[a,e,n]),k},LL=function(){};var ML=function(e){return e&&("current"in e?e.current:e)},FL={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};var jL=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:LL,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.disabled,a=r.clickTrigger,o=void 0===a?"click":a,u=(0,t.useRef)(!1),s=(0,t.useRef)(!1),c=(0,t.useCallback)((function(t){var n,r=ML(e);Qt()(!!r,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),u.current=!r||!!((n=t).metaKey||n.altKey||n.ctrlKey||n.shiftKey)||!function(e){return 0===e.button}(t)||!!nO(r,t.target)||s.current,s.current=!1}),[e]),l=we((function(t){var n=ML(e);n&&nO(n,t.target)&&(s.current=!0)})),f=we((function(e){u.current||n(e)}));(0,t.useEffect)((function(){var t,n;if(!i&&null!=e){var r=Ge(ML(e)),a=r.defaultView||window,u=null!=(t=a.event)?t:null==(n=a.parent)?void 0:n.event,s=null;FL[o]&&(s=at(r,FL[o],l,!0));var h=at(r,o,c,!0),d=at(r,o,(function(e){e!==u?f(e):u=void 0})),p=[];return"ontouchstart"in r.documentElement&&(p=[].slice.call(r.body.children).map((function(e){return at(e,"mousemove",LL)}))),function(){null==s||s(),h(),d(),p.forEach((function(e){return e()}))}}}),[e,i,o,c,l,f])};function UL(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.isArray(e)?e:Object.keys(e).map((function(t){return e[t].name=t,e[t]}))}function VL(e){var t,n,r,i,a,o=e.enabled,u=e.enableEvents,s=e.placement,c=e.flip,l=e.offset,f=e.fixed,h=e.containerPadding,d=e.arrowElement,p=e.popperConfig,v=void 0===p?{}:p,m=function(e){var t={};return Array.isArray(e)?(null==e||e.forEach((function(e){t[e.name]=e})),t):e||t}(v.modifiers);return Object.assign({},v,{placement:s,enabled:o,strategy:f?"fixed":v.strategy,modifiers:UL(Object.assign({},m,{eventListeners:{enabled:u,options:null==(t=m.eventListeners)?void 0:t.options},preventOverflow:Object.assign({},m.preventOverflow,{options:h?Object.assign({padding:h},null==(n=m.preventOverflow)?void 0:n.options):null==(r=m.preventOverflow)?void 0:r.options}),offset:{options:Object.assign({offset:l},null==(i=m.offset)?void 0:i.options)},arrow:Object.assign({},m.arrow,{enabled:!!d,options:Object.assign({},null==(a=m.arrow)?void 0:a.options,{element:d})}),flip:Object.assign({enabled:!!c},m.flip)}))})}var zL=["children"];var BL=function(){};function qL(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,t.useContext)(uD),r=d(xe(),2),i=r[0],a=r[1],o=(0,t.useRef)(!1),u=e.flip,s=e.offset,c=e.rootCloseEvent,l=e.fixed,f=void 0!==l&&l,h=e.placement,p=e.popperConfig,v=void 0===p?{}:p,m=e.enableEventListeners,y=void 0===m||m,g=e.usePopper,k=void 0===g?!!n:g,b=null==(null==n?void 0:n.show)?!!e.show:n.show;b&&!o.current&&(o.current=!0);var w=n||{},x=w.placement,_=w.setMenu,E=w.menuElement,I=w.toggleElement,S=DL(I,E,VL({placement:h||x||"bottom-start",enabled:k,enableEvents:null==y?b:y,offset:s,flip:u,fixed:f,arrowElement:i,popperConfig:v})),T=Object.assign({ref:_||BL,"aria-labelledby":null==I?void 0:I.id},S.attributes.popper,{style:S.styles.popper}),C={show:b,placement:x,hasShown:o.current,toggle:null==n?void 0:n.toggle,popper:k?S:null,arrowProps:k?Object.assign({ref:a},S.attributes.arrow,{style:S.styles.arrow}):{}};return jL(E,(function(e){null==n||n.toggle(!1,e)}),{clickTrigger:c,disabled:!b}),[T,C]}function KL(e){var t=e.children,n=d(qL(function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,zL)),2),r=n[0],i=n[1];return(0,D.jsx)(D.Fragment,{children:t(r,i)})}KL.displayName="DropdownMenu",KL.defaultProps={usePopper:!0};var WL=KL,GL={prefix:String(Math.round(1e10*Math.random())),current:0,isSSR:!1},HL=t.createContext(GL);var QL=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement),YL=new WeakMap;function $L(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,t.useContext)(HL),r=(0,t.useRef)(null);if(null===r.current&&!e){var i,a,o=null===(i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)||void 0===i||null===(a=i.ReactCurrentOwner)||void 0===a?void 0:a.current;if(o){var u=YL.get(o);null==u?YL.set(o,{id:n.current,state:o.memoizedState}):o.memoizedState!==u.state&&(n.current=u.id,YL.delete(o))}r.current=++n.current}return r.current}var JL="function"===typeof t.useId?function(e){var n=t.useId(),r=d((0,t.useState)("function"===typeof t.useSyncExternalStore?t.useSyncExternalStore(eM,XL,ZL):(0,t.useContext)(HL).isSSR),1)[0]?"react-aria":"react-aria".concat(GL.prefix);return e||"".concat(r,"-").concat(n)}:function(e){var n=(0,t.useContext)(HL);n!==GL||QL||console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");var r=$L(!!e),i="react-aria".concat(n.prefix);return e||"".concat(i,"-").concat(r)};function XL(){return!1}function ZL(){return!0}function eM(e){return function(){}}var tM=function(e){var t;return"menu"===(null==(t=e.getAttribute("role"))?void 0:t.toLowerCase())},nM=function(){};function rM(){var e=JL(),n=(0,t.useContext)(uD)||{},r=n.show,i=void 0!==r&&r,a=n.toggle,o=void 0===a?nM:a,u=n.setToggle,s=n.menuElement,c=(0,t.useCallback)((function(e){o(!i,e)}),[i,o]),l={id:e,ref:u||nM,onClick:c,"aria-expanded":!!i};return s&&tM(s)&&(l["aria-haspopup"]=!0),[l,{show:i,toggle:o}]}function iM(e){var t=e.children,n=d(rM(),2),r=n[0],i=n[1];return(0,D.jsx)(D.Fragment,{children:t(r,i)})}iM.displayName="DropdownToggle";var aM=iM,oM=["eventKey","disabled","onClick","active","as"];function uM(e){var n=e.key,r=e.href,i=e.active,a=e.disabled,o=e.onClick,u=(0,t.useContext)(YO),s=((0,t.useContext)(BR)||{}).activeKey,c=QO(n,r),l=null==i&&null!=n?QO(s)===c:i;return[T({onClick:we((function(e){a||(null==o||o(e),u&&!e.isPropagationStopped()&&u(c,e))})),"aria-disabled":a||void 0,"aria-selected":l},iO("dropdown-item"),""),{isActive:l}]}var sM=t.forwardRef((function(e,t){var n=e.eventKey,r=e.disabled,i=e.onClick,a=e.active,o=e.as,u=void 0===o?Ae:o,s=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,oM),c=d(uM({key:n,href:s.href,disabled:r,onClick:i,active:a}),1)[0];return(0,D.jsx)(u,Object.assign({},s,{ref:t},c))}));sM.displayName="DropdownItem";var cM=sM;function lM(){var e=VR(),n=(0,t.useRef)(null),r=(0,t.useCallback)((function(t){n.current=t,e()}),[e]);return[n,r]}function fM(e){var n=e.defaultShow,r=e.show,i=e.onSelect,a=e.onToggle,o=e.itemSelector,u=void 0===o?"* [".concat(iO("dropdown-item"),"]"):o,s=e.focusFirstItemOnShow,c=e.placement,l=void 0===c?"bottom-start":c,f=e.children,h=cO(),p=d(oD(r,n,a),2),v=p[0],m=p[1],y=d(lM(),2),g=y[0],k=y[1],b=g.current,w=d(lM(),2),x=w[0],_=w[1],E=x.current,I=Ee(v),S=(0,t.useRef)(null),T=(0,t.useRef)(!1),C=(0,t.useContext)(YO),N=(0,t.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?void 0:t.type;m(e,{originalEvent:t,source:n})}),[m]),A=we((function(e,t){null==i||i(e,t),N(!1,t,"select"),t.isPropagationStopped()||null==C||C(e,t)})),P=(0,t.useMemo)((function(){return{toggle:N,placement:l,show:v,menuElement:b,toggleElement:E,setMenu:k,setToggle:_}}),[N,l,v,b,E,k,_]);b&&I&&!v&&(T.current=b.contains(b.ownerDocument.activeElement));var O=we((function(){E&&E.focus&&E.focus()})),R=we((function(){var e=S.current,t=s;if(null==t&&(t=!(!g.current||!tM(g.current))&&"keyboard"),!1!==t&&("keyboard"!==t||/^key.+$/.test(e))){var n=bO(g.current,u)[0];n&&n.focus&&n.focus()}}));(0,t.useEffect)((function(){v?R():T.current&&(T.current=!1,O())}),[v,T,O,R]),(0,t.useEffect)((function(){S.current=null}));var L=function(e,t){if(!g.current)return null;var n=bO(g.current,u),r=n.indexOf(e)+t;return n[r=Math.max(0,Math.min(r,n.length))]};return function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=we(r);(0,t.useEffect)((function(){var t="function"===typeof e?e():e;return t.addEventListener(n,a,i),function(){return t.removeEventListener(n,a,i)}}),[e])}((0,t.useCallback)((function(){return h.document}),[h]),"keydown",(function(e){var t,n,r=e.key,i=e.target,a=null==(t=g.current)?void 0:t.contains(i),o=null==(n=x.current)?void 0:n.contains(i);if((!/input|textarea/i.test(i.tagName)||!(" "===r||"Escape"!==r&&a||"Escape"===r&&"search"===i.type))&&(a||o)&&("Tab"!==r||g.current&&v)){S.current=e.type;var u={originalEvent:e,source:e.type};switch(r){case"ArrowUp":var s=L(i,-1);return s&&s.focus&&s.focus(),void e.preventDefault();case"ArrowDown":if(e.preventDefault(),v){var c=L(i,1);c&&c.focus&&c.focus()}else m(!0,u);return;case"Tab":rt(i.ownerDocument,"keyup",(function(e){var t;("Tab"!==e.key||e.target)&&null!=(t=g.current)&&t.contains(e.target)||m(!1,u)}),{once:!0});break;case"Escape":"Escape"===r&&(e.preventDefault(),e.stopPropagation()),m(!1,u)}}})),(0,D.jsx)(YO.Provider,{value:A,children:(0,D.jsx)(uD.Provider,{value:P,children:f})})}fM.displayName="Dropdown",fM.Menu=WL,fM.Toggle=aM,fM.Item=cM;var hM=fM,dM=t.createContext({});dM.displayName="DropdownContext";var pM=dM,vM=["bsPrefix","className","eventKey","disabled","onClick","active","as"],mM=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.eventKey,a=e.disabled,o=void 0!==a&&a,u=e.onClick,s=e.active,c=e.as,l=void 0===c?Re:c,f=P(e,vM),h=F(n,"dropdown-item"),p=d(uM({key:i,href:f.href,disabled:o,onClick:u,active:s}),2),v=p[0],m=p[1];return(0,D.jsx)(l,N(N(N({},f),v),{},{ref:t,className:R()(r,h,m.isActive&&"active",o&&"disabled")}))}));mM.displayName="DropdownItem";var yM=mM,gM=t.createContext(null);gM.displayName="InputGroupContext";var kM=gM;function bM(e,t){return e}var wM=["bsPrefix","className","align","rootCloseEvent","flip","show","renderOnMount","as","popperConfig","variant"];function xM(e,t,n){var r=e?n?"bottom-start":"bottom-end":n?"bottom-end":"bottom-start";return"up"===t?r=e?n?"top-start":"top-end":n?"top-end":"top-start":"end"===t?r=e?n?"left-end":"right-end":n?"left-start":"right-start":"start"===t?r=e?n?"right-end":"left-end":n?"right-start":"left-start":"down-centered"===t?r="bottom":"up-centered"===t&&(r="top"),r}var _M=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.align,o=e.rootCloseEvent,u=e.flip,s=void 0===u||u,c=e.show,l=e.renderOnMount,f=e.as,h=void 0===f?"div":f,p=e.popperConfig,v=e.variant,m=P(e,wM),y=!1,g=(0,t.useContext)(uR),k=F(r,"dropdown-menu"),b=(0,t.useContext)(pM),w=b.align,x=b.drop,_=b.isRTL;a=a||w;var E=(0,t.useContext)(kM),I=[];if(a)if("object"===typeof a){var S=Object.keys(a);if(S.length){var T=S[0],C=a[T];y="start"===C,I.push("".concat(k,"-").concat(T,"-").concat(C))}}else"end"===a&&(y=!0);var A=xM(y,x,_),O=d(qL({flip:s,rootCloseEvent:o,show:c,usePopper:!g&&0===I.length,offset:[0,2],popperConfig:p,placement:A}),2),L=O[0],M=O[1],j=M.hasShown,U=M.popper,V=M.show,z=M.toggle;if(L.ref=ht(bM(n),L.ref),Se((function(){V&&(null==U||U.update())}),[V]),!j&&!l&&!E)return null;"string"!==typeof h&&(L.show=V,L.close=function(){return null==z?void 0:z(!1)},L.align=a);var B=m.style;return null!=U&&U.placement&&(B=N(N({},m.style),L.style),m["x-placement"]=U.placement),(0,D.jsx)(h,N(N(N(N({},m),L),{},{style:B},(I.length||g)&&{"data-bs-popper":"static"}),{},{className:R().apply(void 0,[i,k,V&&"show",y&&"".concat(k,"-end"),v&&"".concat(k,"-").concat(v)].concat(I))}))}));_M.displayName="DropdownMenu";var EM=_M,IM=["bsPrefix","split","className","childBsPrefix","as"],SM=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.split,a=e.className,o=e.childBsPrefix,u=e.as,s=void 0===u?Pn:u,c=P(e,IM),l=F(r,"dropdown-toggle"),f=(0,t.useContext)(uD);void 0!==o&&(c.bsPrefix=o);var h=d(rM(),1)[0];return h.ref=ht(h.ref,bM(n)),(0,D.jsx)(s,N(N({className:R()(a,l,i&&"".concat(l,"-split"),(null==f?void 0:f.show)&&"show")},h),c))}));SM.displayName="DropdownToggle";var TM=SM,CM=["bsPrefix","drop","show","className","align","onSelect","onToggle","focusFirstItemOnShow","as","navbar","autoClose"],NM=W("dropdown-header",{defaultProps:{role:"heading"}}),AM=W("dropdown-divider",{Component:"hr",defaultProps:{role:"separator"}}),PM=W("dropdown-item-text",{Component:"span"}),OM=t.forwardRef((function(e,n){var r=me(e,{show:"onToggle"}),i=r.bsPrefix,a=r.drop,o=void 0===a?"down":a,u=r.show,s=r.className,c=r.align,l=void 0===c?"start":c,f=r.onSelect,h=r.onToggle,d=r.focusFirstItemOnShow,p=r.as,v=void 0===p?"div":p,m=(r.navbar,r.autoClose),y=void 0===m||m,g=P(r,CM),k=(0,t.useContext)(kM),b=F(i,"dropdown"),w=j(),x=we((function(e,t){var n;t.originalEvent.currentTarget!==document||"keydown"===t.source&&"Escape"!==t.originalEvent.key||(t.source="rootClose"),n=t.source,(!1===y?"click"===n:"inside"===y?"rootClose"!==n:"outside"!==y||"select"!==n)&&(null==h||h(e,t))})),_=xM("end"===l,o,w),E=(0,t.useMemo)((function(){return{align:l,drop:o,isRTL:w}}),[l,o,w]),I={down:b,"down-centered":"".concat(b,"-center"),up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return(0,D.jsx)(pM.Provider,{value:E,children:(0,D.jsx)(hM,{placement:_,show:u,onSelect:f,onToggle:x,focusFirstItemOnShow:d,itemSelector:".".concat(b,"-item:not(.disabled):not(:disabled)"),children:k?g.children:(0,D.jsx)(v,N(N({},g),{},{ref:n,className:R()(s,u&&"show",I[o])}))})})}));OM.displayName="Dropdown";var RM=Object.assign(OM,{Toggle:TM,Menu:EM,Item:yM,ItemText:PM,Divider:AM,Header:NM});function DM(e){var t=e.currentUser,n=e.logout,r=e.error;return(0,D.jsxs)(UR,{bg:"dark",variant:"dark",children:[(0,D.jsx)(UR.Brand,{style:{marginLeft:"20px"},children:"KeyMate"}),(0,D.jsxs)(aD,{className:"ml-auto align-items-center",children:[(0,D.jsxs)(RM,{children:[(0,D.jsxs)(RM.Toggle,{variant:"primary",id:"profileDropdown",children:["Welcome, ",t.email]}),(0,D.jsx)(RM.Menu,{children:(0,D.jsx)(RM.Item,{as:WP,to:"/update-profile",children:"Update Profile"})})]}),r&&(0,D.jsx)(Ot,{variant:"danger",children:r}),(0,D.jsx)(Pn,{variant:"outline-light",onClick:n,style:{marginLeft:"10px",marginRight:"10px"},children:"Logout"})]})]})}function LM(e){var t=e.showDeleteModal,n=e.handleCloseDeleteModal,r=e.handleDelete;return(0,D.jsxs)(GO,{show:t,onHide:n,centered:!0,children:[(0,D.jsx)(GO.Header,{closeButton:!0,children:(0,D.jsx)(GO.Title,{children:"Confirm Deletion"})}),(0,D.jsx)(GO.Body,{children:"Are you sure you want to delete this item?"}),(0,D.jsxs)(GO.Footer,{children:[(0,D.jsx)(Pn,{variant:"secondary",onClick:n,children:"No"}),(0,D.jsx)(Pn,{variant:"danger",onClick:r,children:"Yes"})]})]})}function MM(e){var n=e.showEditModal,r=e.handleCloseEditModal,i=e.handleUpdateClick,a=e.itemToEdit,o=d((0,t.useState)(a),2),u=o[0],s=o[1],c=function(e,t){s((function(n){return N(N({},n),{},T({},e,t))}))};return(0,D.jsxs)(GO,{show:n,onHide:r,centered:!0,children:[(0,D.jsx)(GO.Header,{closeButton:!0,children:(0,D.jsx)(GO.Title,{children:"Edit Entry"})}),(0,D.jsx)(GO.Body,{children:(0,D.jsxs)(Cn,{children:[(0,D.jsxs)(Cn.Group,{children:[(0,D.jsx)(Cn.Label,{children:"Website"}),(0,D.jsx)(Cn.Control,{type:"text",value:u.website,onChange:function(e){return c("website",e.target.value)}})]}),(0,D.jsxs)(Cn.Group,{children:[(0,D.jsx)(Cn.Label,{children:"Username"}),(0,D.jsx)(Cn.Control,{type:"text",value:u.username,onChange:function(e){return c("username",e.target.value)}})]}),(0,D.jsxs)(Cn.Group,{children:[(0,D.jsx)(Cn.Label,{children:"Password"}),(0,D.jsx)(Cn.Control,{type:"password",value:u.password,onChange:function(e){return c("password",e.target.value)}})]})]})}),(0,D.jsxs)(GO.Footer,{children:[(0,D.jsx)(Pn,{variant:"secondary",onClick:r,children:"Close"}),(0,D.jsx)(Pn,{variant:"primary",onClick:function(){i(a.id,u),r()},children:"Update"})]})]})}function FM(){var e=d((0,t.useState)(""),2),n=e[0],r=(e[1],d((0,t.useState)(!1),2)),i=r[0],a=r[1],u=d((0,t.useState)(!1),2),c=u[0],l=u[1],f=d((0,t.useState)([]),2),h=f[0],p=f[1],v=_A(),m=v.currentUser,y=v.logout,g=(gP(),d((0,t.useState)(!1),2)),k=g[0],b=g[1],x=d((0,t.useState)(null),2),_=x[0],E=x[1],I=d((0,t.useState)(!1),2),S=I[0],T=I[1],C=d((0,t.useState)(null),2),A=C[0],P=C[1];(0,t.useEffect)((function(){var e=function(){var e=s(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,m){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,wA.collection("users").doc(m.uid).collection("passwords").orderBy("postedOn","desc").get();case 5:t=e.sent,n=t.docs.map((function(e){return N(N({},e.data()),{},{id:e.id})})),p(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error fetching pass data:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[m]);var O=function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!1),e.prev=1,e.next=4,wA.collection("users").doc(m.uid).collection("passwords").doc(t).delete();case 4:p((function(e){return e.filter((function(e){return e.id!==t}))})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Error deleting entry:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();(0,t.useEffect)((function(){return wA.collection("users").doc(m.uid).collection("passwords").orderBy("postedOn","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return N(N({},e.data()),{},{id:e.id})}));p(t)}))}),[m]);var R=function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!1),e.prev=1,e.next=4,wA.collection("users").doc(m.uid).collection("passwords").add(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("Error adding entry:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!1),e.prev=1,e.next=4,wA.collection("users").doc(m.uid).collection("passwords").doc(t).update(n);case 4:return e.next=6,wA.collection("users").doc(m.uid).collection("passwords").orderBy("postedOn","desc").get();case 6:r=e.sent,i=r.docs.map((function(e){return N(N({},e.data()),{},{id:e.id})})),p(i),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error("Error updating entry:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}();return(0,D.jsxs)("div",{children:[(0,D.jsx)(DM,{currentUser:m,logout:y,error:n})," ",(0,D.jsx)("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:(0,D.jsx)(he,{style:{width:"80%"},children:(0,D.jsxs)(he.Body,{children:[(0,D.jsx)("div",{className:"d-flex justify-content-end mb-3",children:(0,D.jsxs)(Pn,{variant:"primary",onClick:function(){return a(!0)},children:[(0,D.jsx)(XP,{className:"mr-1"})," Add"]})}),(0,D.jsxs)("table",{className:"table",children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{children:[(0,D.jsx)("th",{children:"Website"}),(0,D.jsx)("th",{children:"Username"}),(0,D.jsx)("th",{children:"Password"}),(0,D.jsx)("th",{children:"Actions"})]})}),(0,D.jsx)("tbody",{children:h.map((function(e){return(0,D.jsxs)("tr",{children:[(0,D.jsxs)("td",{children:[e.website,(0,D.jsx)(Pn,{variant:"link",className:"copy-button",onClick:function(){navigator.clipboard.writeText(e.website)},children:(0,D.jsx)(w,{})})]}),(0,D.jsxs)("td",{children:[e.username,(0,D.jsx)(Pn,{variant:"link",className:"copy-button",onClick:function(){navigator.clipboard.writeText(e.username)},children:(0,D.jsx)(w,{})})]}),(0,D.jsxs)("td",{children:[e.password,(0,D.jsx)(Pn,{variant:"link",className:"copy-button",onClick:function(){navigator.clipboard.writeText(e.password)},children:(0,D.jsx)(w,{})})]}),(0,D.jsxs)("td",{children:[(0,D.jsx)(Pn,{variant:"link",onClick:function(){return function(e){P(e),T(!0)}(e)},children:"Edit"}),(0,D.jsx)(Pn,{variant:"link",onClick:function(){E(e.id),b(!0)},children:"Delete"})]})]},e.id)}))})]})]})})}),(0,D.jsx)(HO,{showModal:i,handleCloseModal:function(){return a(!1)},handleTogglePassword:function(){return l(!c)},showPassword:c,handleAddEntry:R}),(0,D.jsx)(LM,{showDeleteModal:k,handleCloseDeleteModal:function(){return b(!1)},handleDelete:function(){return O(_)}}),A&&(0,D.jsx)(MM,{showEditModal:S,handleCloseEditModal:function(){T(!1),P(null)},handleUpdateClick:L,itemToEdit:A})]})}function jM(){var e=(0,t.useRef)(),n=(0,t.useRef)(),r=_A().login,i=d((0,t.useState)(""),2),a=i[0],u=i[1],c=d((0,t.useState)(!1),2),l=c[0],f=c[1],h=gP();function p(){return(p=s(o().mark((function t(i){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i.preventDefault(),t.prev=1,u(""),f(!0),t.next=6,r(e.current.value,n.current.value);case 6:h("/"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),u("Failed to sign in");case 12:f(!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))).apply(this,arguments)}var v=d((0,t.useState)(!1),2),m=v[0],y=v[1];return(0,D.jsx)(z,{className:"signup-container",children:(0,D.jsx)(he,{className:"signup-card",children:(0,D.jsxs)(he.Body,{children:[(0,D.jsx)(he.Title,{children:"Log in"}),a&&(0,D.jsx)(Ot,{variant:"danger",children:a}),(0,D.jsxs)(Cn,{onSubmit:function(e){return p.apply(this,arguments)},children:[(0,D.jsxs)(Cn.Group,{controlId:"email",children:[(0,D.jsxs)(Cn.Label,{className:"label-with-icon mt-3",children:[(0,D.jsx)(x,{})," Email"]}),(0,D.jsx)(Cn.Control,{type:"email",ref:e,placeholder:"Enter email"})]}),(0,D.jsxs)(Cn.Group,{controlId:"password",children:[(0,D.jsxs)(Cn.Label,{className:"label-with-icon mt-3",children:[(0,D.jsx)(I,{})," Password"]}),(0,D.jsxs)("div",{className:"password-input-group",children:[(0,D.jsx)(Cn.Control,{ref:n,type:m?"text":"password",placeholder:"Password"}),(0,D.jsx)("span",{className:"password-toggle-icon",onClick:function(){y(!m)},children:m?(0,D.jsx)(_,{}):(0,D.jsx)(E,{})})]})]}),(0,D.jsx)(Pn,{disabled:l,className:"w-100 mt-4",variant:"primary",type:"submit",children:"Login"})]}),(0,D.jsx)("div",{className:"w-100 text-center mt-3",children:(0,D.jsx)(WP,{to:"/forgot-password",children:"Forgot password?"})}),(0,D.jsxs)("div",{className:"already-account-link",children:["Need an account? ",(0,D.jsx)(WP,{to:"/signup",children:"Sign Up"})]})]})})})}function UM(e){var t=e.children;return _A().currentUser?t:(0,D.jsx)(PP,{to:"/login"})}function VM(){var e=(0,t.useRef)(),n=_A().resetpassword,r=d((0,t.useState)(""),2),i=r[0],a=r[1],u=d((0,t.useState)(""),2),c=u[0],l=u[1],f=d((0,t.useState)(!1),2),h=f[0],p=f[1];function v(){return(v=s(o().mark((function t(r){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.prev=1,l(""),a(""),p(!0),t.next=7,n(e.current.value);case 7:l("Check inbox for further information"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),a("Failed to reset password");case 13:p(!1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}return(0,D.jsx)(z,{className:"signup-container",children:(0,D.jsx)(he,{className:"signup-card",children:(0,D.jsxs)(he.Body,{children:[(0,D.jsx)(he.Title,{children:"Password Reset"}),i&&(0,D.jsx)(Ot,{variant:"danger",children:i}),c&&(0,D.jsx)(Ot,{variant:"success",children:c}),(0,D.jsxs)(Cn,{onSubmit:function(e){return v.apply(this,arguments)},children:[(0,D.jsxs)(Cn.Group,{controlId:"email",children:[(0,D.jsxs)(Cn.Label,{className:"label-with-icon mt-3",children:[(0,D.jsx)(x,{})," Email"]}),(0,D.jsx)(Cn.Control,{type:"email",ref:e,placeholder:"Enter email"})]}),(0,D.jsx)(Pn,{disabled:h,className:"w-100 mt-4",variant:"primary",type:"submit",children:"Reset Password"})]}),(0,D.jsx)("div",{className:"w-100 text-center mt-3",children:(0,D.jsx)(WP,{to:"/login",children:"Login"})}),(0,D.jsxs)("div",{className:"already-account-link",children:["Need an account? ",(0,D.jsx)(WP,{to:"/signup",children:"Sign Up"})]})]})})})}function zM(){var e=(0,t.useRef)(),n=(0,t.useRef)(),r=(0,t.useRef)(),i=_A(),a=i.currentUser,u=i.updateEmail,c=i.updatePassword,l=d((0,t.useState)(""),2),f=l[0],h=l[1],p=d((0,t.useState)(!1),2),v=p[0],m=p[1],y=gP();function g(){return g=s(o().mark((function t(i){var s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.preventDefault(),n.current.value===r.current.value){t.next=3;break}return t.abrupt("return",h("Passwords do not match"));case 3:if(s=[],m(!0),h(""),e.current.value===a.email){t.next=16;break}t.prev=7,s.push(u(e.current.value)),t.next=16;break;case 11:return t.prev=11,t.t0=t.catch(7),h("Failed to update email: "+t.t0.message),m(!1),t.abrupt("return");case 16:if(!n.current.value){t.next=26;break}t.prev=17,s.push(c(n.current.value)),t.next=26;break;case 21:return t.prev=21,t.t1=t.catch(17),h("Failed to update password: "+t.t1.message),m(!1),t.abrupt("return");case 26:Promise.all(s).then((function(){y("/")})).catch((function(e){h("Failed to update account: "+e.message)})).finally((function(){m(!1)}));case 27:case"end":return t.stop()}}),t,null,[[7,11],[17,21]])}))),g.apply(this,arguments)}var k=d((0,t.useState)(!1),2),b=k[0],w=k[1],S=d((0,t.useState)(!1),2),T=S[0],C=S[1];return(0,D.jsx)(z,{className:"signup-container",children:(0,D.jsx)(he,{className:"signup-card",children:(0,D.jsxs)(he.Body,{children:[(0,D.jsx)(he.Title,{children:"Update Profile"}),f&&(0,D.jsx)(Ot,{variant:"danger",children:f}),(0,D.jsxs)(Cn,{onSubmit:function(e){return g.apply(this,arguments)},children:[(0,D.jsxs)(Cn.Group,{controlId:"email",children:[(0,D.jsxs)(Cn.Label,{className:"label-with-icon mt-3",children:[(0,D.jsx)(x,{})," Email"]}),(0,D.jsx)(Cn.Control,{type:"email",ref:e,defaultValue:a.email})]}),(0,D.jsxs)(Cn.Group,{controlId:"password",children:[(0,D.jsxs)(Cn.Label,{className:"label-with-icon mt-3",children:[(0,D.jsx)(I,{})," Password"]}),(0,D.jsxs)("div",{className:"password-input-group",children:[(0,D.jsx)(Cn.Control,{ref:n,type:b?"text":"password",placeholder:"Leave blank to keep same password"}),(0,D.jsx)("span",{className:"password-toggle-icon",onClick:function(){w(!b)},children:b?(0,D.jsx)(_,{}):(0,D.jsx)(E,{})})]})]}),(0,D.jsxs)(Cn.Group,{controlId:"passwordConfirmation",children:[(0,D.jsxs)(Cn.Label,{className:"label-with-icon mt-3",children:[(0,D.jsx)(I,{})," Confirm Password"]}),(0,D.jsxs)("div",{className:"password-input-group",children:[(0,D.jsx)(Cn.Control,{ref:r,type:T?"text":"password",placeholder:"Leave blank to keep same password"}),(0,D.jsx)("span",{className:"password-toggle-icon",onClick:function(){C(!T)},children:T?(0,D.jsx)(_,{}):(0,D.jsx)(E,{})})]})]}),(0,D.jsx)(Pn,{disabled:v,className:"w-100 mt-4",variant:"primary",type:"submit",children:"Update"})]}),(0,D.jsx)("div",{className:"already-account-link",children:(0,D.jsx)(WP,{to:"/",children:"Cancel"})})]})})})}var BM=function(){return(0,D.jsx)(BP,{children:(0,D.jsx)(EA,{children:(0,D.jsxs)(DP,{children:[(0,D.jsx)(OP,{exact:!0,path:"/",element:(0,D.jsx)(UM,{children:(0,D.jsx)(FM,{})})}),(0,D.jsx)(OP,{path:"/update-profile",element:(0,D.jsx)(UM,{children:(0,D.jsx)(zM,{})})}),(0,D.jsx)(OP,{path:"/signup",element:(0,D.jsx)(YP,{})}),(0,D.jsx)(OP,{path:"/login",element:(0,D.jsx)(jM,{})}),(0,D.jsx)(OP,{path:"/forgot-password",element:(0,D.jsx)(VM,{})})]})})})},qM=document.getElementById("root");(0,i.s)(qM).render((0,D.jsx)(BM,{}))}()}();
//# sourceMappingURL=main.6b3a60b4.js.map